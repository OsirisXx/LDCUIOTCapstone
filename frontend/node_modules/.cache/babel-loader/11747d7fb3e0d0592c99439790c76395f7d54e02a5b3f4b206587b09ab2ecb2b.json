{"ast":null,"code":"import _objectSpread from\"C:/Users/Harley/Desktop/Capstone/attendanceiot/IOTCapstone/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{PlusIcon,PencilIcon,TrashIcon,BookOpenIcon,UserGroupIcon,UserPlusIcon,ExclamationTriangleIcon}from'@heroicons/react/24/outline';import axios from'axios';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Subjects(){const[subjects,setSubjects]=useState([]);const[instructors,setInstructors]=useState([]);const[loading,setLoading]=useState(true);const[showModal,setShowModal]=useState(false);const[showStudentModal,setShowStudentModal]=useState(false);const[editingSubject,setEditingSubject]=useState(null);const[selectedSubject,setSelectedSubject]=useState(null);const[enrolledStudents,setEnrolledStudents]=useState([]);const[availableStudents,setAvailableStudents]=useState([]);const[selectedStudents,setSelectedStudents]=useState([]);const[loadingStudents,setLoadingStudents]=useState(false);const[showDeleteModal,setShowDeleteModal]=useState(false);const[deleteData,setDeleteData]=useState(null);const[modalAnimation,setModalAnimation]=useState('hidden');const[formData,setFormData]=useState({SUBJECTCODE:'',SUBJECTNAME:'',DESCRIPTION:'',INSTRUCTORID:'',SEMESTER:'First Semester',YEAR:new Date().getFullYear(),ACADEMICYEAR:'2024-2025'});const semesterOptions=['First Semester','Second Semester','Summer'];useEffect(()=>{fetchData();},[]);const fetchData=async()=>{try{setLoading(true);// Fetch subjects and instructors in parallel\nconst[subjectsResponse,instructorsResponse]=await Promise.all([axios.get('/api/subjects',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}),axios.get('/api/subjects/instructors/list',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}})]);setSubjects(subjectsResponse.data.subjects||[]);setInstructors(instructorsResponse.data||[]);}catch(error){var _error$response;console.error('Error fetching data:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){toast.error('Session expired. Please login again.');// Redirect to login or refresh token\n}else{toast.error('Failed to load subjects');}}finally{setLoading(false);}};const handleSubmit=async e=>{e.preventDefault();try{const url=editingSubject?\"/api/subjects/\".concat(editingSubject.SUBJECTID):'/api/subjects';const method=editingSubject?'put':'post';await axios[method](url,formData,{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});toast.success(\"Subject \".concat(editingSubject?'updated':'created',\" successfully!\"));setShowModal(false);resetForm();fetchData();}catch(error){var _error$response2,_error$response2$data;console.error('Error saving subject:',error);if((_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.errors){error.response.data.errors.forEach(err=>toast.error(err.msg));}else{var _error$response3,_error$response3$data;toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to save subject');}}};const handleEdit=subject=>{setEditingSubject(subject);setFormData({SUBJECTCODE:subject.SUBJECTCODE||'',SUBJECTNAME:subject.SUBJECTNAME||'',DESCRIPTION:subject.DESCRIPTION||'',INSTRUCTORID:subject.INSTRUCTORID||'',SEMESTER:subject.SEMESTER||'First Semester',YEAR:subject.YEAR||new Date().getFullYear(),ACADEMICYEAR:subject.ACADEMICYEAR||'2024-2025'});setShowModal(true);};const handleDelete=(subjectId,subjectName)=>{setDeleteData({type:'subject',id:subjectId,name:subjectName,title:'Delete Subject',message:\"Are you sure you want to delete \\\"\".concat(subjectName,\"\\\"? This will also remove all related schedules and enrollments. This action cannot be undone.\"),confirmText:'Delete Subject'});setShowDeleteModal(true);setTimeout(()=>setModalAnimation('visible'),10);};const confirmDelete=async()=>{if(!deleteData)return;try{const response=await axios.delete(\"/api/subjects/\".concat(deleteData.id),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});// Show enhanced success message with cascade deletion info\nconst message=response.data.message||'Subject deleted successfully!';toast.success(message,{duration:4000,style:{background:'#f0fdf4',border:'1px solid #bbf7d0',color:'#166534'}});fetchData();}catch(error){var _error$response4,_error$response4$data,_error$response5,_error$response5$data;console.error('Error deleting subject:',error);const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to delete subject';const errorDetails=(_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.details;// Show detailed error message\nif(errorDetails){toast.error(\"\".concat(errorMessage,\": \").concat(errorDetails),{duration:8000,style:{background:'#fef2f2',border:'1px solid #fecaca',color:'#dc2626'}});}else{toast.error(errorMessage);}}finally{setModalAnimation('hidden');setTimeout(()=>{setShowDeleteModal(false);setDeleteData(null);},300);}};const resetForm=()=>{setFormData({SUBJECTCODE:'',SUBJECTNAME:'',DESCRIPTION:'',INSTRUCTORID:'',SEMESTER:'First Semester',YEAR:new Date().getFullYear(),ACADEMICYEAR:'2024-2025'});setEditingSubject(null);};const closeModal=()=>{setShowModal(false);resetForm();};const handleAssignStudents=async subject=>{setSelectedSubject(subject);setShowStudentModal(true);setSelectedStudents([]);await fetchStudentsForSubject(subject.SUBJECTID);};const fetchStudentsForSubject=async subjectId=>{try{setLoadingStudents(true);const response=await axios.get(\"/api/subjects/\".concat(subjectId,\"/students\"),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setEnrolledStudents(response.data.enrolled||[]);setAvailableStudents(response.data.available||[]);}catch(error){console.error('Error fetching students:',error);toast.error('Failed to load students for this subject');}finally{setLoadingStudents(false);}};const handleEnrollStudents=async()=>{if(selectedStudents.length===0){toast.error('Please select at least one student');return;}try{await axios.post(\"/api/subjects/\".concat(selectedSubject.SUBJECTID,\"/enroll\"),{studentIds:selectedStudents},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});toast.success(\"Successfully enrolled \".concat(selectedStudents.length,\" student(s)\"));setShowStudentModal(false);setSelectedStudents([]);fetchData();// Refresh subjects list to update enrollment counts\n}catch(error){var _error$response6,_error$response6$data;console.error('Error enrolling students:',error);toast.error(((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||'Failed to enroll students');}};const handleRemoveStudent=async studentId=>{if(!window.confirm('Are you sure you want to remove this student from the subject?')){return;}try{await axios.delete(\"/api/subjects/\".concat(selectedSubject.SUBJECTID,\"/students/\").concat(studentId),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});toast.success('Student removed successfully');await fetchStudentsForSubject(selectedSubject.SUBJECTID);fetchData();// Refresh subjects list to update enrollment counts\n}catch(error){var _error$response7,_error$response7$data;console.error('Error removing student:',error);toast.error(((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.message)||'Failed to remove student');}};const closeStudentModal=()=>{setShowStudentModal(false);setSelectedSubject(null);setEnrolledStudents([]);setAvailableStudents([]);setSelectedStudents([]);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Subjects\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:\"Manage academic subjects and assign instructors\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowModal(true),className:\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-5 w-5 mr-2\"}),\"Add Subject\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:subjects.map(subject=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg border border-gray-200 hover:shadow-md transition-shadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(BookOpenIcon,{className:\"h-8 w-8 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:subject.SUBJECTCODE}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[subject.SEMESTER,\" \",subject.YEAR]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAssignStudents(subject),className:\"p-2 text-gray-400 hover:text-green-600 transition-colors\",title:\"Assign Students\",children:/*#__PURE__*/_jsx(UserPlusIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(subject),className:\"p-2 text-gray-400 hover:text-blue-600 transition-colors\",title:\"Edit Subject\",children:/*#__PURE__*/_jsx(PencilIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(subject.SUBJECTID,subject.SUBJECTNAME),className:\"p-2 text-gray-400 hover:text-red-600 transition-colors\",title:\"Delete Subject\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-base font-semibold text-gray-900 mb-2\",children:subject.SUBJECTNAME}),subject.DESCRIPTION&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mb-4 line-clamp-2\",children:subject.DESCRIPTION}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-500\",children:[/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-4 w-4 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[subject.enrolled_students||0,\" students\"]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500\",children:subject.instructor_name||'No instructor assigned'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-xs text-gray-400\",children:[\"Academic Year: \",subject.ACADEMICYEAR]})]})},subject.SUBJECTID))}),subjects.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BookOpenIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No subjects\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Get started by creating a new subject.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowModal(true),className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-5 w-5 mr-2\"}),\"Add Subject\"]})})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:editingSubject?'Edit Subject':'Add New Subject'}),/*#__PURE__*/_jsxs(\"button\",{onClick:closeModal,className:\"text-gray-400 hover:text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Close\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Subject Code *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.SUBJECTCODE,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{SUBJECTCODE:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\",placeholder:\"e.g., CS101\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Instructor *\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:formData.INSTRUCTORID,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{INSTRUCTORID:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Instructor\"}),instructors.map(instructor=>/*#__PURE__*/_jsxs(\"option\",{value:instructor.USERID,children:[instructor.FIRSTNAME,\" \",instructor.LASTNAME,\" (\",instructor.EMPLOYEEID||instructor.FACULTYID,\")\"]},instructor.USERID))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Subject Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.SUBJECTNAME,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{SUBJECTNAME:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\",placeholder:\"e.g., Introduction to Computer Science\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.DESCRIPTION,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{DESCRIPTION:e.target.value})),rows:3,className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Subject description (optional)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Semester *\"}),/*#__PURE__*/_jsx(\"select\",{required:true,value:formData.SEMESTER,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{SEMESTER:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\",children:semesterOptions.map(semester=>/*#__PURE__*/_jsx(\"option\",{value:semester,children:semester},semester))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Year *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,min:\"2020\",max:\"2030\",value:formData.YEAR,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{YEAR:parseInt(e.target.value)})),className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Academic Year *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,pattern:\"\\\\d{4}-\\\\d{4}\",value:formData.ACADEMICYEAR,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{ACADEMICYEAR:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\",placeholder:\"2024-2025\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:closeModal,className:\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:[editingSubject?'Update':'Create',\" Subject\"]})]})]})]})}),showStudentModal&&selectedSubject&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative top-10 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 shadow-lg rounded-md bg-white\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:[\"Assign Students to \",selectedSubject.SUBJECTCODE,\" - \",selectedSubject.SUBJECTNAME]}),/*#__PURE__*/_jsxs(\"button\",{onClick:closeStudentModal,className:\"text-gray-400 hover:text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Close\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})]})]}),loadingStudents?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-32\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"})}):/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium text-gray-900 mb-3\",children:[\"Available Students (\",availableStudents.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded-lg max-h-96 overflow-y-auto\",children:availableStudents.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-gray-500\",children:\"No available students to assign\"}):/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:availableStudents.map(student=>/*#__PURE__*/_jsx(\"div\",{className:\"p-3 hover:bg-gray-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedStudents.includes(student.USERID),onChange:e=>{if(e.target.checked){setSelectedStudents([...selectedStudents,student.USERID]);}else{setSelectedStudents(selectedStudents.filter(id=>id!==student.USERID));}},className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[student.FIRSTNAME,\" \",student.LASTNAME]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[student.STUDENTID,\" \\u2022 \",student.YEARLEVEL,\" \\u2022 \",student.DEPARTMENT]})]})]})})})},student.USERID))})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-md font-medium text-gray-900 mb-3\",children:[\"Enrolled Students (\",enrolledStudents.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded-lg max-h-96 overflow-y-auto\",children:enrolledStudents.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-center text-gray-500\",children:\"No students enrolled yet\"}):/*#__PURE__*/_jsx(\"div\",{className:\"divide-y divide-gray-200\",children:enrolledStudents.map(student=>/*#__PURE__*/_jsx(\"div\",{className:\"p-3 hover:bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-medium text-gray-900\",children:[student.FIRSTNAME,\" \",student.LASTNAME]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[student.STUDENTID,\" \\u2022 \",student.YEARLEVEL,\" \\u2022 \",student.DEPARTMENT]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-400\",children:[\"Enrolled: \",new Date(student.ENROLLMENTDATE).toLocaleDateString()]})]})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveStudent(student.USERID),className:\"ml-2 p-1 text-red-400 hover:text-red-600 transition-colors\",title:\"Remove Student\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})},student.USERID))})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:closeStudentModal,className:\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:\"Close\"}),selectedStudents.length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleEnrollStudents,className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\",children:[\"Enroll \",selectedStudents.length,\" Student\",selectedStudents.length!==1?'s':'']})]})]})}),showDeleteModal&&deleteData&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 overflow-y-auto z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ease-in-out \".concat(modalAnimation==='visible'?'opacity-100':'opacity-0'),children:/*#__PURE__*/_jsx(\"div\",{className:\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all duration-300 ease-out sm:my-8 sm:w-full sm:max-w-lg \".concat(modalAnimation==='visible'?'scale-100 opacity-100 translate-y-0':'scale-95 opacity-0 translate-y-4'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-red-50 to-red-100 px-6 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 shadow-lg mb-4 animate-pulse\",children:/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-8 w-8 text-red-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:deleteData.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 leading-relaxed\",children:deleteData.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 space-y-3 space-y-reverse sm:space-y-0\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setModalAnimation('hidden');setTimeout(()=>{setShowDeleteModal(false);setDeleteData(null);},300);},className:\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 ease-in-out transform hover:scale-105\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:confirmDelete,className:\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-xl text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg\",children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4 mr-2\"}),deleteData.confirmText]})]})]})})})})]});}export default Subjects;","map":{"version":3,"names":["React","useState","useEffect","PlusIcon","PencilIcon","TrashIcon","BookOpenIcon","UserGroupIcon","UserPlusIcon","ExclamationTriangleIcon","axios","toast","jsx","_jsx","jsxs","_jsxs","Subjects","subjects","setSubjects","instructors","setInstructors","loading","setLoading","showModal","setShowModal","showStudentModal","setShowStudentModal","editingSubject","setEditingSubject","selectedSubject","setSelectedSubject","enrolledStudents","setEnrolledStudents","availableStudents","setAvailableStudents","selectedStudents","setSelectedStudents","loadingStudents","setLoadingStudents","showDeleteModal","setShowDeleteModal","deleteData","setDeleteData","modalAnimation","setModalAnimation","formData","setFormData","SUBJECTCODE","SUBJECTNAME","DESCRIPTION","INSTRUCTORID","SEMESTER","YEAR","Date","getFullYear","ACADEMICYEAR","semesterOptions","fetchData","subjectsResponse","instructorsResponse","Promise","all","get","headers","Authorization","concat","localStorage","getItem","data","error","_error$response","console","response","status","handleSubmit","e","preventDefault","url","SUBJECTID","method","success","resetForm","_error$response2","_error$response2$data","errors","forEach","err","msg","_error$response3","_error$response3$data","message","handleEdit","subject","handleDelete","subjectId","subjectName","type","id","name","title","confirmText","setTimeout","confirmDelete","delete","duration","style","background","border","color","_error$response4","_error$response4$data","_error$response5","_error$response5$data","errorMessage","errorDetails","details","closeModal","handleAssignStudents","fetchStudentsForSubject","enrolled","available","handleEnrollStudents","length","post","studentIds","_error$response6","_error$response6$data","handleRemoveStudent","studentId","window","confirm","_error$response7","_error$response7$data","closeStudentModal","className","children","onClick","map","enrolled_students","instructor_name","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","onSubmit","required","value","onChange","_objectSpread","target","placeholder","instructor","USERID","FIRSTNAME","LASTNAME","EMPLOYEEID","FACULTYID","rows","semester","min","max","parseInt","pattern","student","checked","includes","filter","STUDENTID","YEARLEVEL","DEPARTMENT","ENROLLMENTDATE","toLocaleDateString"],"sources":["C:/Users/Harley/Desktop/Capstone/attendanceiot/IOTCapstone/frontend/src/pages/Subjects.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { PlusIcon, PencilIcon, TrashIcon, BookOpenIcon, UserGroupIcon, UserPlusIcon, ExclamationTriangleIcon } from '@heroicons/react/24/outline';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\n\nfunction Subjects() {\n  const [subjects, setSubjects] = useState([]);\n  const [instructors, setInstructors] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [showStudentModal, setShowStudentModal] = useState(false);\n  const [editingSubject, setEditingSubject] = useState(null);\n  const [selectedSubject, setSelectedSubject] = useState(null);\n  const [enrolledStudents, setEnrolledStudents] = useState([]);\n  const [availableStudents, setAvailableStudents] = useState([]);\n  const [selectedStudents, setSelectedStudents] = useState([]);\n  const [loadingStudents, setLoadingStudents] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deleteData, setDeleteData] = useState(null);\n  const [modalAnimation, setModalAnimation] = useState('hidden');\n\n  const [formData, setFormData] = useState({\n    SUBJECTCODE: '',\n    SUBJECTNAME: '',\n    DESCRIPTION: '',\n    INSTRUCTORID: '',\n    SEMESTER: 'First Semester',\n    YEAR: new Date().getFullYear(),\n    ACADEMICYEAR: '2024-2025'\n  });\n\n  const semesterOptions = ['First Semester', 'Second Semester', 'Summer'];\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      \n      // Fetch subjects and instructors in parallel\n      const [subjectsResponse, instructorsResponse] = await Promise.all([\n        axios.get('/api/subjects', {\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n        }),\n        axios.get('/api/subjects/instructors/list', {\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n        })\n      ]);\n\n      setSubjects(subjectsResponse.data.subjects || []);\n      setInstructors(instructorsResponse.data || []);\n      \n    } catch (error) {\n      console.error('Error fetching data:', error);\n      if (error.response?.status === 401) {\n        toast.error('Session expired. Please login again.');\n        // Redirect to login or refresh token\n      } else {\n        toast.error('Failed to load subjects');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    try {\n      const url = editingSubject \n        ? `/api/subjects/${editingSubject.SUBJECTID}` \n        : '/api/subjects';\n      \n      const method = editingSubject ? 'put' : 'post';\n      \n      await axios[method](url, formData, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n      });\n\n      toast.success(`Subject ${editingSubject ? 'updated' : 'created'} successfully!`);\n      setShowModal(false);\n      resetForm();\n      fetchData();\n    } catch (error) {\n      console.error('Error saving subject:', error);\n      if (error.response?.data?.errors) {\n        error.response.data.errors.forEach(err => toast.error(err.msg));\n      } else {\n        toast.error(error.response?.data?.message || 'Failed to save subject');\n      }\n    }\n  };\n\n  const handleEdit = (subject) => {\n    setEditingSubject(subject);\n    setFormData({\n      SUBJECTCODE: subject.SUBJECTCODE || '',\n      SUBJECTNAME: subject.SUBJECTNAME || '',\n      DESCRIPTION: subject.DESCRIPTION || '',\n      INSTRUCTORID: subject.INSTRUCTORID || '',\n      SEMESTER: subject.SEMESTER || 'First Semester',\n      YEAR: subject.YEAR || new Date().getFullYear(),\n      ACADEMICYEAR: subject.ACADEMICYEAR || '2024-2025'\n    });\n    setShowModal(true);\n  };\n\n  const handleDelete = (subjectId, subjectName) => {\n    setDeleteData({\n      type: 'subject',\n      id: subjectId,\n      name: subjectName,\n      title: 'Delete Subject',\n      message: `Are you sure you want to delete \"${subjectName}\"? This will also remove all related schedules and enrollments. This action cannot be undone.`,\n      confirmText: 'Delete Subject'\n    });\n    setShowDeleteModal(true);\n    setTimeout(() => setModalAnimation('visible'), 10);\n  };\n\n  const confirmDelete = async () => {\n    if (!deleteData) return;\n\n    try {\n      const response = await axios.delete(`/api/subjects/${deleteData.id}`, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n      });\n      \n      // Show enhanced success message with cascade deletion info\n      const message = response.data.message || 'Subject deleted successfully!';\n      toast.success(message, {\n        duration: 4000,\n        style: {\n          background: '#f0fdf4',\n          border: '1px solid #bbf7d0',\n          color: '#166534',\n        },\n      });\n      fetchData();\n    } catch (error) {\n      console.error('Error deleting subject:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to delete subject';\n      const errorDetails = error.response?.data?.details;\n      \n      // Show detailed error message\n      if (errorDetails) {\n        toast.error(`${errorMessage}: ${errorDetails}`, {\n          duration: 8000,\n          style: {\n            background: '#fef2f2',\n            border: '1px solid #fecaca',\n            color: '#dc2626',\n          },\n        });\n      } else {\n        toast.error(errorMessage);\n      }\n    } finally {\n      setModalAnimation('hidden');\n      setTimeout(() => {\n        setShowDeleteModal(false);\n        setDeleteData(null);\n      }, 300);\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      SUBJECTCODE: '',\n      SUBJECTNAME: '',\n      DESCRIPTION: '',\n      INSTRUCTORID: '',\n      SEMESTER: 'First Semester',\n      YEAR: new Date().getFullYear(),\n      ACADEMICYEAR: '2024-2025'\n    });\n    setEditingSubject(null);\n  };\n\n  const closeModal = () => {\n    setShowModal(false);\n    resetForm();\n  };\n\n  const handleAssignStudents = async (subject) => {\n    setSelectedSubject(subject);\n    setShowStudentModal(true);\n    setSelectedStudents([]);\n    await fetchStudentsForSubject(subject.SUBJECTID);\n  };\n\n  const fetchStudentsForSubject = async (subjectId) => {\n    try {\n      setLoadingStudents(true);\n      const response = await axios.get(`/api/subjects/${subjectId}/students`, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n      });\n      \n      setEnrolledStudents(response.data.enrolled || []);\n      setAvailableStudents(response.data.available || []);\n    } catch (error) {\n      console.error('Error fetching students:', error);\n      toast.error('Failed to load students for this subject');\n    } finally {\n      setLoadingStudents(false);\n    }\n  };\n\n  const handleEnrollStudents = async () => {\n    if (selectedStudents.length === 0) {\n      toast.error('Please select at least one student');\n      return;\n    }\n\n    try {\n      await axios.post(`/api/subjects/${selectedSubject.SUBJECTID}/enroll`, {\n        studentIds: selectedStudents\n      }, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n      });\n\n      toast.success(`Successfully enrolled ${selectedStudents.length} student(s)`);\n      setShowStudentModal(false);\n      setSelectedStudents([]);\n      fetchData(); // Refresh subjects list to update enrollment counts\n    } catch (error) {\n      console.error('Error enrolling students:', error);\n      toast.error(error.response?.data?.message || 'Failed to enroll students');\n    }\n  };\n\n  const handleRemoveStudent = async (studentId) => {\n    if (!window.confirm('Are you sure you want to remove this student from the subject?')) {\n      return;\n    }\n\n    try {\n      await axios.delete(`/api/subjects/${selectedSubject.SUBJECTID}/students/${studentId}`, {\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\n      });\n\n      toast.success('Student removed successfully');\n      await fetchStudentsForSubject(selectedSubject.SUBJECTID);\n      fetchData(); // Refresh subjects list to update enrollment counts\n    } catch (error) {\n      console.error('Error removing student:', error);\n      toast.error(error.response?.data?.message || 'Failed to remove student');\n    }\n  };\n\n  const closeStudentModal = () => {\n    setShowStudentModal(false);\n    setSelectedSubject(null);\n    setEnrolledStudents([]);\n    setAvailableStudents([]);\n    setSelectedStudents([]);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Subjects</h1>\n            <p className=\"mt-1 text-sm text-gray-600\">\n              Manage academic subjects and assign instructors\n            </p>\n          </div>\n          <button\n            onClick={() => setShowModal(true)}\n            className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            <PlusIcon className=\"h-5 w-5 mr-2\" />\n            Add Subject\n          </button>\n        </div>\n      </div>\n\n      {/* Subjects Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {subjects.map((subject) => (\n          <div key={subject.SUBJECTID} className=\"bg-white overflow-hidden shadow rounded-lg border border-gray-200 hover:shadow-md transition-shadow\">\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div className=\"flex items-center\">\n                  <BookOpenIcon className=\"h-8 w-8 text-blue-600\" />\n                  <div className=\"ml-3\">\n                    <h3 className=\"text-lg font-medium text-gray-900\">{subject.SUBJECTCODE}</h3>\n                    <p className=\"text-sm text-gray-500\">{subject.SEMESTER} {subject.YEAR}</p>\n                  </div>\n                </div>\n                <div className=\"flex space-x-2\">\n                  <button\n                    onClick={() => handleAssignStudents(subject)}\n                    className=\"p-2 text-gray-400 hover:text-green-600 transition-colors\"\n                    title=\"Assign Students\"\n                  >\n                    <UserPlusIcon className=\"h-4 w-4\" />\n                  </button>\n                  <button\n                    onClick={() => handleEdit(subject)}\n                    className=\"p-2 text-gray-400 hover:text-blue-600 transition-colors\"\n                    title=\"Edit Subject\"\n                  >\n                    <PencilIcon className=\"h-4 w-4\" />\n                  </button>\n                  <button\n                    onClick={() => handleDelete(subject.SUBJECTID, subject.SUBJECTNAME)}\n                    className=\"p-2 text-gray-400 hover:text-red-600 transition-colors\"\n                    title=\"Delete Subject\"\n                  >\n                    <TrashIcon className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              </div>\n              \n              <h4 className=\"text-base font-semibold text-gray-900 mb-2\">\n                {subject.SUBJECTNAME}\n              </h4>\n              \n              {subject.DESCRIPTION && (\n                <p className=\"text-sm text-gray-600 mb-4 line-clamp-2\">\n                  {subject.DESCRIPTION}\n                </p>\n              )}\n              \n              <div className=\"flex items-center justify-between text-sm\">\n                <div className=\"flex items-center text-gray-500\">\n                  <UserGroupIcon className=\"h-4 w-4 mr-1\" />\n                  <span>{subject.enrolled_students || 0} students</span>\n                </div>\n                <span className=\"text-gray-500\">\n                  {subject.instructor_name || 'No instructor assigned'}\n                </span>\n              </div>\n              \n              <div className=\"mt-4 text-xs text-gray-400\">\n                Academic Year: {subject.ACADEMICYEAR}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {subjects.length === 0 && (\n        <div className=\"text-center py-12\">\n          <BookOpenIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No subjects</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">Get started by creating a new subject.</p>\n          <div className=\"mt-6\">\n            <button\n              onClick={() => setShowModal(true)}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              <PlusIcon className=\"h-5 w-5 mr-2\" />\n              Add Subject\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Modal */}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                {editingSubject ? 'Edit Subject' : 'Add New Subject'}\n              </h3>\n              <button\n                onClick={closeModal}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <span className=\"sr-only\">Close</span>\n                <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Subject Code *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.SUBJECTCODE}\n                    onChange={(e) => setFormData({...formData, SUBJECTCODE: e.target.value})}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                    placeholder=\"e.g., CS101\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Instructor *</label>\n                  <select\n                    required\n                    value={formData.INSTRUCTORID}\n                    onChange={(e) => setFormData({...formData, INSTRUCTORID: e.target.value})}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    <option value=\"\">Select Instructor</option>\n                    {instructors.map((instructor) => (\n                      <option key={instructor.USERID} value={instructor.USERID}>\n                        {instructor.FIRSTNAME} {instructor.LASTNAME} ({instructor.EMPLOYEEID || instructor.FACULTYID})\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700\">Subject Name *</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.SUBJECTNAME}\n                  onChange={(e) => setFormData({...formData, SUBJECTNAME: e.target.value})}\n                  className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"e.g., Introduction to Computer Science\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700\">Description</label>\n                <textarea\n                  value={formData.DESCRIPTION}\n                  onChange={(e) => setFormData({...formData, DESCRIPTION: e.target.value})}\n                  rows={3}\n                  className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder=\"Subject description (optional)\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Semester *</label>\n                  <select\n                    required\n                    value={formData.SEMESTER}\n                    onChange={(e) => setFormData({...formData, SEMESTER: e.target.value})}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  >\n                    {semesterOptions.map((semester) => (\n                      <option key={semester} value={semester}>{semester}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Year *</label>\n                  <input\n                    type=\"number\"\n                    required\n                    min=\"2020\"\n                    max=\"2030\"\n                    value={formData.YEAR}\n                    onChange={(e) => setFormData({...formData, YEAR: parseInt(e.target.value)})}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Academic Year *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    pattern=\"\\d{4}-\\d{4}\"\n                    value={formData.ACADEMICYEAR}\n                    onChange={(e) => setFormData({...formData, ACADEMICYEAR: e.target.value})}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500\"\n                    placeholder=\"2024-2025\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end space-x-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={closeModal}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                >\n                  {editingSubject ? 'Update' : 'Create'} Subject\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* Student Assignment Modal */}\n      {showStudentModal && selectedSubject && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-10 mx-auto p-5 border w-11/12 md:w-4/5 lg:w-3/4 shadow-lg rounded-md bg-white\">\n            <div className=\"flex justify-between items-center mb-4\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                Assign Students to {selectedSubject.SUBJECTCODE} - {selectedSubject.SUBJECTNAME}\n              </h3>\n              <button\n                onClick={closeStudentModal}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <span className=\"sr-only\">Close</span>\n                <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            {loadingStudents ? (\n              <div className=\"flex justify-center items-center h-32\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n              </div>\n            ) : (\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Available Students */}\n                <div>\n                  <h4 className=\"text-md font-medium text-gray-900 mb-3\">\n                    Available Students ({availableStudents.length})\n                  </h4>\n                  <div className=\"border border-gray-200 rounded-lg max-h-96 overflow-y-auto\">\n                    {availableStudents.length === 0 ? (\n                      <div className=\"p-4 text-center text-gray-500\">\n                        No available students to assign\n                      </div>\n                    ) : (\n                      <div className=\"divide-y divide-gray-200\">\n                        {availableStudents.map((student) => (\n                          <div key={student.USERID} className=\"p-3 hover:bg-gray-50\">\n                            <div className=\"flex items-center justify-between\">\n                              <div className=\"flex-1\">\n                                <div className=\"flex items-center\">\n                                  <input\n                                    type=\"checkbox\"\n                                    checked={selectedStudents.includes(student.USERID)}\n                                    onChange={(e) => {\n                                      if (e.target.checked) {\n                                        setSelectedStudents([...selectedStudents, student.USERID]);\n                                      } else {\n                                        setSelectedStudents(selectedStudents.filter(id => id !== student.USERID));\n                                      }\n                                    }}\n                                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mr-3\"\n                                  />\n                                  <div>\n                                    <p className=\"text-sm font-medium text-gray-900\">\n                                      {student.FIRSTNAME} {student.LASTNAME}\n                                    </p>\n                                    <p className=\"text-xs text-gray-500\">\n                                      {student.STUDENTID}  {student.YEARLEVEL}  {student.DEPARTMENT}\n                                    </p>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Enrolled Students */}\n                <div>\n                  <h4 className=\"text-md font-medium text-gray-900 mb-3\">\n                    Enrolled Students ({enrolledStudents.length})\n                  </h4>\n                  <div className=\"border border-gray-200 rounded-lg max-h-96 overflow-y-auto\">\n                    {enrolledStudents.length === 0 ? (\n                      <div className=\"p-4 text-center text-gray-500\">\n                        No students enrolled yet\n                      </div>\n                    ) : (\n                      <div className=\"divide-y divide-gray-200\">\n                        {enrolledStudents.map((student) => (\n                          <div key={student.USERID} className=\"p-3 hover:bg-gray-50\">\n                            <div className=\"flex items-center justify-between\">\n                              <div className=\"flex-1\">\n                                <div>\n                                  <p className=\"text-sm font-medium text-gray-900\">\n                                    {student.FIRSTNAME} {student.LASTNAME}\n                                  </p>\n                                  <p className=\"text-xs text-gray-500\">\n                                    {student.STUDENTID}  {student.YEARLEVEL}  {student.DEPARTMENT}\n                                  </p>\n                                  <p className=\"text-xs text-gray-400\">\n                                    Enrolled: {new Date(student.ENROLLMENTDATE).toLocaleDateString()}\n                                  </p>\n                                </div>\n                              </div>\n                              <button\n                                onClick={() => handleRemoveStudent(student.USERID)}\n                                className=\"ml-2 p-1 text-red-400 hover:text-red-600 transition-colors\"\n                                title=\"Remove Student\"\n                              >\n                                <TrashIcon className=\"h-4 w-4\" />\n                              </button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200\">\n              <button\n                type=\"button\"\n                onClick={closeStudentModal}\n                className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              >\n                Close\n              </button>\n              {selectedStudents.length > 0 && (\n                <button\n                  onClick={handleEnrollStudents}\n                  className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\n                >\n                  Enroll {selectedStudents.length} Student{selectedStudents.length !== 1 ? 's' : ''}\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Delete Confirmation Modal */}\n      {showDeleteModal && deleteData && (\n        <div className=\"fixed inset-0 overflow-y-auto z-50\">\n          {/* Backdrop with blur and fade animation */}\n          <div className={`fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ease-in-out ${\n            modalAnimation === 'visible' ? 'opacity-100' : 'opacity-0'\n          }`}>\n            <div className=\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\">\n              {/* Modal container with scale and fade animation */}\n              <div className={`relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all duration-300 ease-out sm:my-8 sm:w-full sm:max-w-lg ${\n                modalAnimation === 'visible' \n                  ? 'scale-100 opacity-100 translate-y-0' \n                  : 'scale-95 opacity-0 translate-y-4'\n              }`}>\n                {/* Gradient header */}\n                <div className=\"bg-gradient-to-r from-red-50 to-red-100 px-6 py-8\">\n                  <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 shadow-lg mb-4 animate-pulse\">\n                    <ExclamationTriangleIcon className=\"h-8 w-8 text-red-600\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                    {deleteData.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 leading-relaxed\">\n                    {deleteData.message}\n                  </p>\n                </div>\n                \n                {/* Action buttons */}\n                <div className=\"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 space-y-3 space-y-reverse sm:space-y-0\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setModalAnimation('hidden');\n                      setTimeout(() => {\n                        setShowDeleteModal(false);\n                        setDeleteData(null);\n                      }, 300);\n                    }}\n                    className=\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 ease-in-out transform hover:scale-105\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={confirmDelete}\n                    className=\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-xl text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg\"\n                  >\n                    <TrashIcon className=\"h-4 w-4 mr-2\" />\n                    {deleteData.confirmText}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Subjects;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}