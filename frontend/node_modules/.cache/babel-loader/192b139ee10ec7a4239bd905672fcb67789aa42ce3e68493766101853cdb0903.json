{"ast":null,"code":"import _objectSpread from\"C:/Users/Harley/Desktop/Capstone/attendanceiot/IOTCapstone/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{BuildingOfficeIcon,BookOpenIcon,CalendarDaysIcon,MagnifyingGlassIcon,EyeIcon,XMarkIcon,ClockIcon,UserGroupIcon,MapPinIcon,AcademicCapIcon,ChevronDownIcon,ChevronUpIcon,UsersIcon,DocumentArrowUpIcon,CloudArrowUpIcon,DocumentIcon,CheckCircleIcon,ArrowDownTrayIcon,TrashIcon,ExclamationTriangleIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import axios from'axios';// Set up axios defaults\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";axios.defaults.baseURL='http://localhost:5000';function UnifiedManagement(){var _parsedData$statistic,_parsedData$statistic2,_parsedData$statistic3,_data$filters,_data$filters$academi,_data$filters2,_data$filters2$semest,_parsedData$subjects,_parsedData$students,_parsedData$instructo,_parsedData$rooms,_parsedData$schedules,_parsedData$subjects2,_parsedData$subjects3,_parsedData$students2,_parsedData$students3,_parsedData$instructo2,_parsedData$instructo3,_parsedData$rooms2,_parsedData$rooms3,_parsedData$schedules2,_parsedData$schedules3,_data$rooms3,_data$rooms3$data;const[data,setData]=useState(null);const[loading,setLoading]=useState(true);const[sortBy,setSortBy]=useState('rooms');// 'rooms', 'subjects', 'schedules'\nconst[selectedAcademicYear,setSelectedAcademicYear]=useState('');const[selectedSemester,setSelectedSemester]=useState('');const[searchTerm,setSearchTerm]=useState('');const[showModal,setShowModal]=useState(false);const[modalData,setModalData]=useState(null);const[modalType,setModalType]=useState('');// 'room', 'subject', 'schedule'\nconst[expandedCards,setExpandedCards]=useState(new Set());const[studentSearchTerm,setStudentSearchTerm]=useState('');// Bulk operations states\nconst[selectedItems,setSelectedItems]=useState(new Set());const[selectAll,setSelectAll]=useState(false);const[showBulkDeleteModal,setShowBulkDeleteModal]=useState(false);const[bulkDeleteType,setBulkDeleteType]=useState('');const[isBulkDeleting,setIsBulkDeleting]=useState(false);// PDF Import states\nconst[showImportSection,setShowImportSection]=useState(false);const[pdfFile,setPdfFile]=useState(null);const[dragActive,setDragActive]=useState(false);const[isUploading,setIsUploading]=useState(false);const[isImporting,setIsImporting]=useState(false);const[parsedData,setParsedData]=useState(null);const[importResults,setImportResults]=useState(null);const[showPreview,setShowPreview]=useState(false);const[showDataModal,setShowDataModal]=useState(false);const[activeTab,setActiveTab]=useState('subjects');const[importOptions,setImportOptions]=useState({updateExisting:false,createMissingRooms:true,skipDuplicates:true});const fileInputRef=useRef(null);// Delete functionality states\nconst[showDeleteModal,setShowDeleteModal]=useState(false);const[deleteItem,setDeleteItem]=useState(null);const[isDeleting,setIsDeleting]=useState(false);const[modalAnimation,setModalAnimation]=useState('hidden');// TEMPORARY: Schedule editing states\nconst[showEditModal,setShowEditModal]=useState(false);const[editingSchedule,setEditingSchedule]=useState(null);const[editFormData,setEditFormData]=useState({subject_id:'',room_id:'',day_of_week:'',start_time:'',end_time:'',academic_year:'',semester:''});useEffect(()=>{fetchData();},[selectedAcademicYear,selectedSemester]);const fetchData=async()=>{try{setLoading(true);const token=localStorage.getItem('token');if(!token){toast.error('Please login to access data');return;}const headers={Authorization:\"Bearer \".concat(token)};const params={};if(selectedAcademicYear)params.academic_year=selectedAcademicYear;if(selectedSemester)params.semester=selectedSemester;const response=await axios.get('/api/unified/data',{headers,params});setData(response.data);// Set default academic year if not selected\nif(!selectedAcademicYear&&response.data.filters.academic_years.length>0){setSelectedAcademicYear(response.data.filters.academic_years[0]);}}catch(error){var _error$response;console.error('Error fetching data:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){toast.error('Session expired. Please login again.');localStorage.removeItem('token');window.location.href='/login';}else{toast.error('Failed to load data');}}finally{setLoading(false);}};const fetchDetailedData=async(id,type)=>{try{const token=localStorage.getItem('token');const headers={Authorization:\"Bearer \".concat(token)};let endpoint;switch(type){case'room':endpoint=\"/api/unified/room/\".concat(id);break;case'subject':endpoint=\"/api/unified/subject/\".concat(id);break;case'schedule':endpoint=\"/api/unified/schedule/\".concat(id);break;default:throw new Error('Invalid type');}const params={};if(selectedAcademicYear)params.academic_year=selectedAcademicYear;if(selectedSemester)params.semester=selectedSemester;const response=await axios.get(endpoint,{headers,params});setModalData(response.data);setModalType(type);setShowModal(true);}catch(error){console.error('Error fetching detailed data:',error);toast.error('Failed to load detailed information');}};const toggleCardExpansion=id=>{setExpandedCards(prev=>{const newSet=new Set();if(!prev.has(id)){newSet.add(id);}return newSet;});};// Delete functionality\nconst handleDelete=(item,type)=>{let title,message,confirmText;switch(type){case'room':title='Delete Room';message=\"Are you sure you want to delete \\\"\".concat(item.ROOMNUMBER,\" - \").concat(item.ROOMNAME,\"\\\"? This action cannot be undone.\");confirmText='Delete Room';break;case'subject':title='Delete Subject';message=\"Are you sure you want to delete \\\"\".concat(item.SUBJECTCODE,\" - \").concat(item.SUBJECTNAME,\"\\\"? This will also remove all related schedules and enrollments. This action cannot be undone.\");confirmText='Delete Subject';break;case'schedule':title='Delete Schedule';message=\"Are you sure you want to delete this schedule? This action cannot be undone.\";confirmText='Delete Schedule';break;default:title='Delete Item';message='Are you sure you want to delete this item? This action cannot be undone.';confirmText='Delete';}setDeleteItem(_objectSpread(_objectSpread({},item),{},{type,title,message,confirmText}));setShowDeleteModal(true);setTimeout(()=>setModalAnimation('visible'),10);};const confirmDelete=async()=>{if(!deleteItem)return;setIsDeleting(true);try{const token=localStorage.getItem('token');const headers={Authorization:\"Bearer \".concat(token)};let endpoint;let successMessage;switch(deleteItem.type){case'room':endpoint=\"/api/rooms/\".concat(deleteItem.ROOMID);successMessage='Room deleted successfully!';break;case'subject':endpoint=\"/api/subjects/\".concat(deleteItem.SUBJECTID);successMessage='Subject deleted successfully!';break;case'schedule':endpoint=\"/api/schedules/\".concat(deleteItem.SCHEDULEID);successMessage='Schedule deleted successfully!';break;default:throw new Error('Invalid delete type');}const response=await axios.delete(endpoint,{headers});// Show enhanced success message\nconst message=response.data.message||successMessage;toast.success(message,{duration:4000,style:{background:'#f0fdf4',border:'1px solid #bbf7d0',color:'#166534'}});// Refresh data\nawait fetchData();}catch(error){var _error$response2,_error$response2$data,_error$response3,_error$response3$data;console.error('Error deleting item:',error);const errorMessage=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to delete item';const errorDetails=(_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.details;// Show detailed error message\nif(errorDetails){toast.error(\"\".concat(errorMessage,\": \").concat(errorDetails),{duration:8000,style:{background:'#fef2f2',border:'1px solid #fecaca',color:'#dc2626'}});}else{toast.error(errorMessage);}}finally{setIsDeleting(false);setModalAnimation('hidden');setTimeout(()=>{setShowDeleteModal(false);setDeleteItem(null);},300);}};// Bulk Delete Functions\nconst handleSelectItem=itemId=>{const newSelectedItems=new Set(selectedItems);if(newSelectedItems.has(itemId)){newSelectedItems.delete(itemId);}else{newSelectedItems.add(itemId);}setSelectedItems(newSelectedItems);// Update select all state\nconst currentItems=getCurrentItems();setSelectAll(newSelectedItems.size===currentItems.length&&Array.isArray(currentItems)&&currentItems.length>0);};const handleSelectAll=()=>{const currentItems=getCurrentItems();if(!Array.isArray(currentItems)||currentItems.length===0){return;}if(selectAll){setSelectedItems(new Set());}else{try{const itemIds=currentItems.map(item=>getItemId(item));setSelectedItems(new Set(itemIds));}catch(error){console.error('Error mapping items:',error);return;}}setSelectAll(!selectAll);};const getCurrentItems=()=>{var _data$rooms,_data$subjects,_data$schedules;if(!data)return[];switch(sortBy){case'rooms':return Array.isArray((_data$rooms=data.rooms)===null||_data$rooms===void 0?void 0:_data$rooms.data)?data.rooms.data:[];case'subjects':return Array.isArray((_data$subjects=data.subjects)===null||_data$subjects===void 0?void 0:_data$subjects.data)?data.subjects.data:[];case'schedules':return Array.isArray((_data$schedules=data.schedules)===null||_data$schedules===void 0?void 0:_data$schedules.data)?data.schedules.data:[];default:return[];}};const getItemId=item=>{var _item$schedules$;switch(sortBy){case'rooms':return item.ROOMID;case'subjects':return item.SUBJECTID;case'schedules':// Create unique key for schedule groups\nreturn\"schedule-\".concat(item.subject_code,\"-\").concat(((_item$schedules$=item.schedules[0])===null||_item$schedules$===void 0?void 0:_item$schedules$.SCHEDULEID)||'default');default:return item.id;}};const handleBulkDelete=()=>{if(selectedItems.size===0)return;setBulkDeleteType(sortBy);setShowBulkDeleteModal(true);setTimeout(()=>setModalAnimation('visible'),10);};const confirmBulkDelete=async()=>{if(selectedItems.size===0)return;setIsBulkDeleting(true);try{const token=localStorage.getItem('token');const headers={Authorization:\"Bearer \".concat(token)};let endpoint;let successMessage;switch(bulkDeleteType){case'rooms':endpoint='/api/rooms/bulk-delete';successMessage=\"\".concat(selectedItems.size,\" rooms deleted successfully!\");break;case'subjects':endpoint='/api/subjects/bulk-delete';successMessage=\"\".concat(selectedItems.size,\" subjects deleted successfully!\");break;case'schedules':endpoint='/api/schedules/bulk-delete';successMessage=\"\".concat(selectedItems.size,\" schedules deleted successfully!\");break;default:throw new Error('Invalid bulk delete type');}const response=await axios.delete(endpoint,{headers,data:{ids:Array.from(selectedItems)}});const message=response.data.message||successMessage;toast.success(message,{duration:4000,style:{background:'#f0fdf4',border:'1px solid #bbf7d0',color:'#166534'}});// Clear selections and refresh data\nsetSelectedItems(new Set());setSelectAll(false);await fetchData();}catch(error){var _error$response4,_error$response4$data,_error$response5,_error$response5$data;console.error('Error bulk deleting items:',error);const errorMessage=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to delete items';const errorDetails=(_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.details;if(errorDetails){toast.error(\"\".concat(errorMessage,\": \").concat(errorDetails),{duration:8000,style:{background:'#fef2f2',border:'1px solid #fecaca',color:'#dc2626'}});}else{toast.error(errorMessage);}}finally{setIsBulkDeleting(false);setModalAnimation('hidden');setTimeout(()=>{setShowBulkDeleteModal(false);setBulkDeleteType('');},300);}};// PDF Import Functions\nconst handleDrag=e=>{e.preventDefault();e.stopPropagation();if(e.type==='dragenter'||e.type==='dragover'){setDragActive(true);}else if(e.type==='dragleave'){setDragActive(false);}};const handleDrop=e=>{e.preventDefault();e.stopPropagation();setDragActive(false);if(e.dataTransfer.files&&e.dataTransfer.files[0]){const droppedFile=e.dataTransfer.files[0];if(droppedFile.type==='application/pdf'){setPdfFile(droppedFile);}else{toast.error('Please upload a PDF file');}}};const handleFileSelect=e=>{if(e.target.files&&e.target.files[0]){setPdfFile(e.target.files[0]);}};const handleUploadAndPreview=async()=>{if(!pdfFile){toast.error('Please select a PDF file');return;}setIsUploading(true);setParsedData(null);setImportResults(null);try{const formData=new FormData();formData.append('pdf',pdfFile);const response=await axios.post('/api/import/preview',formData,{headers:{'Content-Type':'multipart/form-data',Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setParsedData(response.data.data);setShowPreview(true);toast.success('PDF parsed successfully! Review the data before importing.');}catch(error){var _error$response6,_error$response6$data;console.error('Upload error:',error);if((_error$response6=error.response)!==null&&_error$response6!==void 0&&(_error$response6$data=_error$response6.data)!==null&&_error$response6$data!==void 0&&_error$response6$data.message){toast.error(error.response.data.message);}else{toast.error('Failed to parse PDF');}}finally{setIsUploading(false);}};const handleImport=async()=>{if(!parsedData){toast.error('No data to import');return;}setIsImporting(true);try{const response=await axios.post('/api/import/execute',{parsedData,options:importOptions},{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setImportResults(response.data.results);toast.success('Data imported successfully! Refreshing data...');// Refresh the main data after import\nawait fetchData();// Reset import form\nresetImportForm();}catch(error){var _error$response7,_error$response7$data;console.error('Import error:',error);if((_error$response7=error.response)!==null&&_error$response7!==void 0&&(_error$response7$data=_error$response7.data)!==null&&_error$response7$data!==void 0&&_error$response7$data.message){toast.error(error.response.data.message);}else{toast.error('Failed to import data');}}finally{setIsImporting(false);}};const resetImportForm=()=>{setPdfFile(null);setParsedData(null);setImportResults(null);setShowPreview(false);if(fileInputRef.current){fileInputRef.current.value='';}};// Delete functionality\nconst handleDeleteClick=(item,type)=>{setDeleteItem(_objectSpread(_objectSpread({},item),{},{type}));setShowDeleteModal(true);};const handleDeleteConfirm=async()=>{if(!deleteItem)return;setIsDeleting(true);try{let endpoint='';let idField='';switch(deleteItem.type){case'room':endpoint='/api/rooms';idField='roomId';break;case'subject':endpoint='/api/subjects';idField='subjectId';break;case'schedule':endpoint='/api/schedules';idField='scheduleId';break;default:throw new Error('Invalid delete type');}await axios.delete(\"\".concat(endpoint,\"/\").concat(deleteItem[idField]),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});toast.success(\"\".concat(deleteItem.type.charAt(0).toUpperCase()+deleteItem.type.slice(1),\" deleted successfully!\"));// Refresh data\nawait fetchData();// Close modal\nsetShowDeleteModal(false);setDeleteItem(null);}catch(error){var _error$response8,_error$response8$data;console.error('Delete error:',error);if((_error$response8=error.response)!==null&&_error$response8!==void 0&&(_error$response8$data=_error$response8.data)!==null&&_error$response8$data!==void 0&&_error$response8$data.message){toast.error(error.response.data.message);}else{toast.error(\"Failed to delete \".concat(deleteItem.type));}}finally{setIsDeleting(false);}};const handleDeleteCancel=()=>{setShowDeleteModal(false);setDeleteItem(null);};// TEMPORARY: Schedule editing functions\nconst handleEditSchedule=schedule=>{setEditingSchedule(schedule);setEditFormData({subject_id:schedule.SUBJECTID||'',room_id:schedule.ROOMID||'',day_of_week:schedule.DAYOFWEEK||'',start_time:schedule.STARTTIME?schedule.STARTTIME.substring(0,5):'',end_time:schedule.ENDTIME?schedule.ENDTIME.substring(0,5):'',academic_year:schedule.ACADEMICYEAR||'',semester:schedule.SEMESTER||''});setShowEditModal(true);};const handleEditSubmit=async e=>{e.preventDefault();if(!editingSchedule)return;try{const token=localStorage.getItem('token');const headers={Authorization:\"Bearer \".concat(token)};const updateData={subject_id:editFormData.subject_id,room_id:editFormData.room_id,day_of_week:editFormData.day_of_week,start_time:editFormData.start_time,end_time:editFormData.end_time,academic_year:editFormData.academic_year,semester:editFormData.semester};await axios.put(\"/api/schedules/\".concat(editingSchedule.SCHEDULEID),updateData,{headers});toast.success('Schedule updated successfully!');// Refresh data\nawait fetchData();// Close modal\nsetShowEditModal(false);setEditingSchedule(null);setEditFormData({subject_id:'',room_id:'',day_of_week:'',start_time:'',end_time:'',academic_year:'',semester:''});}catch(error){var _error$response9,_error$response9$data;console.error('Error updating schedule:',error);if((_error$response9=error.response)!==null&&_error$response9!==void 0&&(_error$response9$data=_error$response9.data)!==null&&_error$response9$data!==void 0&&_error$response9$data.message){toast.error(error.response.data.message);}else{toast.error('Failed to update schedule');}}};const formatTime=time=>{if(!time)return'';const[hours,minutes]=time.split(':');const hour=parseInt(hours);const ampm=hour>=12?'PM':'AM';const displayHour=hour%12||12;return\"\".concat(displayHour,\":\").concat(minutes,\" \").concat(ampm);};// Collapsible container with measured height for smooth open/close\nconst Collapsible=_ref=>{let{isOpen,children}=_ref;const containerRef=useRef(null);const[height,setHeight]=useState('0px');useEffect(()=>{const el=containerRef.current;if(!el)return;if(isOpen){// From current height to content height\nsetHeight(\"\".concat(el.scrollHeight,\"px\"));const onEnd=()=>{el.removeEventListener('transitionend',onEnd);setHeight('auto');};el.addEventListener('transitionend',onEnd);}else{// If currently auto, snap to pixel height first\nconst current=el.scrollHeight;setHeight(\"\".concat(current,\"px\"));// Next frame collapse to zero\nrequestAnimationFrame(()=>setHeight('0px'));}},[isOpen]);useEffect(()=>{const el=containerRef.current;if(!el)return;el.style.overflow='hidden';},[]);return/*#__PURE__*/_jsx(\"div\",{ref:containerRef,style:{height,transition:'height 150ms ease, opacity 150ms ease',opacity:isOpen?1:0,willChange:'height'},children:/*#__PURE__*/_jsx(\"div\",{className:\"pt-2\",children:children})});};// Helper function to group schedules by subject\nconst groupSchedulesBySubject=schedulesList=>{const groups={};schedulesList.forEach(schedule=>{// Group by subject code only (which includes section like BSIT-4102-BSIT4-1)\nconst key=schedule.SUBJECTCODE;if(!groups[key]){groups[key]={subject_code:schedule.SUBJECTCODE,subject_name:schedule.SUBJECTNAME,instructor_name:schedule.instructor_name,academic_year:schedule.ACADEMICYEAR,semester:schedule.SEMESTER,schedules:[]};}groups[key].schedules.push(schedule);});return Object.values(groups);};const filterStudents=(students,searchTerm)=>{if(!Array.isArray(students)||!searchTerm)return students;const searchLower=searchTerm.toLowerCase();return students.filter(student=>{var _student$FIRSTNAME,_student$LASTNAME,_student$STUDENTID,_student$DEPARTMENT,_student$YEARLEVEL;return((_student$FIRSTNAME=student.FIRSTNAME)===null||_student$FIRSTNAME===void 0?void 0:_student$FIRSTNAME.toLowerCase().includes(searchLower))||((_student$LASTNAME=student.LASTNAME)===null||_student$LASTNAME===void 0?void 0:_student$LASTNAME.toLowerCase().includes(searchLower))||((_student$STUDENTID=student.STUDENTID)===null||_student$STUDENTID===void 0?void 0:_student$STUDENTID.toLowerCase().includes(searchLower))||((_student$DEPARTMENT=student.DEPARTMENT)===null||_student$DEPARTMENT===void 0?void 0:_student$DEPARTMENT.toLowerCase().includes(searchLower))||((_student$YEARLEVEL=student.YEARLEVEL)===null||_student$YEARLEVEL===void 0?void 0:_student$YEARLEVEL.toString().includes(searchLower));});};const filterData=(items,searchTerm)=>{if(!Array.isArray(items))return[];if(!searchTerm)return items;return items.filter(item=>{var _item$ROOMNUMBER,_item$ROOMNAME,_item$BUILDING,_item$SUBJECTCODE,_item$SUBJECTNAME,_item$instructor_name,_item$subject_code,_item$subject_name,_item$instructor_name2,_item$schedules;const searchLower=searchTerm.toLowerCase();switch(sortBy){case'rooms':return((_item$ROOMNUMBER=item.ROOMNUMBER)===null||_item$ROOMNUMBER===void 0?void 0:_item$ROOMNUMBER.toLowerCase().includes(searchLower))||((_item$ROOMNAME=item.ROOMNAME)===null||_item$ROOMNAME===void 0?void 0:_item$ROOMNAME.toLowerCase().includes(searchLower))||((_item$BUILDING=item.BUILDING)===null||_item$BUILDING===void 0?void 0:_item$BUILDING.toLowerCase().includes(searchLower));case'subjects':return((_item$SUBJECTCODE=item.SUBJECTCODE)===null||_item$SUBJECTCODE===void 0?void 0:_item$SUBJECTCODE.toLowerCase().includes(searchLower))||((_item$SUBJECTNAME=item.SUBJECTNAME)===null||_item$SUBJECTNAME===void 0?void 0:_item$SUBJECTNAME.toLowerCase().includes(searchLower))||((_item$instructor_name=item.instructor_name)===null||_item$instructor_name===void 0?void 0:_item$instructor_name.toLowerCase().includes(searchLower));case'schedules':return((_item$subject_code=item.subject_code)===null||_item$subject_code===void 0?void 0:_item$subject_code.toLowerCase().includes(searchLower))||((_item$subject_name=item.subject_name)===null||_item$subject_name===void 0?void 0:_item$subject_name.toLowerCase().includes(searchLower))||((_item$instructor_name2=item.instructor_name)===null||_item$instructor_name2===void 0?void 0:_item$instructor_name2.toLowerCase().includes(searchLower))||((_item$schedules=item.schedules)===null||_item$schedules===void 0?void 0:_item$schedules.some(schedule=>{var _schedule$ROOMNUMBER,_schedule$DAYOFWEEK;return((_schedule$ROOMNUMBER=schedule.ROOMNUMBER)===null||_schedule$ROOMNUMBER===void 0?void 0:_schedule$ROOMNUMBER.toLowerCase().includes(searchLower))||((_schedule$DAYOFWEEK=schedule.DAYOFWEEK)===null||_schedule$DAYOFWEEK===void 0?void 0:_schedule$DAYOFWEEK.toLowerCase().includes(searchLower));}));default:return true;}});};const getCurrentData=()=>{if(!data)return[];switch(sortBy){case'rooms':return data.rooms.data||[];case'subjects':return data.subjects.data||[];case'schedules':// Group schedules by subject for unified display\nconst schedules=data.schedules.data||[];return groupSchedulesBySubject(schedules);default:return[];}};const filteredData=filterData(getCurrentData(),searchTerm);// Distribute items into fixed columns so expanding one card only affects its column\nconst distributeIntoColumns=(items,numCols)=>{const cols=Array.from({length:numCols},()=>[]);items.forEach((item,index)=>{cols[index%numCols].push(item);});return cols;};const renderItem=item=>{switch(sortBy){case'rooms':return renderRoomCard(item);case'subjects':return renderSubjectCard(item);case'schedules':return renderScheduleCard(item);default:return null;}};const getSortIcon=type=>{switch(type){case'rooms':return BuildingOfficeIcon;case'subjects':return BookOpenIcon;case'schedules':return CalendarDaysIcon;default:return BuildingOfficeIcon;}};const renderRoomCard=room=>{var _data$rooms2,_data$rooms2$schedule;const isExpanded=expandedCards.has(room.ROOMID);const schedules=(data===null||data===void 0?void 0:(_data$rooms2=data.rooms)===null||_data$rooms2===void 0?void 0:(_data$rooms2$schedule=_data$rooms2.schedules)===null||_data$rooms2$schedule===void 0?void 0:_data$rooms2$schedule[room.ROOMID])||[];return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow border-2 border-gray-300 p-6 hover:shadow-md hover:border-gray-400 transition min-h-[180px] overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedItems.has(room.ROOMID),onChange:()=>handleSelectItem(room.ROOMID),className:\"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl\",children:\"\\uD83C\\uDFEB\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:room.ROOMNUMBER}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:room.ROOMNAME}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:room.BUILDING})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleCardExpansion(room.ROOMID),className:\"text-gray-400 hover:text-blue-600 p-1 rounded\",title:isExpanded?\"Collapse\":\"Expand\",children:isExpanded?/*#__PURE__*/_jsx(ChevronUpIcon,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchDetailedData(room.ROOMID,'room'),className:\"text-gray-400 hover:text-green-600 p-1 rounded\",title:\"View Details\",children:/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(room,'room'),className:\"text-gray-400 hover:text-red-600 p-1 rounded\",title:\"Delete Room\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600\",children:[/*#__PURE__*/_jsx(MapPinIcon,{className:\"h-4 w-4 mr-2\"}),room.CAPACITY?\"Capacity: \".concat(room.CAPACITY):'No capacity set']}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(room.STATUS==='Available'?'bg-green-100 text-green-800':'bg-gray-100 text-gray-800'),children:room.STATUS})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[room.schedule_count||0,\" schedules\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[room.subject_count||0,\" subjects\"]})]}),isExpanded&&schedules.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Current Schedules\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-40 overflow-y-auto\",children:schedules.map(schedule=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs bg-gray-50 rounded p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium\",children:[schedule.SUBJECTCODE,\" - \",schedule.SUBJECTNAME]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-600\",children:[schedule.DAYOFWEEK,\" \\u2022 \",formatTime(schedule.STARTTIME),\" - \",formatTime(schedule.ENDTIME)]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500\",children:schedule.instructor_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-blue-600\",children:[schedule.enrolled_students||0,\" students enrolled\"]})]},schedule.SCHEDULEID))})]})]})]},room.ROOMID);};const renderSubjectCard=subject=>{var _data$subjects2,_data$subjects2$sched;const isExpanded=expandedCards.has(subject.SUBJECTID);const schedules=(data===null||data===void 0?void 0:(_data$subjects2=data.subjects)===null||_data$subjects2===void 0?void 0:(_data$subjects2$sched=_data$subjects2.schedules)===null||_data$subjects2$sched===void 0?void 0:_data$subjects2$sched[subject.SUBJECTID])||[];return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow border-2 border-gray-300 p-6 hover:shadow-md hover:border-gray-400 transition min-h-[180px] overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedItems.has(subject.SUBJECTID),onChange:()=>handleSelectItem(subject.SUBJECTID),className:\"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl\",children:\"\\uD83D\\uDCDA\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:subject.SUBJECTCODE}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:subject.SUBJECTNAME}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:subject.instructor_name||'No instructor assigned'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleCardExpansion(subject.SUBJECTID),className:\"text-gray-400 hover:text-blue-600 p-1 rounded\",title:isExpanded?\"Collapse\":\"Expand\",children:isExpanded?/*#__PURE__*/_jsx(ChevronUpIcon,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchDetailedData(subject.SUBJECTID,'subject'),className:\"text-gray-400 hover:text-green-600 p-1 rounded\",title:\"View Details\",children:/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(subject,'subject'),className:\"text-gray-400 hover:text-red-600 p-1 rounded\",title:\"Delete Subject\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[subject.SEMESTER,\" \\u2022 \",subject.ACADEMICYEAR]}),subject.DESCRIPTION&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 line-clamp-2\",children:subject.DESCRIPTION})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"h-4 w-4 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[subject.enrolled_students||0,\" students\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[subject.schedule_count||0,\" schedules\"]}),/*#__PURE__*/_jsxs(\"span\",{children:[subject.room_count||0,\" rooms\"]})]})]}),isExpanded&&schedules.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-900 mb-2\",children:\"Schedule Details\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-40 overflow-y-auto\",children:schedules.map(schedule=>/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs bg-gray-50 rounded p-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:schedule.DAYOFWEEK}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-600\",children:[formatTime(schedule.STARTTIME),\" - \",formatTime(schedule.ENDTIME)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[schedule.ROOMNUMBER,\" - \",schedule.ROOMNAME,\" (\",schedule.BUILDING,\")\"]})]},schedule.SCHEDULEID))})]})]})]},subject.SUBJECTID);};const renderScheduleCard=scheduleGroup=>{var _scheduleGroup$schedu;// Create a unique key for this specific schedule group\nconst uniqueKey=\"schedule-\".concat(scheduleGroup.subject_code,\"-\").concat(((_scheduleGroup$schedu=scheduleGroup.schedules[0])===null||_scheduleGroup$schedu===void 0?void 0:_scheduleGroup$schedu.SCHEDULEID)||'default');const isExpanded=expandedCards.has(uniqueKey);const totalEnrolledStudents=scheduleGroup.schedules.reduce((sum,s)=>sum+(s.enrolled_students||0),0);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow border-2 border-gray-300 p-6 hover:shadow-md hover:border-gray-400 transition min-h-[180px] overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedItems.has(uniqueKey),onChange:()=>handleSelectItem(uniqueKey),className:\"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl\",children:\"\\uD83D\\uDCC5\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:scheduleGroup.subject_code}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:scheduleGroup.subject_name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:scheduleGroup.instructor_name})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchDetailedData(scheduleGroup.schedules[0].SCHEDULEID,'schedule'),className:\"text-gray-400 hover:text-green-600 p-1 rounded\",title:\"View Details\",children:/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(scheduleGroup.schedules[0],'schedule'),className:\"text-gray-400 hover:text-red-600 p-1 rounded\",title:\"Delete Schedule\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 mr-2 text-blue-500\"}),/*#__PURE__*/_jsxs(\"span\",{children:[scheduleGroup.schedules.length,\" schedule\",scheduleGroup.schedules.length!==1?'s':'']})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleCardExpansion(uniqueKey),className:\"inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ease-in-out transform hover:scale-105 \".concat(isExpanded?'bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300':'bg-blue-50 text-blue-700 hover:bg-blue-100 border border-blue-200 shadow-sm'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:isExpanded?'Hide Schedules':'Show Schedules'}),/*#__PURE__*/_jsx(\"div\",{className:\"transition-transform duration-300 \".concat(isExpanded?'rotate-180':'rotate-0'),children:/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"h-4 w-4\"})})]})]}),/*#__PURE__*/_jsx(Collapsible,{isOpen:isExpanded,children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 pt-2\",children:scheduleGroup.schedules.map((schedule,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-3 border border-gray-200 transition-all duration-150 ease-in-out\",style:{transitionDelay:isExpanded?\"\".concat(index*40,\"ms\"):'0ms'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 mr-2 text-blue-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[schedule.DAYOFWEEK,\" \\u2022 \",formatTime(schedule.STARTTIME),\" - \",formatTime(schedule.ENDTIME)]}),schedule.ISLAB===1||schedule.ISLAB==='1'||schedule.ISLAB===true?/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-flex items-center rounded-full bg-purple-100 text-purple-800 px-2 py-0.5 text-xs font-medium\",children:\"LAB\"}):/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-flex items-center rounded-full bg-blue-100 text-blue-800 px-2 py-0.5 text-xs font-medium\",children:\"LEC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditSchedule(schedule),className:\"text-gray-400 hover:text-yellow-600 p-1 rounded transition-colors duration-150\",title:\"Edit Schedule\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"h-3 w-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"})})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(schedule,'schedule'),className:\"text-gray-400 hover:text-red-600 p-1 rounded transition-colors duration-150\",title:\"Delete Schedule\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-3 w-3\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600 mt-2\",children:[/*#__PURE__*/_jsx(MapPinIcon,{className:\"h-4 w-4 mr-2\"}),/*#__PURE__*/_jsxs(\"span\",{children:[schedule.ROOMNUMBER,\" - \",schedule.ROOMNAME,\" (\",schedule.BUILDING,\")\"]})]})]},schedule.SCHEDULEID))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between text-sm text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(UsersIcon,{className:\"h-4 w-4 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{children:[totalEnrolledStudents,\" students enrolled\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[scheduleGroup.semester,\" \\u2022 \",scheduleGroup.academic_year]})]}),isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 pt-4 border-t border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 text-xs text-gray-600\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Academic Year:\"}),\" \",scheduleGroup.academic_year]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Semester:\"}),\" \",scheduleGroup.semester]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Total Schedules:\"}),\" \",scheduleGroup.schedules.length]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Instructor:\"}),\" \",scheduleGroup.instructor_name]})]})})]})]},scheduleGroup.subject_code);};const renderModalContent=()=>{var _modalData$subjects,_modalData$subjects2,_modalData$schedules,_modalData$schedules2,_modalData$rooms,_modalData$rooms2,_modalData$students,_modalData$students2,_filterStudents,_filterStudents2,_modalData$schedules3,_modalData$students3,_modalData$students4;if(!modalData||!modalType)return null;switch(modalType){case'room':return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:[modalData.room.ROOMNUMBER,\" - \",modalData.room.ROOMNAME]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:modalData.room.BUILDING}),modalData.room.CAPACITY&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Capacity: \",modalData.room.CAPACITY,\" people\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Subjects (\",((_modalData$subjects=modalData.subjects)===null||_modalData$subjects===void 0?void 0:_modalData$subjects.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-64 overflow-y-auto\",children:(_modalData$subjects2=modalData.subjects)===null||_modalData$subjects2===void 0?void 0:_modalData$subjects2.map(subject=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:subject.SUBJECTCODE}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:subject.SUBJECTNAME}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:subject.instructor_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600 mt-1\",children:[subject.enrolled_students||0,\" students \\u2022 \",subject.schedule_count||0,\" schedules\"]})]},subject.SUBJECTID))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Schedules (\",((_modalData$schedules=modalData.schedules)===null||_modalData$schedules===void 0?void 0:_modalData$schedules.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-64 overflow-y-auto\",children:(_modalData$schedules2=modalData.schedules)===null||_modalData$schedules2===void 0?void 0:_modalData$schedules2.map(schedule=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:schedule.SUBJECTCODE}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[schedule.DAYOFWEEK,\" \\u2022 \",formatTime(schedule.STARTTIME),\" - \",formatTime(schedule.ENDTIME)]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:schedule.instructor_name})]},schedule.SCHEDULEID))})]})]})]});case'subject':return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:[modalData.subject.SUBJECTCODE,\" - \",modalData.subject.SUBJECTNAME]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:modalData.subject.instructor_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[modalData.subject.SEMESTER,\" \\u2022 \",modalData.subject.ACADEMICYEAR]}),modalData.subject.DESCRIPTION&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:modalData.subject.DESCRIPTION})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Rooms (\",((_modalData$rooms=modalData.rooms)===null||_modalData$rooms===void 0?void 0:_modalData$rooms.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3 max-h-64 overflow-y-auto\",children:(_modalData$rooms2=modalData.rooms)===null||_modalData$rooms2===void 0?void 0:_modalData$rooms2.map(room=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:room.ROOMNUMBER}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:room.ROOMNAME}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:room.BUILDING}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600 mt-1\",children:[room.schedule_count||0,\" schedules\"]})]},room.ROOMID))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:[\"Students (\",((_modalData$students=modalData.students)===null||_modalData$students===void 0?void 0:_modalData$students.length)||0,\")\"]}),((_modalData$students2=modalData.students)===null||_modalData$students2===void 0?void 0:_modalData$students2.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-64\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search students...\",value:studentSearchTerm,onChange:e=>setStudentSearchTerm(e.target.value),className:\"w-full pl-10 pr-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 max-h-64 overflow-y-auto\",children:[(_filterStudents=filterStudents(modalData.students,studentSearchTerm))===null||_filterStudents===void 0?void 0:_filterStudents.map(student=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-gray-900\",children:[student.FIRSTNAME,\" \",student.LASTNAME]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:student.STUDENTID}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"Year \",student.YEARLEVEL,\" \\u2022 \",student.DEPARTMENT]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:student.EMAIL})]},student.USERID)),((_filterStudents2=filterStudents(modalData.students,studentSearchTerm))===null||_filterStudents2===void 0?void 0:_filterStudents2.length)===0&&studentSearchTerm&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-4 text-gray-500\",children:[\"No students found matching \\\"\",studentSearchTerm,\"\\\"\"]})]})]})]}),((_modalData$schedules3=modalData.schedules)===null||_modalData$schedules3===void 0?void 0:_modalData$schedules3.length)>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Schedule Details (\",modalData.schedules.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",children:modalData.schedules.map(schedule=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:schedule.DAYOFWEEK}),schedule.ISLAB===1||schedule.ISLAB==='1'||schedule.ISLAB===true?/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center rounded-full bg-purple-100 text-purple-800 px-2 py-0.5 text-xs font-medium\",children:\"LAB\"}):/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center rounded-full bg-blue-100 text-blue-800 px-2 py-0.5 text-xs font-medium\",children:\"LEC\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[formatTime(schedule.STARTTIME),\" - \",formatTime(schedule.ENDTIME)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[schedule.ROOMNUMBER,\" - \",schedule.ROOMNAME]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:schedule.BUILDING})]},schedule.SCHEDULEID))})]})]});case'schedule':return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-900\",children:[modalData.schedule.SUBJECTCODE,\" - \",modalData.schedule.SUBJECTNAME]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:modalData.schedule.instructor_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-600 mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:modalData.schedule.DAYOFWEEK}),/*#__PURE__*/_jsxs(\"span\",{children:[formatTime(modalData.schedule.STARTTIME),\" - \",formatTime(modalData.schedule.ENDTIME)]}),/*#__PURE__*/_jsxs(\"span\",{children:[modalData.schedule.ROOMNUMBER,\" - \",modalData.schedule.ROOMNAME]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[modalData.schedule.SEMESTER,\" \\u2022 \",modalData.schedule.ACADEMICYEAR]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:\"Room Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:modalData.schedule.ROOMNUMBER}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:modalData.schedule.ROOMNAME}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:modalData.schedule.BUILDING}),modalData.schedule.CAPACITY&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Capacity: \",modalData.schedule.CAPACITY,\" people\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Enrolled Students (\",((_modalData$students3=modalData.students)===null||_modalData$students3===void 0?void 0:_modalData$students3.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2 max-h-64 overflow-y-auto\",children:(_modalData$students4=modalData.students)===null||_modalData$students4===void 0?void 0:_modalData$students4.map(student=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium text-gray-900\",children:[student.FIRSTNAME,\" \",student.LASTNAME]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:student.STUDENTID}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"Year \",student.YEARLEVEL,\" \\u2022 \",student.DEPARTMENT]})]},student.USERID))})]})]}),modalData.schedule.subject_description&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:\"Subject Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 bg-gray-50 rounded p-4\",children:modalData.schedule.subject_description})]})]});default:return null;}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Academic Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Unified view of rooms, subjects, and schedules\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DocumentArrowUpIcon,{className:\"h-6 w-6 text-blue-600 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-900\",children:\"PDF Import\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-blue-700\",children:\"Import class lists from PDF documents\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowImportSection(!showImportSection),className:\"inline-flex items-center px-4 py-2 border border-blue-300 rounded-md shadow-sm text-sm font-medium text-blue-700 bg-white hover:bg-blue-50 transition-colors\",children:showImportSection?'Hide Import':'Show Import'})]}),showImportSection&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border-2 border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold text-gray-900 mb-4\",children:\"Upload Class List PDF\"}),!pdfFile&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative border-2 border-dashed rounded-lg p-6 text-center transition-colors \".concat(dragActive?'border-blue-400 bg-blue-50':'border-gray-300 hover:border-gray-400'),onDragEnter:handleDrag,onDragLeave:handleDrag,onDragOver:handleDrag,onDrop:handleDrop,children:[/*#__PURE__*/_jsx(CloudArrowUpIcon,{className:\"mx-auto h-10 w-10 text-gray-400\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"pdf-upload\",className:\"cursor-pointer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-blue-600 hover:text-blue-500\",children:\"Click to upload\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\" or drag and drop\"}),/*#__PURE__*/_jsx(\"input\",{id:\"pdf-upload\",ref:fileInputRef,type:\"file\",accept:\".pdf\",onChange:handleFileSelect,className:\"sr-only\"})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"PDF files only, up to 10MB\"})]}),pdfFile&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg border-2 border-gray-200 p-4 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(DocumentIcon,{className:\"h-6 w-6 text-red-600 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:pdfFile.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[(pdfFile.size/1024/1024).toFixed(2),\" MB\"]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:resetImportForm,className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-5 w-5\"})})]})}),pdfFile&&!parsedData&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleUploadAndPreview,disabled:isUploading,className:\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50\",children:isUploading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Parsing PDF...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4 mr-2\"}),\"Parse & Preview\"]})})})]}),parsedData&&!importResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl border-2 border-gray-200 p-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold text-gray-900 mb-4\",children:\"Import Options\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:importOptions.updateExisting,onChange:e=>setImportOptions(_objectSpread(_objectSpread({},importOptions),{},{updateExisting:e.target.checked})),className:\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm text-gray-700\",children:\"Update existing records (subjects, students, instructors, rooms)\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:importOptions.createMissingRooms,onChange:e=>setImportOptions(_objectSpread(_objectSpread({},importOptions),{},{createMissingRooms:e.target.checked})),className:\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm text-gray-700\",children:\"Create missing rooms automatically\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:importOptions.skipDuplicates,onChange:e=>setImportOptions(_objectSpread(_objectSpread({},importOptions),{},{skipDuplicates:e.target.checked})),className:\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm text-gray-700\",children:\"Skip duplicate enrollments and schedules\"})]})]})]}),parsedData&&!importResults&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl border-2 border-gray-200 p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold text-gray-900\",children:\"PDF Parsed Successfully\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Found \",((_parsedData$statistic=parsedData.statistics)===null||_parsedData$statistic===void 0?void 0:_parsedData$statistic.total_subjects)||0,\" subjects, \",((_parsedData$statistic2=parsedData.statistics)===null||_parsedData$statistic2===void 0?void 0:_parsedData$statistic2.total_students)||0,\" students, and \",((_parsedData$statistic3=parsedData.statistics)===null||_parsedData$statistic3===void 0?void 0:_parsedData$statistic3.total_instructors)||0,\" instructors\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setActiveTab('subjects');setShowDataModal(true);},className:\"inline-flex items-center px-4 py-2 border border-blue-300 rounded-md text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100\",children:[/*#__PURE__*/_jsx(EyeIcon,{className:\"h-4 w-4 mr-2\"}),\"View Uploaded Data\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleImport,disabled:isImporting,className:\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:opacity-50\",children:isImporting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Importing...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ArrowDownTrayIcon,{className:\"h-4 w-4 mr-2\"}),\"Import Data\"]})})]})]})}),importResults&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 border-2 border-green-200 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-4\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-6 w-6 text-green-600 mr-2\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-semibold text-green-900\",children:\"Import Completed Successfully\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-4\",children:Object.entries(importResults).map(_ref2=>{var _result$errors;let[key,result]=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded p-3 text-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 capitalize\",children:key}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-green-600\",children:[\"Created: \",result.created]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-blue-600\",children:[\"Updated: \",result.updated]}),((_result$errors=result.errors)===null||_result$errors===void 0?void 0:_result$errors.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-red-600\",children:[\"Errors: \",result.errors.length]})]},key);})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setImportResults(null);setShowImportSection(false);},className:\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\",children:\"Close\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-xl shadow border-2 border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Sort by\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:[{key:'rooms',label:'Rooms',icon:BuildingOfficeIcon},{key:'subjects',label:'Subjects',icon:BookOpenIcon},{key:'schedules',label:'Schedules',icon:CalendarDaysIcon}].map(_ref3=>{let{key,label,icon:Icon}=_ref3;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setSortBy(key);setSearchTerm('');setExpandedCards(new Set());},className:\"shrink-0 flex items-center px-3 py-2 text-sm font-medium rounded-md border transition-colors \".concat(sortBy===key?'bg-blue-600 text-white border-blue-600':'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(Icon,{className:\"h-4 w-4 mr-2\"}),label]},key);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Academic Year\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedAcademicYear,onChange:e=>setSelectedAcademicYear(e.target.value),className:\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Academic Years\"}),data===null||data===void 0?void 0:(_data$filters=data.filters)===null||_data$filters===void 0?void 0:(_data$filters$academi=_data$filters.academic_years)===null||_data$filters$academi===void 0?void 0:_data$filters$academi.map(year=>/*#__PURE__*/_jsx(\"option\",{value:year,children:year},year))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Semester\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedSemester,onChange:e=>setSelectedSemester(e.target.value),className:\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Semesters\"}),data===null||data===void 0?void 0:(_data$filters2=data.filters)===null||_data$filters2===void 0?void 0:(_data$filters2$semest=_data$filters2.semesters)===null||_data$filters2$semest===void 0?void 0:_data$filters2$semest.map(semester=>/*#__PURE__*/_jsx(\"option\",{value:semester,children:semester},semester))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Search\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search \".concat(sortBy,\"...\"),value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-3 py-2 border-2 border-gray-300 rounded-md text-sm\"})]})]})]}),selectedItems.size>0&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-blue-600\",children:selectedItems.size})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-blue-900\",children:[selectedItems.size,\" \",sortBy,\" selected\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSelectedItems(new Set());setSelectAll(false);},className:\"text-sm text-blue-600 hover:text-blue-800 underline\",children:\"Clear selection\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:handleBulkDelete,disabled:selectedItems.size===0,className:\"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4 mr-2\"}),\"Delete Selected\"]})})]})}),(data===null||data===void 0?void 0:data.statistics)&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white rounded-lg border-2 border-gray-200 p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-blue-600\",children:data.statistics.total_rooms}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total Rooms\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white rounded-lg border-2 border-gray-200 p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-green-600\",children:data.statistics.total_subjects}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total Subjects\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white rounded-lg border-2 border-gray-200 p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-purple-600\",children:data.statistics.total_schedules}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total Schedules\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white rounded-lg border-2 border-gray-200 p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-orange-600\",children:data.statistics.total_enrolled_students}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Total Enrollments\"})]})]})]}),filteredData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center justify-between gap-2 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectAll,onChange:handleSelectAll,className:\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium text-gray-700\",children:[\"Select All (\",filteredData.length,\" \",sortBy,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500\",children:[selectedItems.size,\" selected\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-start content-start\",children:(()=>{const cols=distributeIntoColumns(Array.isArray(filteredData)?filteredData:[],3);return cols.map((colItems,colIdx)=>/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:colItems.map((item,idx)=>/*#__PURE__*/_jsx(React.Fragment,{children:renderItem(item)},\"item-\".concat(colIdx,\"-\").concat(idx)))},\"col-\".concat(colIdx)));})()}),filteredData.length===0&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/React.createElement(getSortIcon(sortBy),{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsxs(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:[\"No \",sortBy,\" found\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:searchTerm||selectedAcademicYear||selectedSemester?'Try adjusting your search filters.':\"No \".concat(sortBy,\" available for the current filters.\")})]}),showModal&&modalData&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative top-10 mx-auto p-6 border max-w-6xl shadow-lg rounded-md bg-white my-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold text-gray-900\",children:[modalType.charAt(0).toUpperCase()+modalType.slice(1),\" Details\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowModal(false);setModalData(null);setModalType('');setStudentSearchTerm('');},className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-[70vh] overflow-y-auto\",children:renderModalContent()}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowModal(false);setModalData(null);setModalType('');setStudentSearchTerm('');},className:\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\",children:\"Close\"})})]})}),showDataModal&&parsedData&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"PDF Data Preview\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDataModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),(parsedData===null||parsedData===void 0?void 0:parsedData.statistics)&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6\",children:[{label:'Subjects',value:parsedData.statistics.total_subjects,color:'bg-blue-100 text-blue-800'},{label:'Students',value:parsedData.statistics.total_students,color:'bg-green-100 text-green-800'},{label:'Instructors',value:parsedData.statistics.total_instructors,color:'bg-purple-100 text-purple-800'},{label:'Rooms',value:parsedData.statistics.total_rooms,color:'bg-orange-100 text-orange-800'},{label:'Schedules',value:parsedData.statistics.total_schedules,color:'bg-indigo-100 text-indigo-800'},{label:'Enrollments',value:parsedData.statistics.total_enrollments,color:'bg-pink-100 text-pink-800'}].map((stat,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold \".concat(stat.color),children:stat.value}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 mt-1\",children:stat.label})]},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"border-b border-gray-200 mb-6\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"-mb-px flex space-x-8\",children:[{key:'subjects',label:'Subjects',count:((_parsedData$subjects=parsedData.subjects)===null||_parsedData$subjects===void 0?void 0:_parsedData$subjects.length)||0},{key:'students',label:'Students',count:((_parsedData$students=parsedData.students)===null||_parsedData$students===void 0?void 0:_parsedData$students.length)||0},{key:'instructors',label:'Instructors',count:((_parsedData$instructo=parsedData.instructors)===null||_parsedData$instructo===void 0?void 0:_parsedData$instructo.length)||0},{key:'rooms',label:'Rooms',count:((_parsedData$rooms=parsedData.rooms)===null||_parsedData$rooms===void 0?void 0:_parsedData$rooms.length)||0},{key:'schedules',label:'Schedules',count:((_parsedData$schedules=parsedData.schedules)===null||_parsedData$schedules===void 0?void 0:_parsedData$schedules.length)||0}].map(tab=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab(tab.key),className:\"py-2 px-1 border-b-2 font-medium text-sm transition-colors \".concat(activeTab===tab.key?'border-blue-500 text-blue-600':'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'),children:[tab.label,\" (\",tab.count,\")\"]},tab.key))})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-h-96 overflow-y-auto\",children:[activeTab==='subjects'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Subjects (\",((_parsedData$subjects2=parsedData.subjects)===null||_parsedData$subjects2===void 0?void 0:_parsedData$subjects2.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",children:(_parsedData$subjects3=parsedData.subjects)===null||_parsedData$subjects3===void 0?void 0:_parsedData$subjects3.map((subject,index)=>{var _subject$instructors;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:subject.code}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:subject.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:[subject.section,\" \\u2022 \",subject.semester,\" \\u2022 \",subject.academic_year]}),((_subject$instructors=subject.instructors)===null||_subject$instructors===void 0?void 0:_subject$instructors.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-blue-600 mt-1\",children:subject.instructors.map(inst=>inst.name).join(', ')})]},index);})})]}),activeTab==='students'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Students (\",((_parsedData$students2=parsedData.students)===null||_parsedData$students2===void 0?void 0:_parsedData$students2.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",children:(_parsedData$students3=parsedData.students)===null||_parsedData$students3===void 0?void 0:_parsedData$students3.map((student,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:student.full_name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:student.student_id}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[student.course,\" \\u2022 Year \",student.year_level,\" \\u2022 \",student.gender]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:student.email})]},index))})]}),activeTab==='instructors'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Instructors (\",((_parsedData$instructo2=parsedData.instructors)===null||_parsedData$instructo2===void 0?void 0:_parsedData$instructo2.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",children:(_parsedData$instructo3=parsedData.instructors)===null||_parsedData$instructo3===void 0?void 0:_parsedData$instructo3.map((instructor,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:instructor.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:instructor.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[instructor.department,\" \\u2022 \",instructor.position]})]},index))})]}),activeTab==='rooms'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Rooms (\",((_parsedData$rooms2=parsedData.rooms)===null||_parsedData$rooms2===void 0?void 0:_parsedData$rooms2.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\",children:(_parsedData$rooms3=parsedData.rooms)===null||_parsedData$rooms3===void 0?void 0:_parsedData$rooms3.map((room,index)=>{const roomNumber=room.number||room.room_number||room.ROOMNUMBER||room.code||room.id||'';const roomName=room.name||room.ROOMNAME||'';const building=room.building||room.BUILDING||'';const capacity=room.capacity||room.CAPACITY||'';const schedules=Array.isArray(parsedData.schedules)?parsedData.schedules:[];const scheduleCount=schedules.filter(s=>{const sRoom=s.room_number||s.ROOMNUMBER||s.room||'';return String(sRoom).trim()===String(roomNumber).trim();}).length;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:roomNumber||'Unknown Room'}),roomName&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:roomName}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[building||'N/A',capacity?\" \\u2022 Capacity: \".concat(capacity):'']}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-blue-600\",children:[scheduleCount,\" \",scheduleCount===1?'schedule':'schedules']})]},index);})})]}),activeTab==='schedules'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-gray-900 mb-3\",children:[\"Schedules (\",((_parsedData$schedules2=parsedData.schedules)===null||_parsedData$schedules2===void 0?void 0:_parsedData$schedules2.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:(_parsedData$schedules3=parsedData.schedules)===null||_parsedData$schedules3===void 0?void 0:_parsedData$schedules3.map((schedule,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:schedule.subject_code}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[schedule.day,\" \\u2022 \",schedule.start_time,\" - \",schedule.end_time]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[schedule.room_number,\" \\u2022 \",schedule.instructor_name]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[schedule.semester,\" \\u2022 \",schedule.academic_year]})]})},index))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDataModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\",children:\"Close\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowDataModal(false);handleImport();},disabled:isImporting,className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:opacity-50\",children:isImporting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block\"}),\"Importing...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ArrowDownTrayIcon,{className:\"h-4 w-4 mr-2 inline-block\"}),\"Import All Data\"]})})]})]})})}),showDeleteModal&&deleteItem&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 overflow-y-auto z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ease-in-out \".concat(modalAnimation==='visible'?'opacity-100':'opacity-0'),children:/*#__PURE__*/_jsx(\"div\",{className:\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all duration-300 ease-out sm:my-8 sm:w-full sm:max-w-lg \".concat(modalAnimation==='visible'?'scale-100 opacity-100 translate-y-0':'scale-95 opacity-0 translate-y-4'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-red-50 to-red-100 px-6 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 shadow-lg mb-4 animate-pulse\",children:/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-8 w-8 text-red-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:deleteItem.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 leading-relaxed\",children:deleteItem.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 space-y-3 space-y-reverse sm:space-y-0\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setModalAnimation('hidden');setTimeout(()=>{setShowDeleteModal(false);setDeleteItem(null);},300);},disabled:isDeleting,className:\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:confirmDelete,disabled:isDeleting,className:\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-xl text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\",children:isDeleting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Deleting...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4 mr-2\"}),deleteItem.confirmText]})})]})]})})})}),showBulkDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 overflow-y-auto z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ease-in-out \".concat(modalAnimation==='visible'?'opacity-100':'opacity-0'),children:/*#__PURE__*/_jsx(\"div\",{className:\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all duration-300 ease-out sm:my-8 sm:w-full sm:max-w-lg \".concat(modalAnimation==='visible'?'scale-100 opacity-100 translate-y-0':'scale-95 opacity-0 translate-y-4'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-red-50 to-red-100 px-6 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 shadow-lg mb-4 animate-pulse\",children:/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-8 w-8 text-red-600\"})}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:[\"Bulk Delete \",bulkDeleteType]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 leading-relaxed\",children:[\"Are you sure you want to delete \",/*#__PURE__*/_jsxs(\"strong\",{children:[selectedItems.size,\" \",bulkDeleteType]}),\"? This action cannot be undone and will also remove all related data (schedules, enrollments, etc.).\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 space-y-3 space-y-reverse sm:space-y-0\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setModalAnimation('hidden');setTimeout(()=>{setShowBulkDeleteModal(false);setBulkDeleteType('');},300);},disabled:isBulkDeleting,className:\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:confirmBulkDelete,disabled:isBulkDeleting,className:\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-xl text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\",children:isBulkDeleting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"}),\"Deleting...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4 mr-2\"}),\"Delete \",selectedItems.size,\" \",bulkDeleteType]})})]})]})})})}),showEditModal&&editingSchedule&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900\",children:\"Edit Schedule (TEMPORARY)\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setShowEditModal(false);setEditingSchedule(null);setEditFormData({subject_id:'',room_id:'',day_of_week:'',start_time:'',end_time:'',academic_year:'',semester:''});},className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-5 w-5 text-yellow-400\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-yellow-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" This is a temporary edit feature for quick schedule modifications.\"]})})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEditSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingSchedule.SUBJECTCODE,className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50\",disabled:true}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Subject cannot be changed\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Room\"}),/*#__PURE__*/_jsxs(\"select\",{value:editFormData.room_id,onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{room_id:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Room\"}),data===null||data===void 0?void 0:(_data$rooms3=data.rooms)===null||_data$rooms3===void 0?void 0:(_data$rooms3$data=_data$rooms3.data)===null||_data$rooms3$data===void 0?void 0:_data$rooms3$data.map(room=>/*#__PURE__*/_jsxs(\"option\",{value:room.ROOMID,children:[room.ROOMNUMBER,\" - \",room.ROOMNAME]},room.ROOMID))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Day of Week\"}),/*#__PURE__*/_jsxs(\"select\",{value:editFormData.day_of_week,onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{day_of_week:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Day\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Monday\",children:\"Monday\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Tuesday\",children:\"Tuesday\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Wednesday\",children:\"Wednesday\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Thursday\",children:\"Thursday\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Friday\",children:\"Friday\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Saturday\",children:\"Saturday\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Sunday\",children:\"Sunday\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editFormData.start_time,onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{start_time:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"End Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:editFormData.end_time,onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{end_time:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Academic Year\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editFormData.academic_year,onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{academic_year:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",placeholder:\"2024-2025\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Semester\"}),/*#__PURE__*/_jsxs(\"select\",{value:editFormData.semester,onChange:e=>setEditFormData(_objectSpread(_objectSpread({},editFormData),{},{semester:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Semester\"}),/*#__PURE__*/_jsx(\"option\",{value:\"First Semester\",children:\"First Semester\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Second Semester\",children:\"Second Semester\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Summer\",children:\"Summer\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowEditModal(false);setEditingSchedule(null);setEditFormData({subject_id:'',room_id:'',day_of_week:'',start_time:'',end_time:'',academic_year:'',semester:''});},className:\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-yellow-600 hover:bg-yellow-700\",children:\"Update Schedule\"})]})]})]})})})]});}export default UnifiedManagement;","map":{"version":3,"names":["React","useState","useEffect","useRef","BuildingOfficeIcon","BookOpenIcon","CalendarDaysIcon","MagnifyingGlassIcon","EyeIcon","XMarkIcon","ClockIcon","UserGroupIcon","MapPinIcon","AcademicCapIcon","ChevronDownIcon","ChevronUpIcon","UsersIcon","DocumentArrowUpIcon","CloudArrowUpIcon","DocumentIcon","CheckCircleIcon","ArrowDownTrayIcon","TrashIcon","ExclamationTriangleIcon","toast","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","defaults","baseURL","UnifiedManagement","_parsedData$statistic","_parsedData$statistic2","_parsedData$statistic3","_data$filters","_data$filters$academi","_data$filters2","_data$filters2$semest","_parsedData$subjects","_parsedData$students","_parsedData$instructo","_parsedData$rooms","_parsedData$schedules","_parsedData$subjects2","_parsedData$subjects3","_parsedData$students2","_parsedData$students3","_parsedData$instructo2","_parsedData$instructo3","_parsedData$rooms2","_parsedData$rooms3","_parsedData$schedules2","_parsedData$schedules3","_data$rooms3","_data$rooms3$data","data","setData","loading","setLoading","sortBy","setSortBy","selectedAcademicYear","setSelectedAcademicYear","selectedSemester","setSelectedSemester","searchTerm","setSearchTerm","showModal","setShowModal","modalData","setModalData","modalType","setModalType","expandedCards","setExpandedCards","Set","studentSearchTerm","setStudentSearchTerm","selectedItems","setSelectedItems","selectAll","setSelectAll","showBulkDeleteModal","setShowBulkDeleteModal","bulkDeleteType","setBulkDeleteType","isBulkDeleting","setIsBulkDeleting","showImportSection","setShowImportSection","pdfFile","setPdfFile","dragActive","setDragActive","isUploading","setIsUploading","isImporting","setIsImporting","parsedData","setParsedData","importResults","setImportResults","showPreview","setShowPreview","showDataModal","setShowDataModal","activeTab","setActiveTab","importOptions","setImportOptions","updateExisting","createMissingRooms","skipDuplicates","fileInputRef","showDeleteModal","setShowDeleteModal","deleteItem","setDeleteItem","isDeleting","setIsDeleting","modalAnimation","setModalAnimation","showEditModal","setShowEditModal","editingSchedule","setEditingSchedule","editFormData","setEditFormData","subject_id","room_id","day_of_week","start_time","end_time","academic_year","semester","fetchData","token","localStorage","getItem","error","headers","Authorization","concat","params","response","get","filters","academic_years","length","_error$response","console","status","removeItem","window","location","href","fetchDetailedData","id","type","endpoint","Error","toggleCardExpansion","prev","newSet","has","add","handleDelete","item","title","message","confirmText","ROOMNUMBER","ROOMNAME","SUBJECTCODE","SUBJECTNAME","_objectSpread","setTimeout","confirmDelete","successMessage","ROOMID","SUBJECTID","SCHEDULEID","delete","success","duration","style","background","border","color","_error$response2","_error$response2$data","_error$response3","_error$response3$data","errorMessage","errorDetails","details","handleSelectItem","itemId","newSelectedItems","currentItems","getCurrentItems","size","Array","isArray","handleSelectAll","itemIds","map","getItemId","_data$rooms","_data$subjects","_data$schedules","rooms","subjects","schedules","_item$schedules$","subject_code","handleBulkDelete","confirmBulkDelete","ids","from","_error$response4","_error$response4$data","_error$response5","_error$response5$data","handleDrag","e","preventDefault","stopPropagation","handleDrop","dataTransfer","files","droppedFile","handleFileSelect","target","handleUploadAndPreview","formData","FormData","append","post","_error$response6","_error$response6$data","handleImport","options","results","resetImportForm","_error$response7","_error$response7$data","current","value","handleDeleteClick","handleDeleteConfirm","idField","charAt","toUpperCase","slice","_error$response8","_error$response8$data","handleDeleteCancel","handleEditSchedule","schedule","DAYOFWEEK","STARTTIME","substring","ENDTIME","ACADEMICYEAR","SEMESTER","handleEditSubmit","updateData","put","_error$response9","_error$response9$data","formatTime","time","hours","minutes","split","hour","parseInt","ampm","displayHour","Collapsible","_ref","isOpen","children","containerRef","height","setHeight","el","scrollHeight","onEnd","removeEventListener","addEventListener","requestAnimationFrame","overflow","ref","transition","opacity","willChange","className","groupSchedulesBySubject","schedulesList","groups","forEach","key","subject_name","instructor_name","push","Object","values","filterStudents","students","searchLower","toLowerCase","filter","student","_student$FIRSTNAME","_student$LASTNAME","_student$STUDENTID","_student$DEPARTMENT","_student$YEARLEVEL","FIRSTNAME","includes","LASTNAME","STUDENTID","DEPARTMENT","YEARLEVEL","toString","filterData","items","_item$ROOMNUMBER","_item$ROOMNAME","_item$BUILDING","_item$SUBJECTCODE","_item$SUBJECTNAME","_item$instructor_name","_item$subject_code","_item$subject_name","_item$instructor_name2","_item$schedules","BUILDING","some","_schedule$ROOMNUMBER","_schedule$DAYOFWEEK","getCurrentData","filteredData","distributeIntoColumns","numCols","cols","index","renderItem","renderRoomCard","renderSubjectCard","renderScheduleCard","getSortIcon","room","_data$rooms2","_data$rooms2$schedule","isExpanded","checked","onChange","onClick","CAPACITY","STATUS","schedule_count","subject_count","enrolled_students","subject","_data$subjects2","_data$subjects2$sched","DESCRIPTION","room_count","scheduleGroup","_scheduleGroup$schedu","uniqueKey","totalEnrolledStudents","reduce","sum","s","transitionDelay","ISLAB","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","renderModalContent","_modalData$subjects","_modalData$subjects2","_modalData$schedules","_modalData$schedules2","_modalData$rooms","_modalData$rooms2","_modalData$students","_modalData$students2","_filterStudents","_filterStudents2","_modalData$schedules3","_modalData$students3","_modalData$students4","placeholder","EMAIL","USERID","subject_description","onDragEnter","onDragLeave","onDragOver","onDrop","htmlFor","accept","name","toFixed","disabled","statistics","total_subjects","total_students","total_instructors","entries","_ref2","_result$errors","result","created","updated","errors","label","icon","_ref3","Icon","year","semesters","total_rooms","total_schedules","total_enrolled_students","colItems","colIdx","idx","createElement","total_enrollments","stat","count","instructors","tab","_subject$instructors","code","section","inst","join","full_name","student_id","course","year_level","gender","email","instructor","department","position","roomNumber","number","room_number","roomName","building","capacity","scheduleCount","sRoom","String","trim","day","onSubmit","required"],"sources":["C:/Users/Harley/Desktop/Capstone/attendanceiot/IOTCapstone/frontend/src/pages/UnifiedManagement.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { \n  BuildingOfficeIcon,\n  BookOpenIcon,\n  CalendarDaysIcon,\n  MagnifyingGlassIcon,\n  EyeIcon,\n  XMarkIcon,\n  ClockIcon,\n  UserGroupIcon,\n  MapPinIcon,\n  AcademicCapIcon,\n  ChevronDownIcon,\n  ChevronUpIcon,\n  UsersIcon,\n  DocumentArrowUpIcon,\n  CloudArrowUpIcon,\n  DocumentIcon,\n  CheckCircleIcon,\n  ArrowDownTrayIcon,\n  TrashIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline';\nimport toast from 'react-hot-toast';\nimport axios from 'axios';\n\n// Set up axios defaults\naxios.defaults.baseURL = 'http://localhost:5000';\n\nfunction UnifiedManagement() {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [sortBy, setSortBy] = useState('rooms'); // 'rooms', 'subjects', 'schedules'\n  const [selectedAcademicYear, setSelectedAcademicYear] = useState('');\n  const [selectedSemester, setSelectedSemester] = useState('');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const [modalData, setModalData] = useState(null);\n  const [modalType, setModalType] = useState(''); // 'room', 'subject', 'schedule'\n  const [expandedCards, setExpandedCards] = useState(new Set());\n  const [studentSearchTerm, setStudentSearchTerm] = useState('');\n  \n  // Bulk operations states\n  const [selectedItems, setSelectedItems] = useState(new Set());\n  const [selectAll, setSelectAll] = useState(false);\n  const [showBulkDeleteModal, setShowBulkDeleteModal] = useState(false);\n  const [bulkDeleteType, setBulkDeleteType] = useState('');\n  const [isBulkDeleting, setIsBulkDeleting] = useState(false);\n  \n  // PDF Import states\n  const [showImportSection, setShowImportSection] = useState(false);\n  const [pdfFile, setPdfFile] = useState(null);\n  const [dragActive, setDragActive] = useState(false);\n  const [isUploading, setIsUploading] = useState(false);\n  const [isImporting, setIsImporting] = useState(false);\n  const [parsedData, setParsedData] = useState(null);\n  const [importResults, setImportResults] = useState(null);\n  const [showPreview, setShowPreview] = useState(false);\n  const [showDataModal, setShowDataModal] = useState(false);\n  const [activeTab, setActiveTab] = useState('subjects');\n  const [importOptions, setImportOptions] = useState({\n    updateExisting: false,\n    createMissingRooms: true,\n    skipDuplicates: true\n  });\n  \n  const fileInputRef = useRef(null);\n  \n  // Delete functionality states\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deleteItem, setDeleteItem] = useState(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [modalAnimation, setModalAnimation] = useState('hidden');\n  \n  // TEMPORARY: Schedule editing states\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingSchedule, setEditingSchedule] = useState(null);\n  const [editFormData, setEditFormData] = useState({\n    subject_id: '',\n    room_id: '',\n    day_of_week: '',\n    start_time: '',\n    end_time: '',\n    academic_year: '',\n    semester: ''\n  });\n\n  useEffect(() => {\n    fetchData();\n  }, [selectedAcademicYear, selectedSemester]);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        toast.error('Please login to access data');\n        return;\n      }\n\n      const headers = { Authorization: `Bearer ${token}` };\n      const params = {};\n      \n      if (selectedAcademicYear) params.academic_year = selectedAcademicYear;\n      if (selectedSemester) params.semester = selectedSemester;\n\n      const response = await axios.get('/api/unified/data', { \n        headers,\n        params\n      });\n      \n      setData(response.data);\n      \n      // Set default academic year if not selected\n      if (!selectedAcademicYear && response.data.filters.academic_years.length > 0) {\n        setSelectedAcademicYear(response.data.filters.academic_years[0]);\n      }\n\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      if (error.response?.status === 401) {\n        toast.error('Session expired. Please login again.');\n        localStorage.removeItem('token');\n        window.location.href = '/login';\n      } else {\n        toast.error('Failed to load data');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchDetailedData = async (id, type) => {\n    try {\n      const token = localStorage.getItem('token');\n      const headers = { Authorization: `Bearer ${token}` };\n      \n      let endpoint;\n      switch (type) {\n        case 'room':\n          endpoint = `/api/unified/room/${id}`;\n          break;\n        case 'subject':\n          endpoint = `/api/unified/subject/${id}`;\n          break;\n        case 'schedule':\n          endpoint = `/api/unified/schedule/${id}`;\n          break;\n        default:\n          throw new Error('Invalid type');\n      }\n\n      const params = {};\n      if (selectedAcademicYear) params.academic_year = selectedAcademicYear;\n      if (selectedSemester) params.semester = selectedSemester;\n\n      const response = await axios.get(endpoint, { headers, params });\n      \n      setModalData(response.data);\n      setModalType(type);\n      setShowModal(true);\n    } catch (error) {\n      console.error('Error fetching detailed data:', error);\n      toast.error('Failed to load detailed information');\n    }\n  };\n\n  const toggleCardExpansion = (id) => {\n    setExpandedCards(prev => {\n      const newSet = new Set();\n      if (!prev.has(id)) {\n        newSet.add(id);\n      }\n      return newSet;\n    });\n  };\n\n  // Delete functionality\n  const handleDelete = (item, type) => {\n    let title, message, confirmText;\n    \n    switch (type) {\n      case 'room':\n        title = 'Delete Room';\n        message = `Are you sure you want to delete \"${item.ROOMNUMBER} - ${item.ROOMNAME}\"? This action cannot be undone.`;\n        confirmText = 'Delete Room';\n        break;\n      case 'subject':\n        title = 'Delete Subject';\n        message = `Are you sure you want to delete \"${item.SUBJECTCODE} - ${item.SUBJECTNAME}\"? This will also remove all related schedules and enrollments. This action cannot be undone.`;\n        confirmText = 'Delete Subject';\n        break;\n      case 'schedule':\n        title = 'Delete Schedule';\n        message = `Are you sure you want to delete this schedule? This action cannot be undone.`;\n        confirmText = 'Delete Schedule';\n        break;\n      default:\n        title = 'Delete Item';\n        message = 'Are you sure you want to delete this item? This action cannot be undone.';\n        confirmText = 'Delete';\n    }\n\n    setDeleteItem({\n      ...item,\n      type,\n      title,\n      message,\n      confirmText\n    });\n    setShowDeleteModal(true);\n    setTimeout(() => setModalAnimation('visible'), 10);\n  };\n\n  const confirmDelete = async () => {\n    if (!deleteItem) return;\n\n    setIsDeleting(true);\n    \n    try {\n      const token = localStorage.getItem('token');\n      const headers = { Authorization: `Bearer ${token}` };\n      \n      let endpoint;\n      let successMessage;\n      \n      switch (deleteItem.type) {\n        case 'room':\n          endpoint = `/api/rooms/${deleteItem.ROOMID}`;\n          successMessage = 'Room deleted successfully!';\n          break;\n        case 'subject':\n          endpoint = `/api/subjects/${deleteItem.SUBJECTID}`;\n          successMessage = 'Subject deleted successfully!';\n          break;\n        case 'schedule':\n          endpoint = `/api/schedules/${deleteItem.SCHEDULEID}`;\n          successMessage = 'Schedule deleted successfully!';\n          break;\n        default:\n          throw new Error('Invalid delete type');\n      }\n\n      const response = await axios.delete(endpoint, { headers });\n      \n      // Show enhanced success message\n      const message = response.data.message || successMessage;\n      toast.success(message, {\n        duration: 4000,\n        style: {\n          background: '#f0fdf4',\n          border: '1px solid #bbf7d0',\n          color: '#166534',\n        },\n      });\n      \n      // Refresh data\n      await fetchData();\n      \n    } catch (error) {\n      console.error('Error deleting item:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to delete item';\n      const errorDetails = error.response?.data?.details;\n      \n      // Show detailed error message\n      if (errorDetails) {\n        toast.error(`${errorMessage}: ${errorDetails}`, {\n          duration: 8000,\n          style: {\n            background: '#fef2f2',\n            border: '1px solid #fecaca',\n            color: '#dc2626',\n          },\n        });\n      } else {\n        toast.error(errorMessage);\n      }\n    } finally {\n      setIsDeleting(false);\n      setModalAnimation('hidden');\n      setTimeout(() => {\n        setShowDeleteModal(false);\n        setDeleteItem(null);\n      }, 300);\n    }\n  };\n\n  // Bulk Delete Functions\n  const handleSelectItem = (itemId) => {\n    const newSelectedItems = new Set(selectedItems);\n    if (newSelectedItems.has(itemId)) {\n      newSelectedItems.delete(itemId);\n    } else {\n      newSelectedItems.add(itemId);\n    }\n    setSelectedItems(newSelectedItems);\n    \n    // Update select all state\n    const currentItems = getCurrentItems();\n    setSelectAll(newSelectedItems.size === currentItems.length && Array.isArray(currentItems) && currentItems.length > 0);\n  };\n\n  const handleSelectAll = () => {\n    const currentItems = getCurrentItems();\n    \n    if (!Array.isArray(currentItems) || currentItems.length === 0) {\n      return;\n    }\n    \n    if (selectAll) {\n      setSelectedItems(new Set());\n    } else {\n      try {\n        const itemIds = currentItems.map(item => getItemId(item));\n        setSelectedItems(new Set(itemIds));\n      } catch (error) {\n        console.error('Error mapping items:', error);\n        return;\n      }\n    }\n    setSelectAll(!selectAll);\n  };\n\n  const getCurrentItems = () => {\n    if (!data) return [];\n    \n    switch (sortBy) {\n      case 'rooms':\n        return Array.isArray(data.rooms?.data) ? data.rooms.data : [];\n      case 'subjects':\n        return Array.isArray(data.subjects?.data) ? data.subjects.data : [];\n      case 'schedules':\n        return Array.isArray(data.schedules?.data) ? data.schedules.data : [];\n      default:\n        return [];\n    }\n  };\n\n  const getItemId = (item) => {\n    switch (sortBy) {\n      case 'rooms':\n        return item.ROOMID;\n      case 'subjects':\n        return item.SUBJECTID;\n      case 'schedules':\n        // Create unique key for schedule groups\n        return `schedule-${item.subject_code}-${item.schedules[0]?.SCHEDULEID || 'default'}`;\n      default:\n        return item.id;\n    }\n  };\n\n  const handleBulkDelete = () => {\n    if (selectedItems.size === 0) return;\n    \n    setBulkDeleteType(sortBy);\n    setShowBulkDeleteModal(true);\n    setTimeout(() => setModalAnimation('visible'), 10);\n  };\n\n  const confirmBulkDelete = async () => {\n    if (selectedItems.size === 0) return;\n\n    setIsBulkDeleting(true);\n    \n    try {\n      const token = localStorage.getItem('token');\n      const headers = { Authorization: `Bearer ${token}` };\n      \n      let endpoint;\n      let successMessage;\n      \n      switch (bulkDeleteType) {\n        case 'rooms':\n          endpoint = '/api/rooms/bulk-delete';\n          successMessage = `${selectedItems.size} rooms deleted successfully!`;\n          break;\n        case 'subjects':\n          endpoint = '/api/subjects/bulk-delete';\n          successMessage = `${selectedItems.size} subjects deleted successfully!`;\n          break;\n        case 'schedules':\n          endpoint = '/api/schedules/bulk-delete';\n          successMessage = `${selectedItems.size} schedules deleted successfully!`;\n          break;\n        default:\n          throw new Error('Invalid bulk delete type');\n      }\n\n      const response = await axios.delete(endpoint, {\n        headers,\n        data: { ids: Array.from(selectedItems) }\n      });\n      \n      const message = response.data.message || successMessage;\n      toast.success(message, {\n        duration: 4000,\n        style: {\n          background: '#f0fdf4',\n          border: '1px solid #bbf7d0',\n          color: '#166534',\n        },\n      });\n      \n      // Clear selections and refresh data\n      setSelectedItems(new Set());\n      setSelectAll(false);\n      await fetchData();\n      \n    } catch (error) {\n      console.error('Error bulk deleting items:', error);\n      const errorMessage = error.response?.data?.message || 'Failed to delete items';\n      const errorDetails = error.response?.data?.details;\n      \n      if (errorDetails) {\n        toast.error(`${errorMessage}: ${errorDetails}`, {\n          duration: 8000,\n          style: {\n            background: '#fef2f2',\n            border: '1px solid #fecaca',\n            color: '#dc2626',\n          },\n        });\n      } else {\n        toast.error(errorMessage);\n      }\n    } finally {\n      setIsBulkDeleting(false);\n      setModalAnimation('hidden');\n      setTimeout(() => {\n        setShowBulkDeleteModal(false);\n        setBulkDeleteType('');\n      }, 300);\n    }\n  };\n\n  // PDF Import Functions\n  const handleDrag = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    \n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      const droppedFile = e.dataTransfer.files[0];\n      if (droppedFile.type === 'application/pdf') {\n        setPdfFile(droppedFile);\n      } else {\n        toast.error('Please upload a PDF file');\n      }\n    }\n  };\n\n  const handleFileSelect = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      setPdfFile(e.target.files[0]);\n    }\n  };\n\n  const handleUploadAndPreview = async () => {\n    if (!pdfFile) {\n      toast.error('Please select a PDF file');\n      return;\n    }\n\n    setIsUploading(true);\n    setParsedData(null);\n    setImportResults(null);\n\n    try {\n      const formData = new FormData();\n      formData.append('pdf', pdfFile);\n\n      const response = await axios.post('/api/import/preview', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n\n      setParsedData(response.data.data);\n      setShowPreview(true);\n      toast.success('PDF parsed successfully! Review the data before importing.');\n\n    } catch (error) {\n      console.error('Upload error:', error);\n      if (error.response?.data?.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error('Failed to parse PDF');\n      }\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleImport = async () => {\n    if (!parsedData) {\n      toast.error('No data to import');\n      return;\n    }\n\n    setIsImporting(true);\n\n    try {\n      const response = await axios.post('/api/import/execute', {\n        parsedData,\n        options: importOptions\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n\n      setImportResults(response.data.results);\n      toast.success('Data imported successfully! Refreshing data...');\n      \n      // Refresh the main data after import\n      await fetchData();\n      \n      // Reset import form\n      resetImportForm();\n\n    } catch (error) {\n      console.error('Import error:', error);\n      if (error.response?.data?.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error('Failed to import data');\n      }\n    } finally {\n      setIsImporting(false);\n    }\n  };\n\n  const resetImportForm = () => {\n    setPdfFile(null);\n    setParsedData(null);\n    setImportResults(null);\n    setShowPreview(false);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // Delete functionality\n  const handleDeleteClick = (item, type) => {\n    setDeleteItem({ ...item, type });\n    setShowDeleteModal(true);\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!deleteItem) return;\n\n    setIsDeleting(true);\n    try {\n      let endpoint = '';\n      let idField = '';\n\n      switch (deleteItem.type) {\n        case 'room':\n          endpoint = '/api/rooms';\n          idField = 'roomId';\n          break;\n        case 'subject':\n          endpoint = '/api/subjects';\n          idField = 'subjectId';\n          break;\n        case 'schedule':\n          endpoint = '/api/schedules';\n          idField = 'scheduleId';\n          break;\n        default:\n          throw new Error('Invalid delete type');\n      }\n\n      await axios.delete(`${endpoint}/${deleteItem[idField]}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n\n      toast.success(`${deleteItem.type.charAt(0).toUpperCase() + deleteItem.type.slice(1)} deleted successfully!`);\n      \n      // Refresh data\n      await fetchData();\n      \n      // Close modal\n      setShowDeleteModal(false);\n      setDeleteItem(null);\n\n    } catch (error) {\n      console.error('Delete error:', error);\n      if (error.response?.data?.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error(`Failed to delete ${deleteItem.type}`);\n      }\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const handleDeleteCancel = () => {\n    setShowDeleteModal(false);\n    setDeleteItem(null);\n  };\n\n  // TEMPORARY: Schedule editing functions\n  const handleEditSchedule = (schedule) => {\n    setEditingSchedule(schedule);\n    setEditFormData({\n      subject_id: schedule.SUBJECTID || '',\n      room_id: schedule.ROOMID || '',\n      day_of_week: schedule.DAYOFWEEK || '',\n      start_time: schedule.STARTTIME ? schedule.STARTTIME.substring(0, 5) : '',\n      end_time: schedule.ENDTIME ? schedule.ENDTIME.substring(0, 5) : '',\n      academic_year: schedule.ACADEMICYEAR || '',\n      semester: schedule.SEMESTER || ''\n    });\n    setShowEditModal(true);\n  };\n\n  const handleEditSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!editingSchedule) return;\n\n    try {\n      const token = localStorage.getItem('token');\n      const headers = { Authorization: `Bearer ${token}` };\n\n      const updateData = {\n        subject_id: editFormData.subject_id,\n        room_id: editFormData.room_id,\n        day_of_week: editFormData.day_of_week,\n        start_time: editFormData.start_time,\n        end_time: editFormData.end_time,\n        academic_year: editFormData.academic_year,\n        semester: editFormData.semester\n      };\n\n      await axios.put(`/api/schedules/${editingSchedule.SCHEDULEID}`, updateData, { headers });\n      toast.success('Schedule updated successfully!');\n      \n      // Refresh data\n      await fetchData();\n      \n      // Close modal\n      setShowEditModal(false);\n      setEditingSchedule(null);\n      setEditFormData({\n        subject_id: '',\n        room_id: '',\n        day_of_week: '',\n        start_time: '',\n        end_time: '',\n        academic_year: '',\n        semester: ''\n      });\n    } catch (error) {\n      console.error('Error updating schedule:', error);\n      if (error.response?.data?.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error('Failed to update schedule');\n      }\n    }\n  };\n\n  const formatTime = (time) => {\n    if (!time) return '';\n    const [hours, minutes] = time.split(':');\n    const hour = parseInt(hours);\n    const ampm = hour >= 12 ? 'PM' : 'AM';\n    const displayHour = hour % 12 || 12;\n    return `${displayHour}:${minutes} ${ampm}`;\n  };\n\n  // Collapsible container with measured height for smooth open/close\n  const Collapsible = ({ isOpen, children }) => {\n    const containerRef = useRef(null);\n    const [height, setHeight] = useState('0px');\n\n    useEffect(() => {\n      const el = containerRef.current;\n      if (!el) return;\n\n      if (isOpen) {\n        // From current height to content height\n        setHeight(`${el.scrollHeight}px`);\n        const onEnd = () => {\n          el.removeEventListener('transitionend', onEnd);\n          setHeight('auto');\n        };\n        el.addEventListener('transitionend', onEnd);\n      } else {\n        // If currently auto, snap to pixel height first\n        const current = el.scrollHeight;\n        setHeight(`${current}px`);\n        // Next frame collapse to zero\n        requestAnimationFrame(() => setHeight('0px'));\n      }\n    }, [isOpen]);\n\n    useEffect(() => {\n      const el = containerRef.current;\n      if (!el) return;\n      el.style.overflow = 'hidden';\n    }, []);\n\n    return (\n      <div\n        ref={containerRef}\n        style={{ height, transition: 'height 150ms ease, opacity 150ms ease', opacity: isOpen ? 1 : 0, willChange: 'height' }}\n      >\n        <div className=\"pt-2\">\n          {children}\n        </div>\n      </div>\n    );\n  };\n\n  // Helper function to group schedules by subject\n  const groupSchedulesBySubject = (schedulesList) => {\n    const groups = {};\n    schedulesList.forEach(schedule => {\n      // Group by subject code only (which includes section like BSIT-4102-BSIT4-1)\n      const key = schedule.SUBJECTCODE;\n      if (!groups[key]) {\n        groups[key] = {\n          subject_code: schedule.SUBJECTCODE,\n          subject_name: schedule.SUBJECTNAME,\n          instructor_name: schedule.instructor_name,\n          academic_year: schedule.ACADEMICYEAR,\n          semester: schedule.SEMESTER,\n          schedules: []\n        };\n      }\n      groups[key].schedules.push(schedule);\n    });\n    return Object.values(groups);\n  };\n\n  const filterStudents = (students, searchTerm) => {\n    if (!Array.isArray(students) || !searchTerm) return students;\n    \n    const searchLower = searchTerm.toLowerCase();\n    return students.filter(student => \n      student.FIRSTNAME?.toLowerCase().includes(searchLower) ||\n      student.LASTNAME?.toLowerCase().includes(searchLower) ||\n      student.STUDENTID?.toLowerCase().includes(searchLower) ||\n      student.DEPARTMENT?.toLowerCase().includes(searchLower) ||\n      student.YEARLEVEL?.toString().includes(searchLower)\n    );\n  };\n\n  const filterData = (items, searchTerm) => {\n    if (!Array.isArray(items)) return [];\n    if (!searchTerm) return items;\n    \n    return items.filter(item => {\n      const searchLower = searchTerm.toLowerCase();\n      \n      switch (sortBy) {\n        case 'rooms':\n          return (\n            item.ROOMNUMBER?.toLowerCase().includes(searchLower) ||\n            item.ROOMNAME?.toLowerCase().includes(searchLower) ||\n            item.BUILDING?.toLowerCase().includes(searchLower)\n          );\n        case 'subjects':\n          return (\n            item.SUBJECTCODE?.toLowerCase().includes(searchLower) ||\n            item.SUBJECTNAME?.toLowerCase().includes(searchLower) ||\n            item.instructor_name?.toLowerCase().includes(searchLower)\n          );\n        case 'schedules':\n          return (\n            item.subject_code?.toLowerCase().includes(searchLower) ||\n            item.subject_name?.toLowerCase().includes(searchLower) ||\n            item.instructor_name?.toLowerCase().includes(searchLower) ||\n            item.schedules?.some(schedule => \n              schedule.ROOMNUMBER?.toLowerCase().includes(searchLower) ||\n              schedule.DAYOFWEEK?.toLowerCase().includes(searchLower)\n            )\n          );\n        default:\n          return true;\n      }\n    });\n  };\n\n  const getCurrentData = () => {\n    if (!data) return [];\n    \n    switch (sortBy) {\n      case 'rooms':\n        return data.rooms.data || [];\n      case 'subjects':\n        return data.subjects.data || [];\n      case 'schedules':\n        // Group schedules by subject for unified display\n        const schedules = data.schedules.data || [];\n        return groupSchedulesBySubject(schedules);\n      default:\n        return [];\n    }\n  };\n\n  const filteredData = filterData(getCurrentData(), searchTerm);\n\n  // Distribute items into fixed columns so expanding one card only affects its column\n  const distributeIntoColumns = (items, numCols) => {\n    const cols = Array.from({ length: numCols }, () => []);\n    items.forEach((item, index) => {\n      cols[index % numCols].push(item);\n    });\n    return cols;\n  };\n\n  const renderItem = (item) => {\n    switch (sortBy) {\n      case 'rooms':\n        return renderRoomCard(item);\n      case 'subjects':\n        return renderSubjectCard(item);\n      case 'schedules':\n        return renderScheduleCard(item);\n      default:\n        return null;\n    }\n  };\n\n  const getSortIcon = (type) => {\n    switch (type) {\n      case 'rooms':\n        return BuildingOfficeIcon;\n      case 'subjects':\n        return BookOpenIcon;\n      case 'schedules':\n        return CalendarDaysIcon;\n      default:\n        return BuildingOfficeIcon;\n    }\n  };\n\n  const renderRoomCard = (room) => {\n    const isExpanded = expandedCards.has(room.ROOMID);\n    const schedules = data?.rooms?.schedules?.[room.ROOMID] || [];\n\n    return (\n      <div key={room.ROOMID} className=\"bg-white rounded-xl shadow border-2 border-gray-300 p-6 hover:shadow-md hover:border-gray-400 transition min-h-[180px] overflow-hidden\">\n        <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-4\">\n          <div className=\"flex items-start space-x-3\">\n            <input\n              type=\"checkbox\"\n              checked={selectedItems.has(room.ROOMID)}\n              onChange={() => handleSelectItem(room.ROOMID)}\n              className=\"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n            />\n            <div className=\"text-2xl\"></div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">{room.ROOMNUMBER}</h3>\n              <p className=\"text-sm text-gray-600\">{room.ROOMNAME}</p>\n              <p className=\"text-xs text-gray-500\">{room.BUILDING}</p>\n            </div>\n          </div>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => toggleCardExpansion(room.ROOMID)}\n              className=\"text-gray-400 hover:text-blue-600 p-1 rounded\"\n              title={isExpanded ? \"Collapse\" : \"Expand\"}\n            >\n              {isExpanded ? <ChevronUpIcon className=\"h-4 w-4\" /> : <ChevronDownIcon className=\"h-4 w-4\" />}\n            </button>\n            <button\n              onClick={() => fetchDetailedData(room.ROOMID, 'room')}\n              className=\"text-gray-400 hover:text-green-600 p-1 rounded\"\n              title=\"View Details\"\n            >\n              <EyeIcon className=\"h-4 w-4\" />\n            </button>\n            <button\n              onClick={() => handleDelete(room, 'room')}\n              className=\"text-gray-400 hover:text-red-600 p-1 rounded\"\n              title=\"Delete Room\"\n            >\n              <TrashIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"space-y-3\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <div className=\"flex items-center text-gray-600\">\n              <MapPinIcon className=\"h-4 w-4 mr-2\" />\n              {room.CAPACITY ? `Capacity: ${room.CAPACITY}` : 'No capacity set'}\n            </div>\n            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n              room.STATUS === 'Available' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n            }`}>\n              {room.STATUS}\n            </span>\n          </div>\n\n          <div className=\"flex items-center justify-between text-sm text-gray-600\">\n            <span>{room.schedule_count || 0} schedules</span>\n            <span>{room.subject_count || 0} subjects</span>\n          </div>\n\n          {isExpanded && schedules.length > 0 && (\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\n              <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Current Schedules</h4>\n              <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n                {schedules.map((schedule) => (\n                  <div key={schedule.SCHEDULEID} className=\"text-xs bg-gray-50 rounded p-2\">\n                    <div className=\"font-medium\">{schedule.SUBJECTCODE} - {schedule.SUBJECTNAME}</div>\n                    <div className=\"text-gray-600\">\n                      {schedule.DAYOFWEEK}  {formatTime(schedule.STARTTIME)} - {formatTime(schedule.ENDTIME)}\n                    </div>\n                    <div className=\"text-gray-500\">{schedule.instructor_name}</div>\n                    <div className=\"text-blue-600\">{schedule.enrolled_students || 0} students enrolled</div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const renderSubjectCard = (subject) => {\n    const isExpanded = expandedCards.has(subject.SUBJECTID);\n    const schedules = data?.subjects?.schedules?.[subject.SUBJECTID] || [];\n\n    return (\n      <div key={subject.SUBJECTID} className=\"bg-white rounded-xl shadow border-2 border-gray-300 p-6 hover:shadow-md hover:border-gray-400 transition min-h-[180px] overflow-hidden\">\n        <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-4\">\n          <div className=\"flex items-start space-x-3\">\n            <input\n              type=\"checkbox\"\n              checked={selectedItems.has(subject.SUBJECTID)}\n              onChange={() => handleSelectItem(subject.SUBJECTID)}\n              className=\"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n            />\n            <div className=\"text-2xl\"></div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">{subject.SUBJECTCODE}</h3>\n              <p className=\"text-sm text-gray-600\">{subject.SUBJECTNAME}</p>\n              <p className=\"text-xs text-gray-500\">{subject.instructor_name || 'No instructor assigned'}</p>\n            </div>\n          </div>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => toggleCardExpansion(subject.SUBJECTID)}\n              className=\"text-gray-400 hover:text-blue-600 p-1 rounded\"\n              title={isExpanded ? \"Collapse\" : \"Expand\"}\n            >\n              {isExpanded ? <ChevronUpIcon className=\"h-4 w-4\" /> : <ChevronDownIcon className=\"h-4 w-4\" />}\n            </button>\n            <button\n              onClick={() => fetchDetailedData(subject.SUBJECTID, 'subject')}\n              className=\"text-gray-400 hover:text-green-600 p-1 rounded\"\n              title=\"View Details\"\n            >\n              <EyeIcon className=\"h-4 w-4\" />\n            </button>\n            <button\n              onClick={() => handleDelete(subject, 'subject')}\n              className=\"text-gray-400 hover:text-red-600 p-1 rounded\"\n              title=\"Delete Subject\"\n            >\n              <TrashIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"space-y-3\">\n          <div className=\"text-xs text-gray-600\">\n            <div>{subject.SEMESTER}  {subject.ACADEMICYEAR}</div>\n            {subject.DESCRIPTION && (\n              <div className=\"mt-1 line-clamp-2\">{subject.DESCRIPTION}</div>\n            )}\n          </div>\n\n          <div className=\"flex items-center justify-between text-sm text-gray-600\">\n            <div className=\"flex items-center\">\n              <UsersIcon className=\"h-4 w-4 mr-1\" />\n              <span>{subject.enrolled_students || 0} students</span>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <span>{subject.schedule_count || 0} schedules</span>\n              <span>{subject.room_count || 0} rooms</span>\n            </div>\n          </div>\n\n          {isExpanded && schedules.length > 0 && (\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\n              <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Schedule Details</h4>\n              <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n                {schedules.map((schedule) => (\n                  <div key={schedule.SCHEDULEID} className=\"text-xs bg-gray-50 rounded p-2\">\n                    <div className=\"font-medium\">{schedule.DAYOFWEEK}</div>\n                    <div className=\"text-gray-600\">\n                      {formatTime(schedule.STARTTIME)} - {formatTime(schedule.ENDTIME)}\n                    </div>\n                    <div className=\"text-gray-500\">\n                      {schedule.ROOMNUMBER} - {schedule.ROOMNAME} ({schedule.BUILDING})\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const renderScheduleCard = (scheduleGroup) => {\n    // Create a unique key for this specific schedule group\n    const uniqueKey = `schedule-${scheduleGroup.subject_code}-${scheduleGroup.schedules[0]?.SCHEDULEID || 'default'}`;\n    const isExpanded = expandedCards.has(uniqueKey);\n    const totalEnrolledStudents = scheduleGroup.schedules.reduce((sum, s) => sum + (s.enrolled_students || 0), 0);\n\n    return (\n      <div key={scheduleGroup.subject_code} className=\"bg-white rounded-xl shadow border-2 border-gray-300 p-6 hover:shadow-md hover:border-gray-400 transition min-h-[180px] overflow-hidden\">\n        <div className=\"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-4\">\n          <div className=\"flex items-start space-x-3\">\n            <input\n              type=\"checkbox\"\n              checked={selectedItems.has(uniqueKey)}\n              onChange={() => handleSelectItem(uniqueKey)}\n              className=\"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n            />\n            <div className=\"text-2xl\"></div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">{scheduleGroup.subject_code}</h3>\n              <p className=\"text-sm text-gray-600\">{scheduleGroup.subject_name}</p>\n              <p className=\"text-xs text-gray-500\">{scheduleGroup.instructor_name}</p>\n            </div>\n          </div>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => fetchDetailedData(scheduleGroup.schedules[0].SCHEDULEID, 'schedule')}\n              className=\"text-gray-400 hover:text-green-600 p-1 rounded\"\n              title=\"View Details\"\n            >\n              <EyeIcon className=\"h-4 w-4\" />\n            </button>\n            <button\n              onClick={() => handleDelete(scheduleGroup.schedules[0], 'schedule')}\n              className=\"text-gray-400 hover:text-red-600 p-1 rounded\"\n              title=\"Delete Schedule\"\n            >\n              <TrashIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"space-y-3\">\n          {/* Summary of schedules */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center text-sm text-gray-600\">\n              <ClockIcon className=\"h-4 w-4 mr-2 text-blue-500\" />\n              <span>{scheduleGroup.schedules.length} schedule{scheduleGroup.schedules.length !== 1 ? 's' : ''}</span>\n            </div>\n            <button\n              onClick={() => toggleCardExpansion(uniqueKey)}\n              className={`inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all duration-300 ease-in-out transform hover:scale-105 ${\n                isExpanded \n                  ? 'bg-gray-100 text-gray-700 hover:bg-gray-200 border border-gray-300' \n                  : 'bg-blue-50 text-blue-700 hover:bg-blue-100 border border-blue-200 shadow-sm'\n              }`}\n            >\n              <span className=\"mr-2\">\n                {isExpanded ? 'Hide Schedules' : 'Show Schedules'}\n              </span>\n              <div className={`transition-transform duration-300 ${isExpanded ? 'rotate-180' : 'rotate-0'}`}>\n                <ChevronDownIcon className=\"h-4 w-4\" />\n              </div>\n            </button>\n          </div>\n\n          {/* Collapsible detailed schedule list with measured height */}\n          <Collapsible isOpen={isExpanded}>\n            <div className=\"space-y-2 pt-2\">\n              {scheduleGroup.schedules.map((schedule, index) => (\n                <div \n                  key={schedule.SCHEDULEID} \n                  className=\"bg-gray-50 rounded-lg p-3 border border-gray-200 transition-all duration-150 ease-in-out\"\n                  style={{ transitionDelay: isExpanded ? `${index * 40}ms` : '0ms' }}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center text-sm text-gray-700\">\n                      <ClockIcon className=\"h-4 w-4 mr-2 text-blue-500\" />\n                      <span className=\"font-medium\">\n                        {schedule.DAYOFWEEK}  {formatTime(schedule.STARTTIME)} - {formatTime(schedule.ENDTIME)}\n                      </span>\n                      {((schedule.ISLAB === 1) || (schedule.ISLAB === '1') || (schedule.ISLAB === true)) ? (\n                        <span className=\"ml-2 inline-flex items-center rounded-full bg-purple-100 text-purple-800 px-2 py-0.5 text-xs font-medium\">LAB</span>\n                      ) : (\n                        <span className=\"ml-2 inline-flex items-center rounded-full bg-blue-100 text-blue-800 px-2 py-0.5 text-xs font-medium\">LEC</span>\n                      )}\n                    </div>\n                    <div className=\"flex space-x-1\">\n                      <button\n                        onClick={() => handleEditSchedule(schedule)}\n                        className=\"text-gray-400 hover:text-yellow-600 p-1 rounded transition-colors duration-150\"\n                        title=\"Edit Schedule\"\n                      >\n                        <svg className=\"h-3 w-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                        </svg>\n                      </button>\n                      <button\n                        onClick={() => handleDelete(schedule, 'schedule')}\n                        className=\"text-gray-400 hover:text-red-600 p-1 rounded transition-colors duration-150\"\n                        title=\"Delete Schedule\"\n                      >\n                        <TrashIcon className=\"h-3 w-3\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center text-sm text-gray-600 mt-2\">\n                    <MapPinIcon className=\"h-4 w-4 mr-2\" />\n                    <span>{schedule.ROOMNUMBER} - {schedule.ROOMNAME} ({schedule.BUILDING})</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </Collapsible>\n\n          <div className=\"flex items-center justify-between text-sm text-gray-600\">\n            <div className=\"flex items-center\">\n              <UsersIcon className=\"h-4 w-4 mr-1\" />\n              <span>{totalEnrolledStudents} students enrolled</span>\n            </div>\n            <div className=\"text-xs text-gray-500\">\n              {scheduleGroup.semester}  {scheduleGroup.academic_year}\n            </div>\n          </div>\n\n          {isExpanded && (\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\n              <div className=\"grid grid-cols-2 gap-4 text-xs text-gray-600\">\n                <div>\n                  <span className=\"font-medium\">Academic Year:</span> {scheduleGroup.academic_year}\n                </div>\n                <div>\n                  <span className=\"font-medium\">Semester:</span> {scheduleGroup.semester}\n                </div>\n                <div>\n                  <span className=\"font-medium\">Total Schedules:</span> {scheduleGroup.schedules.length}\n                </div>\n                <div>\n                  <span className=\"font-medium\">Instructor:</span> {scheduleGroup.instructor_name}\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const renderModalContent = () => {\n    if (!modalData || !modalType) return null;\n\n    switch (modalType) {\n      case 'room':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                {modalData.room.ROOMNUMBER} - {modalData.room.ROOMNAME}\n              </h2>\n              <p className=\"text-gray-600\">{modalData.room.BUILDING}</p>\n              {modalData.room.CAPACITY && (\n                <p className=\"text-sm text-gray-500\">Capacity: {modalData.room.CAPACITY} people</p>\n              )}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">\n                  Subjects ({modalData.subjects?.length || 0})\n                </h3>\n                <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n                  {modalData.subjects?.map((subject) => (\n                    <div key={subject.SUBJECTID} className=\"bg-gray-50 rounded p-3\">\n                      <div className=\"font-medium text-gray-900\">{subject.SUBJECTCODE}</div>\n                      <div className=\"text-sm text-gray-600\">{subject.SUBJECTNAME}</div>\n                      <div className=\"text-xs text-gray-500\">{subject.instructor_name}</div>\n                      <div className=\"text-xs text-blue-600 mt-1\">\n                        {subject.enrolled_students || 0} students  {subject.schedule_count || 0} schedules\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">\n                  Schedules ({modalData.schedules?.length || 0})\n                </h3>\n                <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n                  {modalData.schedules?.map((schedule) => (\n                    <div key={schedule.SCHEDULEID} className=\"bg-gray-50 rounded p-3\">\n                      <div className=\"font-medium text-gray-900\">{schedule.SUBJECTCODE}</div>\n                      <div className=\"text-sm text-gray-600\">\n                        {schedule.DAYOFWEEK}  {formatTime(schedule.STARTTIME)} - {formatTime(schedule.ENDTIME)}\n                      </div>\n                      <div className=\"text-xs text-gray-500\">{schedule.instructor_name}</div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'subject':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                {modalData.subject.SUBJECTCODE} - {modalData.subject.SUBJECTNAME}\n              </h2>\n              <p className=\"text-gray-600\">{modalData.subject.instructor_name}</p>\n              <p className=\"text-sm text-gray-500\">\n                {modalData.subject.SEMESTER}  {modalData.subject.ACADEMICYEAR}\n              </p>\n              {modalData.subject.DESCRIPTION && (\n                <p className=\"text-sm text-gray-600 mt-2\">{modalData.subject.DESCRIPTION}</p>\n              )}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">\n                  Rooms ({modalData.rooms?.length || 0})\n                </h3>\n                <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n                  {modalData.rooms?.map((room) => (\n                    <div key={room.ROOMID} className=\"bg-gray-50 rounded p-3\">\n                      <div className=\"font-medium text-gray-900\">{room.ROOMNUMBER}</div>\n                      <div className=\"text-sm text-gray-600\">{room.ROOMNAME}</div>\n                      <div className=\"text-xs text-gray-500\">{room.BUILDING}</div>\n                      <div className=\"text-xs text-blue-600 mt-1\">\n                        {room.schedule_count || 0} schedules\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <div className=\"flex items-center justify-between mb-3\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">\n                    Students ({modalData.students?.length || 0})\n                  </h3>\n                  {modalData.students?.length > 0 && (\n                    <div className=\"relative w-64\">\n                      <MagnifyingGlassIcon className=\"h-4 w-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n                      <input\n                        type=\"text\"\n                        placeholder=\"Search students...\"\n                        value={studentSearchTerm}\n                        onChange={(e) => setStudentSearchTerm(e.target.value)}\n                        className=\"w-full pl-10 pr-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n                  )}\n                </div>\n                <div className=\"space-y-3 max-h-64 overflow-y-auto\">\n                  {filterStudents(modalData.students, studentSearchTerm)?.map((student) => (\n                    <div key={student.USERID} className=\"bg-gray-50 rounded p-3\">\n                      <div className=\"font-medium text-gray-900\">\n                        {student.FIRSTNAME} {student.LASTNAME}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">{student.STUDENTID}</div>\n                      <div className=\"text-xs text-gray-500\">\n                        Year {student.YEARLEVEL}  {student.DEPARTMENT}\n                      </div>\n                      <div className=\"text-xs text-gray-500\">{student.EMAIL}</div>\n                    </div>\n                  ))}\n                  {filterStudents(modalData.students, studentSearchTerm)?.length === 0 && studentSearchTerm && (\n                    <div className=\"text-center py-4 text-gray-500\">\n                      No students found matching \"{studentSearchTerm}\"\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {modalData.schedules?.length > 0 && (\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">\n                  Schedule Details ({modalData.schedules.length})\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                  {modalData.schedules.map((schedule) => (\n                    <div key={schedule.SCHEDULEID} className=\"bg-gray-50 rounded p-3\">\n                      <div className=\"flex items-center justify-between mb-1\">\n                        <div className=\"font-medium text-gray-900\">{schedule.DAYOFWEEK}</div>\n                        {((schedule.ISLAB === 1) || (schedule.ISLAB === '1') || (schedule.ISLAB === true)) ? (\n                          <span className=\"inline-flex items-center rounded-full bg-purple-100 text-purple-800 px-2 py-0.5 text-xs font-medium\">LAB</span>\n                        ) : (\n                          <span className=\"inline-flex items-center rounded-full bg-blue-100 text-blue-800 px-2 py-0.5 text-xs font-medium\">LEC</span>\n                        )}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">\n                        {formatTime(schedule.STARTTIME)} - {formatTime(schedule.ENDTIME)}\n                      </div>\n                      <div className=\"text-xs text-gray-500\">\n                        {schedule.ROOMNUMBER} - {schedule.ROOMNAME}\n                      </div>\n                      <div className=\"text-xs text-gray-500\">{schedule.BUILDING}</div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        );\n\n      case 'schedule':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-900\">\n                {modalData.schedule.SUBJECTCODE} - {modalData.schedule.SUBJECTNAME}\n              </h2>\n              <p className=\"text-gray-600\">{modalData.schedule.instructor_name}</p>\n              <div className=\"flex items-center space-x-4 text-sm text-gray-600 mt-2\">\n                <span>{modalData.schedule.DAYOFWEEK}</span>\n                <span>{formatTime(modalData.schedule.STARTTIME)} - {formatTime(modalData.schedule.ENDTIME)}</span>\n                <span>{modalData.schedule.ROOMNUMBER} - {modalData.schedule.ROOMNAME}</span>\n              </div>\n              <p className=\"text-sm text-gray-500\">\n                {modalData.schedule.SEMESTER}  {modalData.schedule.ACADEMICYEAR}\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Room Details</h3>\n                <div className=\"bg-gray-50 rounded p-4\">\n                  <div className=\"font-medium text-gray-900\">{modalData.schedule.ROOMNUMBER}</div>\n                  <div className=\"text-sm text-gray-600\">{modalData.schedule.ROOMNAME}</div>\n                  <div className=\"text-xs text-gray-500\">{modalData.schedule.BUILDING}</div>\n                  {modalData.schedule.CAPACITY && (\n                    <div className=\"text-xs text-gray-500 mt-1\">\n                      Capacity: {modalData.schedule.CAPACITY} people\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">\n                  Enrolled Students ({modalData.students?.length || 0})\n                </h3>\n                <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n                  {modalData.students?.map((student) => (\n                    <div key={student.USERID} className=\"bg-gray-50 rounded p-3\">\n                      <div className=\"font-medium text-gray-900\">\n                        {student.FIRSTNAME} {student.LASTNAME}\n                      </div>\n                      <div className=\"text-sm text-gray-600\">{student.STUDENTID}</div>\n                      <div className=\"text-xs text-gray-500\">\n                        Year {student.YEARLEVEL}  {student.DEPARTMENT}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {modalData.schedule.subject_description && (\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">Subject Description</h3>\n                <p className=\"text-sm text-gray-600 bg-gray-50 rounded p-4\">\n                  {modalData.schedule.subject_description}\n                </p>\n              </div>\n            )}\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Academic Management</h1>\n        <p className=\"text-gray-600\">Unified view of rooms, subjects, and schedules</p>\n      </div>\n\n      {/* PDF Import Section */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-5\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n          <div className=\"flex items-center\">\n            <DocumentArrowUpIcon className=\"h-6 w-6 text-blue-600 mr-3\" />\n            <div>\n              <h3 className=\"text-lg font-semibold text-blue-900\">PDF Import</h3>\n              <p className=\"text-sm text-blue-700\">Import class lists from PDF documents</p>\n            </div>\n          </div>\n          <button\n            onClick={() => setShowImportSection(!showImportSection)}\n            className=\"inline-flex items-center px-4 py-2 border border-blue-300 rounded-md shadow-sm text-sm font-medium text-blue-700 bg-white hover:bg-blue-50 transition-colors\"\n          >\n            {showImportSection ? 'Hide Import' : 'Show Import'}\n          </button>\n        </div>\n\n        {showImportSection && (\n          <div className=\"mt-6 space-y-6\">\n            {/* Upload Section */}\n            <div className=\"bg-white rounded-xl border-2 border-gray-200 p-6\">\n              <h4 className=\"text-md font-semibold text-gray-900 mb-4\">Upload Class List PDF</h4>\n              \n              {!pdfFile && (\n                <div\n                  className={`relative border-2 border-dashed rounded-lg p-6 text-center transition-colors ${\n                    dragActive \n                      ? 'border-blue-400 bg-blue-50' \n                      : 'border-gray-300 hover:border-gray-400'\n                  }`}\n                  onDragEnter={handleDrag}\n                  onDragLeave={handleDrag}\n                  onDragOver={handleDrag}\n                  onDrop={handleDrop}\n                >\n                  <CloudArrowUpIcon className=\"mx-auto h-10 w-10 text-gray-400\" />\n                  <div className=\"mt-3\">\n                    <label htmlFor=\"pdf-upload\" className=\"cursor-pointer\">\n                      <span className=\"text-sm font-medium text-blue-600 hover:text-blue-500\">\n                        Click to upload\n                      </span>\n                      <span className=\"text-sm text-gray-600\"> or drag and drop</span>\n                      <input\n                        id=\"pdf-upload\"\n                        ref={fileInputRef}\n                        type=\"file\"\n                        accept=\".pdf\"\n                        onChange={handleFileSelect}\n                        className=\"sr-only\"\n                      />\n                    </label>\n                  </div>\n                  <p className=\"text-xs text-gray-500\">PDF files only, up to 10MB</p>\n                </div>\n              )}\n\n              {pdfFile && (\n                <div className=\"bg-gray-50 rounded-lg border-2 border-gray-200 p-4 mb-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center\">\n                      <DocumentIcon className=\"h-6 w-6 text-red-600 mr-3\" />\n                      <div>\n                        <div className=\"font-medium text-gray-900\">{pdfFile.name}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                        </div>\n                      </div>\n                    </div>\n                    <button\n                      onClick={resetImportForm}\n                      className=\"text-gray-400 hover:text-gray-600\"\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {pdfFile && !parsedData && (\n                <div className=\"flex justify-end\">\n                  <button\n                    onClick={handleUploadAndPreview}\n                    disabled={isUploading}\n                    className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50\"\n                  >\n                    {isUploading ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                        Parsing PDF...\n                      </>\n                    ) : (\n                      <>\n                        <EyeIcon className=\"h-4 w-4 mr-2\" />\n                        Parse & Preview\n                      </>\n                    )}\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* Import Options */}\n            {parsedData && !importResults && (\n              <div className=\"bg-white rounded-xl border-2 border-gray-200 p-6\">\n                <h4 className=\"text-md font-semibold text-gray-900 mb-4\">Import Options</h4>\n                <div className=\"space-y-3\">\n                  <label className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={importOptions.updateExisting}\n                      onChange={(e) => setImportOptions({...importOptions, updateExisting: e.target.checked})}\n                      className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                    />\n                    <span className=\"ml-2 text-sm text-gray-700\">\n                      Update existing records (subjects, students, instructors, rooms)\n                    </span>\n                  </label>\n                  <label className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={importOptions.createMissingRooms}\n                      onChange={(e) => setImportOptions({...importOptions, createMissingRooms: e.target.checked})}\n                      className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                    />\n                    <span className=\"ml-2 text-sm text-gray-700\">\n                      Create missing rooms automatically\n                    </span>\n                  </label>\n                  <label className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      checked={importOptions.skipDuplicates}\n                      onChange={(e) => setImportOptions({...importOptions, skipDuplicates: e.target.checked})}\n                      className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                    />\n                    <span className=\"ml-2 text-sm text-gray-700\">\n                      Skip duplicate enrollments and schedules\n                    </span>\n                  </label>\n                </div>\n              </div>\n            )}\n\n            {/* Preview Actions */}\n            {parsedData && !importResults && (\n              <div className=\"bg-white rounded-xl border-2 border-gray-200 p-6\">\n                <div className=\"flex justify-between items-center mb-4\">\n                  <div>\n                    <h4 className=\"text-md font-semibold text-gray-900\">PDF Parsed Successfully</h4>\n                    <p className=\"text-sm text-gray-600\">\n                      Found {parsedData.statistics?.total_subjects || 0} subjects, {parsedData.statistics?.total_students || 0} students, \n                      and {parsedData.statistics?.total_instructors || 0} instructors\n                    </p>\n                  </div>\n                  <div className=\"flex space-x-3\">\n                    <button\n                      onClick={() => {\n                        setActiveTab('subjects');\n                        setShowDataModal(true);\n                      }}\n                      className=\"inline-flex items-center px-4 py-2 border border-blue-300 rounded-md text-sm font-medium text-blue-700 bg-blue-50 hover:bg-blue-100\"\n                    >\n                      <EyeIcon className=\"h-4 w-4 mr-2\" />\n                      View Uploaded Data\n                    </button>\n                    <button\n                      onClick={handleImport}\n                      disabled={isImporting}\n                      className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:opacity-50\"\n                    >\n                      {isImporting ? (\n                        <>\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                          Importing...\n                        </>\n                      ) : (\n                        <>\n                          <ArrowDownTrayIcon className=\"h-4 w-4 mr-2\" />\n                          Import Data\n                        </>\n                      )}\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Import Results */}\n            {importResults && (\n              <div className=\"bg-green-50 border-2 border-green-200 rounded-xl p-6\">\n                <div className=\"flex items-center mb-4\">\n                  <CheckCircleIcon className=\"h-6 w-6 text-green-600 mr-2\" />\n                  <h4 className=\"text-md font-semibold text-green-900\">Import Completed Successfully</h4>\n                </div>\n\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                  {Object.entries(importResults).map(([key, result]) => (\n                    <div key={key} className=\"bg-white rounded p-3 text-sm\">\n                      <div className=\"font-medium text-gray-900 capitalize\">{key}</div>\n                      <div className=\"text-green-600\">Created: {result.created}</div>\n                      <div className=\"text-blue-600\">Updated: {result.updated}</div>\n                      {result.errors?.length > 0 && (\n                        <div className=\"text-red-600\">Errors: {result.errors.length}</div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n\n                <div className=\"mt-4 flex justify-end\">\n                  <button\n                    onClick={() => {\n                      setImportResults(null);\n                      setShowImportSection(false);\n                    }}\n                    className=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\"\n                  >\n                    Close\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Filters and Controls */}\n      <div className=\"bg-white p-6 rounded-xl shadow border-2 border-gray-200\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\n          {/* Sort By */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Sort by</label>\n            <div className=\"flex flex-wrap gap-2\">\n              {[\n                { key: 'rooms', label: 'Rooms', icon: BuildingOfficeIcon },\n                { key: 'subjects', label: 'Subjects', icon: BookOpenIcon },\n                { key: 'schedules', label: 'Schedules', icon: CalendarDaysIcon }\n              ].map(({ key, label, icon: Icon }) => (\n                <button\n                  key={key}\n                  onClick={() => {\n                    setSortBy(key);\n                    setSearchTerm('');\n                    setExpandedCards(new Set());\n                  }}\n                  className={`shrink-0 flex items-center px-3 py-2 text-sm font-medium rounded-md border transition-colors ${\n                    sortBy === key\n                      ? 'bg-blue-600 text-white border-blue-600'\n                      : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'\n                  }`}\n                >\n                  <Icon className=\"h-4 w-4 mr-2\" />\n                  {label}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Academic Year Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Academic Year</label>\n            <select\n              value={selectedAcademicYear}\n              onChange={(e) => setSelectedAcademicYear(e.target.value)}\n              className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n            >\n              <option value=\"\">All Academic Years</option>\n              {data?.filters?.academic_years?.map(year => (\n                <option key={year} value={year}>{year}</option>\n              ))}\n            </select>\n          </div>\n\n          {/* Semester Filter */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Semester</label>\n            <select\n              value={selectedSemester}\n              onChange={(e) => setSelectedSemester(e.target.value)}\n              className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n            >\n              <option value=\"\">All Semesters</option>\n              {data?.filters?.semesters?.map(semester => (\n                <option key={semester} value={semester}>{semester}</option>\n              ))}\n            </select>\n          </div>\n\n          {/* Search */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Search</label>\n            <div className=\"relative\">\n              <MagnifyingGlassIcon className=\"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder={`Search ${sortBy}...`}\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full pl-10 pr-3 py-2 border-2 border-gray-300 rounded-md text-sm\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Bulk Operations Toolbar */}\n        {selectedItems.size > 0 && (\n          <div className=\"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 mb-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                    <span className=\"text-sm font-medium text-blue-600\">{selectedItems.size}</span>\n                  </div>\n                  <span className=\"text-sm font-medium text-blue-900\">\n                    {selectedItems.size} {sortBy} selected\n                  </span>\n                </div>\n                <button\n                  onClick={() => {\n                    setSelectedItems(new Set());\n                    setSelectAll(false);\n                  }}\n                  className=\"text-sm text-blue-600 hover:text-blue-800 underline\"\n                >\n                  Clear selection\n                </button>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={handleBulkDelete}\n                  disabled={selectedItems.size === 0}\n                  className=\"inline-flex items-center px-3 py-2 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  <TrashIcon className=\"h-4 w-4 mr-2\" />\n                  Delete Selected\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Statistics */}\n        {data?.statistics && (\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-gray-200\">\n            <div className=\"text-center bg-white rounded-lg border-2 border-gray-200 p-4\">\n              <div className=\"text-2xl font-bold text-blue-600\">{data.statistics.total_rooms}</div>\n              <div className=\"text-sm text-gray-600\">Total Rooms</div>\n            </div>\n            <div className=\"text-center bg-white rounded-lg border-2 border-gray-200 p-4\">\n              <div className=\"text-2xl font-bold text-green-600\">{data.statistics.total_subjects}</div>\n              <div className=\"text-sm text-gray-600\">Total Subjects</div>\n            </div>\n            <div className=\"text-center bg-white rounded-lg border-2 border-gray-200 p-4\">\n              <div className=\"text-2xl font-bold text-purple-600\">{data.statistics.total_schedules}</div>\n              <div className=\"text-sm text-gray-600\">Total Schedules</div>\n            </div>\n            <div className=\"text-center bg-white rounded-lg border-2 border-gray-200 p-4\">\n              <div className=\"text-2xl font-bold text-orange-600\">{data.statistics.total_enrolled_students}</div>\n              <div className=\"text-sm text-gray-600\">Total Enrollments</div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Data Grid */}\n      {filteredData.length > 0 && (\n        <div className=\"flex flex-wrap items-center justify-between gap-2 mb-4\">\n          <div className=\"flex items-center space-x-3\">\n            <input\n              type=\"checkbox\"\n              checked={selectAll}\n              onChange={handleSelectAll}\n              className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n            />\n            <span className=\"text-sm font-medium text-gray-700\">\n              Select All ({filteredData.length} {sortBy})\n            </span>\n          </div>\n          <div className=\"text-sm text-gray-500\">\n            {selectedItems.size} selected\n          </div>\n        </div>\n      )}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-start content-start\">\n        {(() => {\n          const cols = distributeIntoColumns(Array.isArray(filteredData) ? filteredData : [], 3);\n          return cols.map((colItems, colIdx) => (\n            <div key={`col-${colIdx}`} className=\"space-y-6\">\n              {colItems.map((item, idx) => (\n                <React.Fragment key={`item-${colIdx}-${idx}`}>\n                  {renderItem(item)}\n                </React.Fragment>\n              ))}\n            </div>\n          ));\n        })()}\n      </div>\n\n      {filteredData.length === 0 && !loading && (\n        <div className=\"text-center py-12\">\n          {React.createElement(getSortIcon(sortBy), { className: \"mx-auto h-12 w-12 text-gray-400\" })}\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No {sortBy} found</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            {searchTerm || selectedAcademicYear || selectedSemester \n              ? 'Try adjusting your search filters.' \n              : `No ${sortBy} available for the current filters.`}\n          </p>\n        </div>\n      )}\n\n      {/* Detail Modal */}\n      {showModal && modalData && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-10 mx-auto p-6 border max-w-6xl shadow-lg rounded-md bg-white my-8\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-xl font-semibold text-gray-900\">  \n                {modalType.charAt(0).toUpperCase() + modalType.slice(1)} Details\n              </h2>\n              <button\n                onClick={() => {\n                  setShowModal(false);\n                  setModalData(null);\n                  setModalType('');\n                  setStudentSearchTerm('');\n                }}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"max-h-[70vh] overflow-y-auto\">\n              {renderModalContent()}\n            </div>\n\n            <div className=\"mt-6 flex justify-end\">\n              <button\n                onClick={() => {\n                  setShowModal(false);\n                  setModalData(null);\n                  setModalType('');\n                  setStudentSearchTerm('');\n                }}\n                className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Data Preview Modal */}\n      {showDataModal && parsedData && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-20 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-md bg-white\">\n            <div className=\"mt-3\">\n              {/* Modal Header */}\n              <div className=\"flex justify-between items-center mb-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900\">PDF Data Preview</h3>\n                <button\n                  onClick={() => setShowDataModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <XMarkIcon className=\"h-6 w-6\" />\n                </button>\n              </div>\n\n              {/* Statistics */}\n              {parsedData?.statistics && (\n                <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6\">\n                  {[\n                    { label: 'Subjects', value: parsedData.statistics.total_subjects, color: 'bg-blue-100 text-blue-800' },\n                    { label: 'Students', value: parsedData.statistics.total_students, color: 'bg-green-100 text-green-800' },\n                    { label: 'Instructors', value: parsedData.statistics.total_instructors, color: 'bg-purple-100 text-purple-800' },\n                    { label: 'Rooms', value: parsedData.statistics.total_rooms, color: 'bg-orange-100 text-orange-800' },\n                    { label: 'Schedules', value: parsedData.statistics.total_schedules, color: 'bg-indigo-100 text-indigo-800' },\n                    { label: 'Enrollments', value: parsedData.statistics.total_enrollments, color: 'bg-pink-100 text-pink-800' }\n                  ].map((stat, index) => (\n                    <div key={index} className=\"bg-gray-50 rounded-lg p-4 text-center\">\n                      <div className={`text-2xl font-bold ${stat.color}`}>{stat.value}</div>\n                      <div className=\"text-sm text-gray-600 mt-1\">{stat.label}</div>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {/* Detailed Data Tabs */}\n              <div className=\"border-b border-gray-200 mb-6\">\n                <nav className=\"-mb-px flex space-x-8\">\n                  {[\n                    { key: 'subjects', label: 'Subjects', count: parsedData.subjects?.length || 0 },\n                    { key: 'students', label: 'Students', count: parsedData.students?.length || 0 },\n                    { key: 'instructors', label: 'Instructors', count: parsedData.instructors?.length || 0 },\n                    { key: 'rooms', label: 'Rooms', count: parsedData.rooms?.length || 0 },\n                    { key: 'schedules', label: 'Schedules', count: parsedData.schedules?.length || 0 }\n                  ].map((tab) => (\n                    <button\n                      key={tab.key}\n                      onClick={() => setActiveTab(tab.key)}\n                      className={`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${\n                        activeTab === tab.key\n                          ? 'border-blue-500 text-blue-600'\n                          : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                      }`}\n                    >\n                      {tab.label} ({tab.count})\n                    </button>\n                  ))}\n                </nav>\n              </div>\n\n              {/* Data Content */}\n              <div className=\"max-h-96 overflow-y-auto\">\n                {/* Subjects Tab */}\n                {activeTab === 'subjects' && (\n                  <div className=\"mb-6\">\n                    <h4 className=\"text-lg font-semibold text-gray-900 mb-3\">Subjects ({parsedData.subjects?.length || 0})</h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                      {parsedData.subjects?.map((subject, index) => (\n                        <div key={index} className=\"bg-gray-50 rounded-lg p-3\">\n                          <div className=\"font-medium text-gray-900\">{subject.code}</div>\n                          <div className=\"text-sm text-gray-600\">{subject.name}</div>\n                          <div className=\"text-xs text-gray-500 mt-1\">\n                            {subject.section}  {subject.semester}  {subject.academic_year}\n                          </div>\n                          {subject.instructors?.length > 0 && (\n                            <div className=\"text-xs text-blue-600 mt-1\">\n                              {subject.instructors.map(inst => inst.name).join(', ')}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Students Tab */}\n                {activeTab === 'students' && (\n                  <div className=\"mb-6\">\n                    <h4 className=\"text-lg font-semibold text-gray-900 mb-3\">Students ({parsedData.students?.length || 0})</h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                      {parsedData.students?.map((student, index) => (\n                        <div key={index} className=\"bg-gray-50 rounded-lg p-3\">\n                          <div className=\"font-medium text-gray-900\">{student.full_name}</div>\n                          <div className=\"text-sm text-gray-600\">{student.student_id}</div>\n                          <div className=\"text-xs text-gray-500\">\n                            {student.course}  Year {student.year_level}  {student.gender}\n                          </div>\n                          <div className=\"text-xs text-gray-500\">{student.email}</div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Instructors Tab */}\n                {activeTab === 'instructors' && (\n                  <div className=\"mb-6\">\n                    <h4 className=\"text-lg font-semibold text-gray-900 mb-3\">Instructors ({parsedData.instructors?.length || 0})</h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                      {parsedData.instructors?.map((instructor, index) => (\n                        <div key={index} className=\"bg-gray-50 rounded-lg p-3\">\n                          <div className=\"font-medium text-gray-900\">{instructor.name}</div>\n                          <div className=\"text-sm text-gray-600\">{instructor.email}</div>\n                          <div className=\"text-xs text-gray-500\">\n                            {instructor.department}  {instructor.position}\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n\n                {/* Rooms Tab */}\n                {activeTab === 'rooms' && (\n                  <div className=\"mb-6\">\n                    <h4 className=\"text-lg font-semibold text-gray-900 mb-3\">Rooms ({parsedData.rooms?.length || 0})</h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                      {parsedData.rooms?.map((room, index) => {\n                        const roomNumber = room.number || room.room_number || room.ROOMNUMBER || room.code || room.id || '';\n                        const roomName = room.name || room.ROOMNAME || '';\n                        const building = room.building || room.BUILDING || '';\n                        const capacity = room.capacity || room.CAPACITY || '';\n                        const schedules = Array.isArray(parsedData.schedules) ? parsedData.schedules : [];\n                        const scheduleCount = schedules.filter(s => {\n                          const sRoom = s.room_number || s.ROOMNUMBER || s.room || '';\n                          return String(sRoom).trim() === String(roomNumber).trim();\n                        }).length;\n                        return (\n                          <div key={index} className=\"bg-gray-50 rounded-lg p-3\">\n                            <div className=\"font-medium text-gray-900\">{roomNumber || 'Unknown Room'}</div>\n                            {roomName && (\n                              <div className=\"text-sm text-gray-600\">{roomName}</div>\n                            )}\n                            <div className=\"text-xs text-gray-500\">\n                              {building || 'N/A'}{capacity ? `  Capacity: ${capacity}` : ''}\n                            </div>\n                            <div className=\"text-xs text-blue-600\">\n                              {scheduleCount} {scheduleCount === 1 ? 'schedule' : 'schedules'}\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                )}\n\n                {/* Schedules Tab */}\n                {activeTab === 'schedules' && (\n                  <div className=\"mb-6\">\n                    <h4 className=\"text-lg font-semibold text-gray-900 mb-3\">Schedules ({parsedData.schedules?.length || 0})</h4>\n                    <div className=\"space-y-2\">\n                      {parsedData.schedules?.map((schedule, index) => (\n                        <div key={index} className=\"bg-gray-50 rounded-lg p-3\">\n                          <div className=\"flex justify-between items-start\">\n                            <div>\n                              <div className=\"font-medium text-gray-900\">{schedule.subject_code}</div>\n                              <div className=\"text-sm text-gray-600\">\n                                {schedule.day}  {schedule.start_time} - {schedule.end_time}\n                              </div>\n                              <div className=\"text-xs text-gray-500\">\n                                {schedule.room_number}  {schedule.instructor_name}\n                              </div>\n                            </div>\n                            <div className=\"text-xs text-gray-500\">\n                              {schedule.semester}  {schedule.academic_year}\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Modal Footer */}\n              <div className=\"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200\">\n                <button\n                  onClick={() => setShowDataModal(false)}\n                  className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50\"\n                >\n                  Close\n                </button>\n                <button\n                  onClick={() => {\n                    setShowDataModal(false);\n                    handleImport();\n                  }}\n                  disabled={isImporting}\n                  className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 disabled:opacity-50\"\n                >\n                  {isImporting ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2 inline-block\"></div>\n                      Importing...\n                    </>\n                  ) : (\n                    <>\n                      <ArrowDownTrayIcon className=\"h-4 w-4 mr-2 inline-block\" />\n                      Import All Data\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Modern Delete Confirmation Modal */}\n      {showDeleteModal && deleteItem && (\n        <div className=\"fixed inset-0 overflow-y-auto z-50\">\n          {/* Backdrop with blur and fade animation */}\n          <div className={`fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ease-in-out ${\n            modalAnimation === 'visible' ? 'opacity-100' : 'opacity-0'\n          }`}>\n            <div className=\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\">\n              {/* Modal container with scale and fade animation */}\n              <div className={`relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all duration-300 ease-out sm:my-8 sm:w-full sm:max-w-lg ${\n                modalAnimation === 'visible' \n                  ? 'scale-100 opacity-100 translate-y-0' \n                  : 'scale-95 opacity-0 translate-y-4'\n              }`}>\n                {/* Gradient header */}\n                <div className=\"bg-gradient-to-r from-red-50 to-red-100 px-6 py-8\">\n                  <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 shadow-lg mb-4 animate-pulse\">\n                    <ExclamationTriangleIcon className=\"h-8 w-8 text-red-600\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                    {deleteItem.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 leading-relaxed\">\n                    {deleteItem.message}\n                  </p>\n                </div>\n                \n                {/* Action buttons */}\n                <div className=\"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 space-y-3 space-y-reverse sm:space-y-0\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setModalAnimation('hidden');\n                      setTimeout(() => {\n                        setShowDeleteModal(false);\n                        setDeleteItem(null);\n                      }, 300);\n                    }}\n                    disabled={isDeleting}\n                    className=\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={confirmDelete}\n                    disabled={isDeleting}\n                    className=\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-xl text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    {isDeleting ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                        Deleting...\n                      </>\n                    ) : (\n                      <>\n                        <TrashIcon className=\"h-4 w-4 mr-2\" />\n                        {deleteItem.confirmText}\n                      </>\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Bulk Delete Modal */}\n      {showBulkDeleteModal && (\n        <div className=\"fixed inset-0 overflow-y-auto z-50\">\n          {/* Backdrop with blur and fade animation */}\n          <div className={`fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ease-in-out ${\n            modalAnimation === 'visible' ? 'opacity-100' : 'opacity-0'\n          }`}>\n            <div className=\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\">\n              {/* Modal container with scale and fade animation */}\n              <div className={`relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all duration-300 ease-out sm:my-8 sm:w-full sm:max-w-lg ${\n                modalAnimation === 'visible' \n                  ? 'scale-100 opacity-100 translate-y-0' \n                  : 'scale-95 opacity-0 translate-y-4'\n              }`}>\n                {/* Gradient header */}\n                <div className=\"bg-gradient-to-r from-red-50 to-red-100 px-6 py-8\">\n                  <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 shadow-lg mb-4 animate-pulse\">\n                    <ExclamationTriangleIcon className=\"h-8 w-8 text-red-600\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                    Bulk Delete {bulkDeleteType}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 leading-relaxed\">\n                    Are you sure you want to delete <strong>{selectedItems.size} {bulkDeleteType}</strong>? This action cannot be undone and will also remove all related data (schedules, enrollments, etc.).\n                  </p>\n                </div>\n                \n                {/* Action buttons */}\n                <div className=\"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 space-y-3 space-y-reverse sm:space-y-0\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setModalAnimation('hidden');\n                      setTimeout(() => {\n                        setShowBulkDeleteModal(false);\n                        setBulkDeleteType('');\n                      }, 300);\n                    }}\n                    disabled={isBulkDeleting}\n                    className=\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={confirmBulkDelete}\n                    disabled={isBulkDeleting}\n                    className=\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-xl text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed\"\n                  >\n                    {isBulkDeleting ? (\n                      <>\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                        Deleting...\n                      </>\n                    ) : (\n                      <>\n                        <TrashIcon className=\"h-4 w-4 mr-2\" />\n                        Delete {selectedItems.size} {bulkDeleteType}\n                      </>\n                    )}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* TEMPORARY: Schedule Edit Modal */}\n      {showEditModal && editingSchedule && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n            <div className=\"mt-3\">\n              <div className=\"flex justify-between items-center mb-4\">\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  Edit Schedule (TEMPORARY)\n                </h3>\n                <button\n                  onClick={() => {\n                    setShowEditModal(false);\n                    setEditingSchedule(null);\n                    setEditFormData({\n                      subject_id: '',\n                      room_id: '',\n                      day_of_week: '',\n                      start_time: '',\n                      end_time: '',\n                      academic_year: '',\n                      semester: ''\n                    });\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <XMarkIcon className=\"h-6 w-6\" />\n                </button>\n              </div>\n              \n              <div className=\"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4\">\n                <div className=\"flex\">\n                  <ExclamationTriangleIcon className=\"h-5 w-5 text-yellow-400\" />\n                  <div className=\"ml-3\">\n                    <p className=\"text-sm text-yellow-800\">\n                      <strong>Note:</strong> This is a temporary edit feature for quick schedule modifications.\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <form onSubmit={handleEditSubmit} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Subject</label>\n                  <input\n                    type=\"text\"\n                    value={editingSchedule.SUBJECTCODE}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50\"\n                    disabled\n                  />\n                  <p className=\"text-xs text-gray-500 mt-1\">Subject cannot be changed</p>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Room</label>\n                  <select\n                    value={editFormData.room_id}\n                    onChange={(e) => setEditFormData({ ...editFormData, room_id: e.target.value })}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                    required\n                  >\n                    <option value=\"\">Select Room</option>\n                    {data?.rooms?.data?.map(room => (\n                      <option key={room.ROOMID} value={room.ROOMID}>\n                        {room.ROOMNUMBER} - {room.ROOMNAME}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Day of Week</label>\n                  <select\n                    value={editFormData.day_of_week}\n                    onChange={(e) => setEditFormData({ ...editFormData, day_of_week: e.target.value })}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                    required\n                  >\n                    <option value=\"\">Select Day</option>\n                    <option value=\"Monday\">Monday</option>\n                    <option value=\"Tuesday\">Tuesday</option>\n                    <option value=\"Wednesday\">Wednesday</option>\n                    <option value=\"Thursday\">Thursday</option>\n                    <option value=\"Friday\">Friday</option>\n                    <option value=\"Saturday\">Saturday</option>\n                    <option value=\"Sunday\">Sunday</option>\n                  </select>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Start Time</label>\n                    <input\n                      type=\"time\"\n                      value={editFormData.start_time}\n                      onChange={(e) => setEditFormData({ ...editFormData, start_time: e.target.value })}\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                      required\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">End Time</label>\n                    <input\n                      type=\"time\"\n                      value={editFormData.end_time}\n                      onChange={(e) => setEditFormData({ ...editFormData, end_time: e.target.value })}\n                      className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                      required\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Academic Year</label>\n                  <input\n                    type=\"text\"\n                    value={editFormData.academic_year}\n                    onChange={(e) => setEditFormData({ ...editFormData, academic_year: e.target.value })}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                    placeholder=\"2024-2025\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Semester</label>\n                  <select\n                    value={editFormData.semester}\n                    onChange={(e) => setEditFormData({ ...editFormData, semester: e.target.value })}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                    required\n                  >\n                    <option value=\"\">Select Semester</option>\n                    <option value=\"First Semester\">First Semester</option>\n                    <option value=\"Second Semester\">Second Semester</option>\n                    <option value=\"Summer\">Summer</option>\n                  </select>\n                </div>\n\n                <div className=\"flex justify-end space-x-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowEditModal(false);\n                      setEditingSchedule(null);\n                      setEditFormData({\n                        subject_id: '',\n                        room_id: '',\n                        day_of_week: '',\n                        start_time: '',\n                        end_time: '',\n                        academic_year: '',\n                        semester: ''\n                      });\n                    }}\n                    className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-yellow-600 hover:bg-yellow-700\"\n                  >\n                    Update Schedule\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default UnifiedManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}