{"ast":null,"code":"import _objectSpread from\"C:/Users/Harley/Desktop/Capstone/attendanceiot/IOTCapstone/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{PlusIcon,PencilIcon,TrashIcon,ClockIcon,UserGroupIcon,XMarkIcon,MagnifyingGlassIcon,UserPlusIcon,UserMinusIcon,AcademicCapIcon,CheckIcon,ExclamationTriangleIcon}from'@heroicons/react/24/outline';import toast from'react-hot-toast';import axios from'axios';// Set up axios defaults\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";axios.defaults.baseURL='http://localhost:5000';function Schedules(){var _enrollmentData$avail,_enrollmentData$enrol;const[schedules,setSchedules]=useState([]);const[subjects,setsubjects]=useState([]);const[instructors,setInstructors]=useState([]);const[rooms,setRooms]=useState([]);const[students,setStudents]=useState([]);const[loading,setLoading]=useState(true);const[showModal,setShowModal]=useState(false);const[editingSchedule,setEditingSchedule]=useState(null);const[showEnrollModal,setShowEnrollModal]=useState(false);const[selectedSchedule,setSelectedSchedule]=useState(null);const[enrollmentData,setEnrollmentData]=useState(null);const[enrollmentLoading,setEnrollmentLoading]=useState(false);const[searchTerm,setSearchTerm]=useState('');const[selectedStudents,setSelectedStudents]=useState([]);const[showAddStudents,setShowAddStudents]=useState(false);const[showDeleteModal,setShowDeleteModal]=useState(false);const[deleteData,setDeleteData]=useState(null);const[modalAnimation,setModalAnimation]=useState('hidden');const[formData,setFormData]=useState({subject_id:'',room_id:'',academic_year:'2024-2025',semester:'First Semester',time_slots:[{id:1,selected_days:[],start_time:'',end_time:''}]});const[scheduleGroups,setScheduleGroups]=useState([]);const daysOfWeek=['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'];const semesters=['First Semester','Second Semester','Summer'];// Helper function to toggle day selection for a specific time slot\nconst toggleDaySelection=(timeSlotId,day)=>{console.log('toggleDaySelection called with:',{timeSlotId,day});setFormData(prev=>{var _prev$time_slots$find,_newState$time_slots$;console.log('Before toggle - selected_days:',(_prev$time_slots$find=prev.time_slots.find(s=>s.id===timeSlotId))===null||_prev$time_slots$find===void 0?void 0:_prev$time_slots$find.selected_days);const newState=_objectSpread(_objectSpread({},prev),{},{time_slots:prev.time_slots.map(slot=>slot.id===timeSlotId?_objectSpread(_objectSpread({},slot),{},{selected_days:slot.selected_days.includes(day)?slot.selected_days.filter(d=>d!==day):[...slot.selected_days,day]}):slot)});console.log('After toggle - selected_days:',(_newState$time_slots$=newState.time_slots.find(s=>s.id===timeSlotId))===null||_newState$time_slots$===void 0?void 0:_newState$time_slots$.selected_days);return newState;});};// Helper function to add a new time slot\nconst addTimeSlot=()=>{const newId=Math.max(...formData.time_slots.map(slot=>slot.id))+1;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{time_slots:[...prev.time_slots,{id:newId,selected_days:[],start_time:'',end_time:''}]}));};// Helper function to remove a time slot\nconst removeTimeSlot=timeSlotId=>{if(formData.time_slots.length>1){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{time_slots:prev.time_slots.filter(slot=>slot.id!==timeSlotId)}));}};// Helper function to update time slot data\nconst updateTimeSlot=(timeSlotId,field,value)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{time_slots:prev.time_slots.map(slot=>slot.id===timeSlotId?_objectSpread(_objectSpread({},slot),{},{[field]:value}):slot)}));};// Helper function to group schedules by SUBJECT ONLY\nconst groupSchedulesBySubject=schedulesList=>{const groups={};schedulesList.forEach(schedule=>{// Create a key that includes ONLY subject info\nconst key=\"\".concat(schedule.SUBJECTID,\"-\").concat(schedule.subject_code,\"-\").concat(schedule.subject_name);if(!groups[key]){groups[key]={subject_id:schedule.SUBJECTID,subject_code:schedule.subject_code,subject_name:schedule.subject_name,instructor_name:schedule.instructor_name,academic_year:schedule.ACADEMICYEAR,semester:schedule.SEMESTER,schedules:[]// Keep original schedules for management\n};}groups[key].schedules.push(schedule);});// Group schedules within each subject by time slots\nObject.values(groups).forEach(group=>{const timeSlotGroups={};group.schedules.forEach(schedule=>{const timeKey=\"\".concat(schedule.STARTTIME,\"-\").concat(schedule.ENDTIME,\"-\").concat(schedule.ROOMID);if(!timeSlotGroups[timeKey]){timeSlotGroups[timeKey]={start_time:schedule.STARTTIME,end_time:schedule.ENDTIME,room_id:schedule.ROOMID,room_number:schedule.room_number,room_name:schedule.room_name,days:[],schedules:[]};}timeSlotGroups[timeKey].days.push(schedule.DAYOFWEEK);timeSlotGroups[timeKey].schedules.push(schedule);});// Sort days in each time slot by weekday order\nconst dayOrder=['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'];Object.values(timeSlotGroups).forEach(timeSlot=>{timeSlot.days.sort((a,b)=>dayOrder.indexOf(a)-dayOrder.indexOf(b));});group.time_slots=Object.values(timeSlotGroups);});return Object.values(groups);};useEffect(()=>{fetchData();},[]);// Reset form when modal opens for creating new schedule\nuseEffect(()=>{if(showModal&&!editingSchedule){console.log('Modal opened for creating new schedule - resetting form');resetForm();}},[showModal,editingSchedule]);const fetchData=async()=>{try{setLoading(true);const token=localStorage.getItem('token');if(!token){toast.error('Please login to access schedules');return;}const headers={Authorization:\"Bearer \".concat(token)};// Fetch all data in parallel\nconst[schedulesRes,subjectsRes,instructorsRes,roomsRes,studentsRes]=await Promise.all([axios.get('/api/schedules',{headers}),axios.get('/api/subjects',{headers}),axios.get('/api/users?type=instructor',{headers}),axios.get('/api/rooms',{headers}),axios.get('/api/users?type=student',{headers})]);const schedulesList=schedulesRes.data.schedules||[];setSchedules(schedulesList);setScheduleGroups(groupSchedulesBySubject(schedulesList));setsubjects(subjectsRes.data.subjects||[]);setInstructors(instructorsRes.data.users||[]);setRooms(roomsRes.data.rooms||[]);setStudents(studentsRes.data.users||[]);}catch(error){var _error$response;console.error('Error fetching data:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){toast.error('Session expired. Please login again.');localStorage.removeItem('token');window.location.href='/login';}else{toast.error('Failed to load data');}}finally{setLoading(false);}};const fetchEnrollmentData=async scheduleId=>{try{setEnrollmentLoading(true);const token=localStorage.getItem('token');const headers={Authorization:\"Bearer \".concat(token)};const response=await axios.get(\"/api/enrollment/schedule/\".concat(scheduleId),{headers});setEnrollmentData(response.data);}catch(error){console.error('Error fetching enrollment data:',error);toast.error('Failed to load enrollment data');}finally{setEnrollmentLoading(false);}};const handleSubmit=async e=>{e.preventDefault();// Validate that at least one time slot has selected days\nconst validTimeSlots=formData.time_slots.filter(slot=>slot.selected_days.length>0);if(validTimeSlots.length===0){toast.error('Please select at least one day in at least one time slot');return;}// Validate that all time slots with selected days have times\nconst invalidTimeSlots=validTimeSlots.filter(slot=>!slot.start_time||!slot.end_time);if(invalidTimeSlots.length>0){toast.error('Please set start and end times for all time slots with selected days');return;}// In edit mode, ensure only one day is selected\nif(editingSchedule){const invalidEditSlots=validTimeSlots.filter(slot=>slot.selected_days.length!==1);if(invalidEditSlots.length>0){toast.error('In edit mode, please select exactly one day per time slot');return;}}try{const token=localStorage.getItem('token');const headers={Authorization:\"Bearer \".concat(token)};if(editingSchedule){// Update existing schedule (use first time slot for editing)\nconst firstTimeSlot=validTimeSlots[0];const updateData={subject_id:formData.subject_id,room_id:formData.room_id,day_of_week:firstTimeSlot.selected_days[0],start_time:firstTimeSlot.start_time,end_time:firstTimeSlot.end_time,academic_year:formData.academic_year,semester:formData.semester};await axios.put(\"/api/schedules/\".concat(editingSchedule.SCHEDULEID),updateData,{headers});toast.success('Schedule updated successfully');}else{// Create new schedules for each time slot and each day\nconst promises=[];validTimeSlots.forEach(timeSlot=>{timeSlot.selected_days.forEach(day=>{const scheduleData={subject_id:formData.subject_id,room_id:formData.room_id,day_of_week:day,start_time:timeSlot.start_time,end_time:timeSlot.end_time,academic_year:formData.academic_year,semester:formData.semester};promises.push(axios.post('/api/schedules',scheduleData,{headers}));});});const results=await Promise.allSettled(promises);// Check for any failures\nconst failures=results.filter(result=>result.status==='rejected');const successes=results.filter(result=>result.status==='fulfilled');if(failures.length>0){console.error('Some schedules failed to create:',failures);const errorMessages=failures.map(failure=>{var _failure$reason,_failure$reason$respo,_failure$reason$respo2,_failure$reason2;return((_failure$reason=failure.reason)===null||_failure$reason===void 0?void 0:(_failure$reason$respo=_failure$reason.response)===null||_failure$reason$respo===void 0?void 0:(_failure$reason$respo2=_failure$reason$respo.data)===null||_failure$reason$respo2===void 0?void 0:_failure$reason$respo2.message)||((_failure$reason2=failure.reason)===null||_failure$reason2===void 0?void 0:_failure$reason2.message)||'Unknown error';});const failedDays=failures.map(failure=>{var _failure$reason3,_failure$reason3$conf;const requestData=(_failure$reason3=failure.reason)===null||_failure$reason3===void 0?void 0:(_failure$reason3$conf=_failure$reason3.config)===null||_failure$reason3$conf===void 0?void 0:_failure$reason3$conf.data;if(requestData){const parsedData=JSON.parse(requestData);return parsedData.day_of_week;}return'Unknown day';});toast.error(\"\".concat(failures.length,\" schedule(s) failed for days: \").concat(failedDays.join(', '),\". Errors: \").concat(errorMessages.slice(0,2).join(', ')));}const totalSchedules=validTimeSlots.reduce((sum,slot)=>sum+slot.selected_days.length,0);if(successes.length>0){toast.success(\"\".concat(successes.length,\" schedule(s) created successfully out of \").concat(totalSchedules,\" total\"));}}await fetchData();// Refresh data\nsetShowModal(false);resetForm();setEditingSchedule(null);}catch(error){var _error$response2,_error$response2$data;console.error('Error saving schedule:',error);if((_error$response2=error.response)!==null&&_error$response2!==void 0&&(_error$response2$data=_error$response2.data)!==null&&_error$response2$data!==void 0&&_error$response2$data.message){toast.error(error.response.data.message);}else{toast.error('Failed to save schedule');}}};const resetForm=()=>{setFormData({subject_id:'',room_id:'',academic_year:'2024-2025',semester:'First Semester',time_slots:[{id:1,selected_days:[],start_time:'',end_time:''}]});};const handleEdit=schedule=>{setEditingSchedule(schedule);setFormData({subject_id:schedule.SUBJECTID||'',room_id:schedule.ROOMID||'',academic_year:schedule.ACADEMICYEAR||'2024-2025',semester:schedule.SEMESTER||'First Semester',time_slots:[{id:1,selected_days:[schedule.DAYOFWEEK||'Monday'],start_time:schedule.STARTTIME?schedule.STARTTIME.substring(0,5):'',end_time:schedule.ENDTIME?schedule.ENDTIME.substring(0,5):''}]});setShowModal(true);};const handleDelete=async scheduleId=>{setDeleteData({type:'schedule',id:scheduleId,title:'Delete Schedule',message:'Are you sure you want to delete this schedule? This action cannot be undone.',confirmText:'Delete Schedule'});setShowDeleteModal(true);setTimeout(()=>setModalAnimation('visible'),10);};const confirmDelete=async()=>{if(!deleteData)return;try{const token=localStorage.getItem('token');const headers={Authorization:\"Bearer \".concat(token)};if(deleteData.type==='schedule'){await axios.delete(\"/api/schedules/\".concat(deleteData.id),{headers});toast.success('Schedule deleted successfully');}else if(deleteData.type==='timeSlot'){await Promise.all(deleteData.schedules.map(schedule=>axios.delete(\"/api/schedules/\".concat(schedule.SCHEDULEID),{headers})));toast.success(\"Time slot deleted (\".concat(deleteData.daysCount,\" day(s))\"));}else if(deleteData.type==='student'){await axios.delete(\"/api/enrollment/schedule/\".concat(deleteData.scheduleId,\"/student/\").concat(deleteData.studentId),{headers});toast.success('Student removed successfully');}await fetchData();// Refresh data\nif(deleteData.type==='student'){await fetchEnrollmentData(selectedSchedule.SCHEDULEID);}}catch(error){console.error('Error deleting:',error);if(deleteData.type==='student'){toast.error('Failed to remove student');}else{toast.error('Failed to delete schedule');}}finally{setModalAnimation('hidden');setTimeout(()=>{setShowDeleteModal(false);setDeleteData(null);},300);}};const handleManageEnrollment=async schedule=>{setSelectedSchedule(schedule);setShowEnrollModal(true);setSearchTerm('');setSelectedStudents([]);setShowAddStudents(false);await fetchEnrollmentData(schedule.SCHEDULEID);};const handleEnrollStudents=async()=>{if(selectedStudents.length===0){toast.error('Please select students to enroll');return;}try{const token=localStorage.getItem('token');const headers={Authorization:\"Bearer \".concat(token)};const response=await axios.post(\"/api/enrollment/schedule/\".concat(selectedSchedule.SCHEDULEID,\"/enroll\"),{studentIds:selectedStudents},{headers});if(response.data.errors&&response.data.errors.length>0){toast.error(\"Some enrollments failed: \".concat(response.data.errors.slice(0,2).join(', ')));}else{toast.success(response.data.message);}setSelectedStudents([]);setShowAddStudents(false);await fetchEnrollmentData(selectedSchedule.SCHEDULEID);}catch(error){console.error('Error enrolling students:',error);toast.error('Failed to enroll students');}};const handleRemoveStudent=(studentId,studentName)=>{setDeleteData({type:'student',studentId:studentId,scheduleId:selectedSchedule.SCHEDULEID,studentName:studentName,title:'Remove Student',message:\"Are you sure you want to remove \".concat(studentName,\" from this subject? This action cannot be undone.\"),confirmText:'Remove Student'});setShowDeleteModal(true);setTimeout(()=>setModalAnimation('visible'),10);};const handleStudentSelection=studentId=>{setSelectedStudents(prev=>prev.includes(studentId)?prev.filter(id=>id!==studentId):[...prev,studentId]);};const formatTime=time=>{if(!time)return'';const[hours,minutes]=time.split(':');const hour=parseInt(hours);const ampm=hour>=12?'PM':'AM';const displayHour=hour%12||12;return\"\".concat(displayHour,\":\").concat(minutes,\" \").concat(ampm);};const filteredAvailableStudents=(enrollmentData===null||enrollmentData===void 0?void 0:(_enrollmentData$avail=enrollmentData.available)===null||_enrollmentData$avail===void 0?void 0:_enrollmentData$avail.filter(student=>{var _student$STUDENTID;return student.student_name.toLowerCase().includes(searchTerm.toLowerCase())||student.EMAIL.toLowerCase().includes(searchTerm.toLowerCase())||((_student$STUDENTID=student.STUDENTID)===null||_student$STUDENTID===void 0?void 0:_student$STUDENTID.toLowerCase().includes(searchTerm.toLowerCase()));}))||[];const filteredEnrolledStudents=(enrollmentData===null||enrollmentData===void 0?void 0:(_enrollmentData$enrol=enrollmentData.enrolled)===null||_enrollmentData$enrol===void 0?void 0:_enrollmentData$enrol.filter(student=>{var _student$STUDENTID2;return student.student_name.toLowerCase().includes(searchTerm.toLowerCase())||student.EMAIL.toLowerCase().includes(searchTerm.toLowerCase())||((_student$STUDENTID2=student.STUDENTID)===null||_student$STUDENTID2===void 0?void 0:_student$STUDENTID2.toLowerCase().includes(searchTerm.toLowerCase()));}))||[];if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Schedule Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Manage class schedules, subjects, and enrollment\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{console.log('Add Schedule button clicked');setEditingSchedule(null);setShowModal(true);},className:\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Add Schedule\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:scheduleGroups.map((group,groupIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow border border-gray-200 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:group.subject_code}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:group.subject_name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Instructor:\"}),\" \",group.instructor_name||'Not assigned']})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _group$time_slots$,_group$time_slots$2,_group$time_slots$3;setFormData({subject_id:group.subject_id,room_id:((_group$time_slots$=group.time_slots[0])===null||_group$time_slots$===void 0?void 0:_group$time_slots$.room_id)||'',academic_year:group.academic_year||'2024-2025',semester:group.semester||'First Semester',time_slots:[{id:1,selected_days:[],start_time:(_group$time_slots$2=group.time_slots[0])!==null&&_group$time_slots$2!==void 0&&_group$time_slots$2.start_time?group.time_slots[0].start_time.substring(0,5):'',end_time:(_group$time_slots$3=group.time_slots[0])!==null&&_group$time_slots$3!==void 0&&_group$time_slots$3.end_time?group.time_slots[0].end_time.substring(0,5):''}]});setEditingSchedule(null);setShowModal(true);},className:\"text-green-500 hover:text-green-700 p-1 rounded-md hover:bg-green-50\",title:\"Add more days to this time slot\",children:/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 relative\",children:group.time_slots.length===1?/*#__PURE__*//* Compact layout for single time slot */_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 mr-2 text-blue-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[formatTime(group.time_slots[0].start_time),\" - \",formatTime(group.time_slots[0].end_time)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(group.time_slots[0].schedules[0]),className:\"text-gray-400 hover:text-blue-600 p-1 rounded\",title:\"Edit this schedule\",children:/*#__PURE__*/_jsx(PencilIcon,{className:\"h-3 w-3\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(group.time_slots[0].schedules[0].SCHEDULEID),className:\"text-gray-400 hover:text-red-600 p-1 rounded\",title:\"Delete this schedule\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-3 w-3\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",children:group.time_slots[0].days.map((day,dayIndex)=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-md\",children:day},\"\".concat(day,\"-\").concat(dayIndex)))}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600 space-y-1\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Room:\"}),\" \",group.time_slots[0].room_number,\" - \",group.time_slots[0].room_name]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Semester:\"}),\" \",group.semester,\" (\",group.academic_year,\")\"]})]}),group.time_slots[0].schedules.length>1&&/*#__PURE__*/_jsxs(\"details\",{className:\"mt-2\",children:[/*#__PURE__*/_jsxs(\"summary\",{className:\"text-xs text-gray-500 cursor-pointer hover:text-gray-700\",children:[\"Manage individual days (\",group.time_slots[0].schedules.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 space-y-1\",children:group.time_slots[0].schedules.map(schedule=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-1 px-2 bg-gray-50 rounded border\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-600\",children:schedule.DAYOFWEEK}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(schedule),className:\"text-gray-400 hover:text-blue-600 p-0.5 rounded\",title:\"Edit \".concat(schedule.DAYOFWEEK),children:/*#__PURE__*/_jsx(PencilIcon,{className:\"h-3 w-3\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(schedule.SCHEDULEID),className:\"text-gray-400 hover:text-red-600 p-0.5 rounded\",title:\"Delete \".concat(schedule.DAYOFWEEK),children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-3 w-3\"})})]})]},schedule.SCHEDULEID))})]})]}):/*#__PURE__*//* Full layout for multiple time slots with scrolling */_jsxs(_Fragment,{children:[group.time_slots.length>2&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mb-2 text-xs text-gray-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-300 rounded-full animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Multiple time slots - scroll to see all\"}),/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 bg-gray-300 rounded-full animate-pulse\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 \".concat(group.time_slots.length>2?'max-h-96 overflow-y-auto pr-2':''),style:group.time_slots.length>2?{scrollbarWidth:'thin',scrollbarColor:'#d1d5db #f3f4f6'}:{},children:group.time_slots.map((timeSlot,timeSlotIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-md p-4 bg-gray-50 relative\",children:[group.time_slots.length>2&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute -left-1 top-2 w-6 h-6 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center font-medium shadow-sm\",children:timeSlotIndex+1}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-700 mb-2\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-4 w-4 mr-2 text-blue-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[formatTime(timeSlot.start_time),\" - \",formatTime(timeSlot.end_time)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 mb-2\",children:timeSlot.days.map((day,dayIndex)=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-md\",children:day},\"\".concat(day,\"-\").concat(dayIndex)))}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Room:\"}),\" \",timeSlot.room_number,\" - \",timeSlot.room_name]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Semester:\"}),\" \",group.semester,\" (\",group.academic_year,\")\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1 ml-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(timeSlot.schedules[0]),className:\"text-gray-400 hover:text-blue-600 p-1 rounded\",title:\"Edit this time slot\",children:/*#__PURE__*/_jsx(PencilIcon,{className:\"h-3 w-3\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setDeleteData({type:'timeSlot',schedules:timeSlot.schedules,daysCount:timeSlot.days.length,title:'Delete Time Slot',message:\"Are you sure you want to delete this time slot (\".concat(timeSlot.days.length,\" day(s))? This will remove all schedules for \").concat(timeSlot.days.join(', '),\".\"),confirmText:'Delete Time Slot'});setShowDeleteModal(true);setTimeout(()=>setModalAnimation('visible'),10);},className:\"text-gray-400 hover:text-red-600 p-1 rounded\",title:\"Delete this time slot\",children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-3 w-3\"})})]})]}),/*#__PURE__*/_jsxs(\"details\",{className:\"mt-2\",children:[/*#__PURE__*/_jsxs(\"summary\",{className:\"text-xs text-gray-500 cursor-pointer hover:text-gray-700\",children:[\"Manage individual days (\",timeSlot.schedules.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 space-y-1\",children:timeSlot.schedules.map(schedule=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center py-1 px-2 bg-white rounded border\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-600\",children:schedule.DAYOFWEEK}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(schedule),className:\"text-gray-400 hover:text-blue-600 p-0.5 rounded\",title:\"Edit \".concat(schedule.DAYOFWEEK),children:/*#__PURE__*/_jsx(PencilIcon,{className:\"h-3 w-3\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(schedule.SCHEDULEID),className:\"text-gray-400 hover:text-red-600 p-0.5 rounded\",title:\"Delete \".concat(schedule.DAYOFWEEK),children:/*#__PURE__*/_jsx(TrashIcon,{className:\"h-3 w-3\"})})]})]},schedule.SCHEDULEID))})]})]},\"timeslot-\".concat(timeSlotIndex)))}),group.time_slots.length>2&&/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mt-2 text-xs text-gray-400\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center space-x-1\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u2191 Scroll up/down to see all \",group.time_slots.length,\" time slots \\u2193\"]})})})]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{var _group$time_slots$4;return handleManageEnrollment((_group$time_slots$4=group.time_slots[0])===null||_group$time_slots$4===void 0?void 0:_group$time_slots$4.schedules[0]);},className:\"w-full inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(UserGroupIcon,{className:\"h-4 w-4 mr-2\"}),\"Manage Enrollment\"]})]},\"group-\".concat(group.subject_id,\"-\").concat(groupIndex)))}),scheduleGroups.length===0&&!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No schedules\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Get started by creating a new schedule.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{console.log('Empty state Add Schedule button clicked');setEditingSchedule(null);setShowModal(true);},className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Add Schedule\"]})})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:editingSchedule?'Edit Schedule':'Add New Schedule'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Subject\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.subject_id,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{subject_id:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Subject\"}),subjects.map(subject=>/*#__PURE__*/_jsxs(\"option\",{value:subject.SUBJECTID,children:[subject.SUBJECTCODE,\" - \",subject.SUBJECTNAME]},subject.SUBJECTID))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Room\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.room_id,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{room_id:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Room\"}),rooms.map(room=>/*#__PURE__*/_jsxs(\"option\",{value:room.ROOMID,children:[room.ROOMNUMBER,\" - \",room.ROOMNAME]},room.ROOMID))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border border-gray-200 rounded-lg p-4 bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:[\"Schedule Time Slots \",!editingSchedule&&/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 text-xs\",children:\"(add multiple time slots for the same subject)\"})]}),!editingSchedule&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:addTimeSlot,className:\"inline-flex items-center px-3 py-1 border border-green-300 shadow-sm text-xs font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 transition-colors\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-3 w-3 mr-1\"}),\"Add Time Slot\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:formData.time_slots.map((timeSlot,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(index>0?'border-t border-gray-300 pt-6':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-medium text-gray-700\",children:[\"Time Slot \",index+1]}),!editingSchedule&&formData.time_slots.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removeTimeSlot(timeSlot.id),className:\"text-red-400 hover:text-red-600 p-1\",title:\"Remove this time slot\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-4 w-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:[\"Select Days \",editingSchedule&&/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 text-xs\",children:\"(Edit mode: select one day only)\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 sm:grid-cols-7 gap-2\",children:daysOfWeek.map(day=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{console.log('Day clicked:',day);console.log('editingSchedule:',editingSchedule);console.log('Form data time slots:',formData.time_slots);if(editingSchedule){console.log('EDIT MODE: Setting single day');// In edit mode, only allow single day selection (radio button behavior)\nsetFormData(prev=>_objectSpread(_objectSpread({},prev),{},{time_slots:prev.time_slots.map(slot=>slot.id===timeSlot.id?_objectSpread(_objectSpread({},slot),{},{selected_days:[day]}):slot)}));}else{console.log('CREATE MODE: Toggling day');// In create mode, allow multiple day selection (toggle behavior)\ntoggleDaySelection(timeSlot.id,day);}},className:\"px-3 py-2 text-sm font-medium rounded-lg border transition-all duration-200 \".concat(timeSlot.selected_days.includes(day)?'bg-blue-600 text-white border-blue-600 shadow-md transform scale-105':'bg-white text-gray-700 border-gray-300 hover:border-blue-400 hover:bg-blue-50 hover:text-blue-600'),children:day.substring(0,3)},day))}),timeSlot.selected_days.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-sm text-gray-600\",children:[\"Selected: \",timeSlot.selected_days.join(', '),editingSchedule&&timeSlot.selected_days.length>1&&/*#__PURE__*/_jsx(\"span\",{className:\"text-orange-600 ml-2\",children:\"(Edit mode: only the first day will be saved)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Start Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:timeSlot.start_time,onChange:e=>updateTimeSlot(timeSlot.id,'start_time',e.target.value),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"End Time\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:timeSlot.end_time,onChange:e=>updateTimeSlot(timeSlot.id,'end_time',e.target.value),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true})]})]})]},timeSlot.id))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Academic Year\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.academic_year,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{academic_year:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",placeholder:\"2024-2025\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700\",children:\"Semester\"}),/*#__PURE__*/_jsx(\"select\",{value:formData.semester,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{semester:e.target.value})),className:\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\",required:true,children:semesters.map(semester=>/*#__PURE__*/_jsx(\"option\",{value:semester,children:semester},semester))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setShowModal(false);setEditingSchedule(null);resetForm();},className:\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700\",children:editingSchedule?'Update':'Create'})]})]})]})})}),showEnrollModal&&selectedSchedule&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative top-10 mx-auto p-6 border max-w-6xl shadow-lg rounded-md bg-white my-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-semibold text-gray-900\",children:[\"Manage Enrollment - \",selectedSchedule.subject_code]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[selectedSchedule.subject_name,\" \\u2022 \",selectedSchedule.instructor_name]}),enrollmentData&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-blue-600 mt-1\",children:[enrollmentData.statistics.totalEnrolled,\" enrolled \\u2022 \",enrollmentData.statistics.totalAvailable,\" available\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowEnrollModal(false),className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(XMarkIcon,{className:\"h-6 w-6\"})})]}),enrollmentLoading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"})}):enrollmentData?/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mb-4\",children:/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-medium text-gray-900\",children:[\"Enrolled Students (\",enrollmentData.enrolled.length,\")\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search enrolled students...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto space-y-2\",children:filteredEnrolledStudents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8\",children:\"No enrolled students found\"}):filteredEnrolledStudents.map(student=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg p-3 border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 h-8 w-8 bg-green-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(AcademicCapIcon,{className:\"h-4 w-4 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:student.student_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[student.STUDENTID,\" \\u2022 Year \",student.YEARLEVEL,\" \\u2022 \",student.DEPARTMENT]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:student.EMAIL})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveStudent(student.USERID,student.student_name),className:\"text-red-600 hover:text-red-800 p-1\",title:\"Remove student\",children:/*#__PURE__*/_jsx(UserMinusIcon,{className:\"h-4 w-4\"})})]})},student.USERID))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-medium text-gray-900\",children:[\"Available Students (\",enrollmentData.available.length,\")\"]}),selectedStudents.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[selectedStudents.length,\" selected\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleEnrollStudents,className:\"inline-flex items-center px-3 py-1 text-xs font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(UserPlusIcon,{className:\"h-3 w-3 mr-1\"}),\"Enroll Selected\"]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search available students...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-96 overflow-y-auto space-y-2\",children:filteredAvailableStudents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8\",children:\"No available students found\"}):filteredAvailableStudents.map(student=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg p-3 border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(AcademicCapIcon,{className:\"h-4 w-4 text-gray-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:student.student_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[student.STUDENTID,\" \\u2022 Year \",student.YEARLEVEL,\" \\u2022 \",student.DEPARTMENT]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:student.EMAIL})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStudentSelection(student.USERID),className:\"p-1 rounded \".concat(selectedStudents.includes(student.USERID)?'text-blue-600 bg-blue-100':'text-gray-400 hover:text-blue-600'),title:selectedStudents.includes(student.USERID)?'Deselect':'Select to enroll',children:selectedStudents.includes(student.USERID)?/*#__PURE__*/_jsx(CheckIcon,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(UserPlusIcon,{className:\"h-4 w-4\"})})]})},student.USERID))})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"Failed to load enrollment data\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>fetchEnrollmentData(selectedSchedule.SCHEDULEID),className:\"mt-2 text-blue-600 hover:text-blue-800\",children:\"Retry\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowEnrollModal(false),className:\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\",children:\"Close\"})})]})}),showDeleteModal&&deleteData&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 overflow-y-auto z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ease-in-out \".concat(modalAnimation==='visible'?'opacity-100':'opacity-0'),children:/*#__PURE__*/_jsx(\"div\",{className:\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all duration-300 ease-out sm:my-8 sm:w-full sm:max-w-lg \".concat(modalAnimation==='visible'?'scale-100 opacity-100 translate-y-0':'scale-95 opacity-0 translate-y-4'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-red-50 to-red-100 px-6 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 shadow-lg mb-4 animate-pulse\",children:/*#__PURE__*/_jsx(ExclamationTriangleIcon,{className:\"h-8 w-8 text-red-600\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:deleteData.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 leading-relaxed\",children:deleteData.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 space-y-3 space-y-reverse sm:space-y-0\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setModalAnimation('hidden');setTimeout(()=>{setShowDeleteModal(false);setDeleteData(null);},300);},className:\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 ease-in-out transform hover:scale-105\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:confirmDelete,className:\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-xl text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg\",children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"h-4 w-4 mr-2\"}),deleteData.confirmText]})]})]})})})})]});}export default Schedules;","map":{"version":3,"names":["React","useState","useEffect","PlusIcon","PencilIcon","TrashIcon","ClockIcon","UserGroupIcon","XMarkIcon","MagnifyingGlassIcon","UserPlusIcon","UserMinusIcon","AcademicCapIcon","CheckIcon","ExclamationTriangleIcon","toast","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","defaults","baseURL","Schedules","_enrollmentData$avail","_enrollmentData$enrol","schedules","setSchedules","subjects","setsubjects","instructors","setInstructors","rooms","setRooms","students","setStudents","loading","setLoading","showModal","setShowModal","editingSchedule","setEditingSchedule","showEnrollModal","setShowEnrollModal","selectedSchedule","setSelectedSchedule","enrollmentData","setEnrollmentData","enrollmentLoading","setEnrollmentLoading","searchTerm","setSearchTerm","selectedStudents","setSelectedStudents","showAddStudents","setShowAddStudents","showDeleteModal","setShowDeleteModal","deleteData","setDeleteData","modalAnimation","setModalAnimation","formData","setFormData","subject_id","room_id","academic_year","semester","time_slots","id","selected_days","start_time","end_time","scheduleGroups","setScheduleGroups","daysOfWeek","semesters","toggleDaySelection","timeSlotId","day","console","log","prev","_prev$time_slots$find","_newState$time_slots$","find","s","newState","_objectSpread","map","slot","includes","filter","d","addTimeSlot","newId","Math","max","removeTimeSlot","length","updateTimeSlot","field","value","groupSchedulesBySubject","schedulesList","groups","forEach","schedule","key","concat","SUBJECTID","subject_code","subject_name","instructor_name","ACADEMICYEAR","SEMESTER","push","Object","values","group","timeSlotGroups","timeKey","STARTTIME","ENDTIME","ROOMID","room_number","room_name","days","DAYOFWEEK","dayOrder","timeSlot","sort","a","b","indexOf","fetchData","resetForm","token","localStorage","getItem","error","headers","Authorization","schedulesRes","subjectsRes","instructorsRes","roomsRes","studentsRes","Promise","all","get","data","users","_error$response","response","status","removeItem","window","location","href","fetchEnrollmentData","scheduleId","handleSubmit","e","preventDefault","validTimeSlots","invalidTimeSlots","invalidEditSlots","firstTimeSlot","updateData","day_of_week","put","SCHEDULEID","success","promises","scheduleData","post","results","allSettled","failures","result","successes","errorMessages","failure","_failure$reason","_failure$reason$respo","_failure$reason$respo2","_failure$reason2","reason","message","failedDays","_failure$reason3","_failure$reason3$conf","requestData","config","parsedData","JSON","parse","join","slice","totalSchedules","reduce","sum","_error$response2","_error$response2$data","handleEdit","substring","handleDelete","type","title","confirmText","setTimeout","confirmDelete","delete","daysCount","studentId","handleManageEnrollment","handleEnrollStudents","studentIds","errors","handleRemoveStudent","studentName","handleStudentSelection","formatTime","time","hours","minutes","split","hour","parseInt","ampm","displayHour","filteredAvailableStudents","available","student","_student$STUDENTID","student_name","toLowerCase","EMAIL","STUDENTID","filteredEnrolledStudents","enrolled","_student$STUDENTID2","className","children","onClick","groupIndex","_group$time_slots$","_group$time_slots$2","_group$time_slots$3","dayIndex","style","scrollbarWidth","scrollbarColor","timeSlotIndex","_group$time_slots$4","onSubmit","onChange","target","required","subject","SUBJECTCODE","SUBJECTNAME","room","ROOMNUMBER","ROOMNAME","index","placeholder","statistics","totalEnrolled","totalAvailable","YEARLEVEL","DEPARTMENT","USERID"],"sources":["C:/Users/Harley/Desktop/Capstone/attendanceiot/IOTCapstone/frontend/src/pages/Schedules.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  PlusIcon, \n  PencilIcon, \n  TrashIcon, \n  ClockIcon, \n  UserGroupIcon, \n  XMarkIcon,\n  MagnifyingGlassIcon,\n  UserPlusIcon,\n  UserMinusIcon,\n  AcademicCapIcon,\n  CheckIcon,\n  ExclamationTriangleIcon\n} from '@heroicons/react/24/outline';\nimport toast from 'react-hot-toast';\nimport axios from 'axios';\n\n// Set up axios defaults\naxios.defaults.baseURL = 'http://localhost:5000';\n\nfunction Schedules() {\n  const [schedules, setSchedules] = useState([]);\n  const [subjects, setsubjects] = useState([]);\n  const [instructors, setInstructors] = useState([]);\n  const [rooms, setRooms] = useState([]);\n  const [students, setStudents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingSchedule, setEditingSchedule] = useState(null);\n  const [showEnrollModal, setShowEnrollModal] = useState(false);\n  const [selectedSchedule, setSelectedSchedule] = useState(null);\n  const [enrollmentData, setEnrollmentData] = useState(null);\n  const [enrollmentLoading, setEnrollmentLoading] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedStudents, setSelectedStudents] = useState([]);\n  const [showAddStudents, setShowAddStudents] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [deleteData, setDeleteData] = useState(null);\n  const [modalAnimation, setModalAnimation] = useState('hidden');\n\n  const [formData, setFormData] = useState({\n    subject_id: '',\n    room_id: '',\n    academic_year: '2024-2025',\n    semester: 'First Semester',\n    time_slots: [\n      {\n        id: 1,\n        selected_days: [],\n        start_time: '',\n        end_time: ''\n      }\n    ]\n  });\n  \n  const [scheduleGroups, setScheduleGroups] = useState([]);\n\n  const daysOfWeek = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\n  const semesters = ['First Semester', 'Second Semester', 'Summer'];\n  \n  // Helper function to toggle day selection for a specific time slot\n  const toggleDaySelection = (timeSlotId, day) => {\n    console.log('toggleDaySelection called with:', { timeSlotId, day });\n    setFormData(prev => {\n      console.log('Before toggle - selected_days:', prev.time_slots.find(s => s.id === timeSlotId)?.selected_days);\n      const newState = {\n        ...prev,\n        time_slots: prev.time_slots.map(slot => \n          slot.id === timeSlotId \n            ? {\n                ...slot,\n                selected_days: slot.selected_days.includes(day)\n                  ? slot.selected_days.filter(d => d !== day)\n                  : [...slot.selected_days, day]\n              }\n            : slot\n        )\n      };\n      console.log('After toggle - selected_days:', newState.time_slots.find(s => s.id === timeSlotId)?.selected_days);\n      return newState;\n    });\n  };\n\n  // Helper function to add a new time slot\n  const addTimeSlot = () => {\n    const newId = Math.max(...formData.time_slots.map(slot => slot.id)) + 1;\n    setFormData(prev => ({\n      ...prev,\n      time_slots: [\n        ...prev.time_slots,\n        {\n          id: newId,\n          selected_days: [],\n          start_time: '',\n          end_time: ''\n        }\n      ]\n    }));\n  };\n\n  // Helper function to remove a time slot\n  const removeTimeSlot = (timeSlotId) => {\n    if (formData.time_slots.length > 1) {\n      setFormData(prev => ({\n        ...prev,\n        time_slots: prev.time_slots.filter(slot => slot.id !== timeSlotId)\n      }));\n    }\n  };\n\n  // Helper function to update time slot data\n  const updateTimeSlot = (timeSlotId, field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      time_slots: prev.time_slots.map(slot =>\n        slot.id === timeSlotId\n          ? { ...slot, [field]: value }\n          : slot\n      )\n    }));\n  };\n  \n  // Helper function to group schedules by SUBJECT ONLY\n  const groupSchedulesBySubject = (schedulesList) => {\n    const groups = {};\n    schedulesList.forEach(schedule => {\n      // Create a key that includes ONLY subject info\n      const key = `${schedule.SUBJECTID}-${schedule.subject_code}-${schedule.subject_name}`;\n      if (!groups[key]) {\n        groups[key] = {\n          subject_id: schedule.SUBJECTID,\n          subject_code: schedule.subject_code,\n          subject_name: schedule.subject_name,\n          instructor_name: schedule.instructor_name,\n          academic_year: schedule.ACADEMICYEAR,\n          semester: schedule.SEMESTER,\n          schedules: [] // Keep original schedules for management\n        };\n      }\n      groups[key].schedules.push(schedule);\n    });\n    \n    // Group schedules within each subject by time slots\n    Object.values(groups).forEach(group => {\n      const timeSlotGroups = {};\n      group.schedules.forEach(schedule => {\n        const timeKey = `${schedule.STARTTIME}-${schedule.ENDTIME}-${schedule.ROOMID}`;\n        if (!timeSlotGroups[timeKey]) {\n          timeSlotGroups[timeKey] = {\n            start_time: schedule.STARTTIME,\n            end_time: schedule.ENDTIME,\n            room_id: schedule.ROOMID,\n            room_number: schedule.room_number,\n            room_name: schedule.room_name,\n            days: [],\n            schedules: []\n          };\n        }\n        timeSlotGroups[timeKey].days.push(schedule.DAYOFWEEK);\n        timeSlotGroups[timeKey].schedules.push(schedule);\n      });\n      \n      // Sort days in each time slot by weekday order\n      const dayOrder = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\n      Object.values(timeSlotGroups).forEach(timeSlot => {\n        timeSlot.days.sort((a, b) => dayOrder.indexOf(a) - dayOrder.indexOf(b));\n      });\n      \n      group.time_slots = Object.values(timeSlotGroups);\n    });\n    \n    return Object.values(groups);\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  // Reset form when modal opens for creating new schedule\n  useEffect(() => {\n    if (showModal && !editingSchedule) {\n      console.log('Modal opened for creating new schedule - resetting form');\n      resetForm();\n    }\n  }, [showModal, editingSchedule]);\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        toast.error('Please login to access schedules');\n        return;\n      }\n\n      const headers = { Authorization: `Bearer ${token}` };\n\n      // Fetch all data in parallel\n      const [schedulesRes, subjectsRes, instructorsRes, roomsRes, studentsRes] = await Promise.all([\n        axios.get('/api/schedules', { headers }),\n        axios.get('/api/subjects', { headers }),\n        axios.get('/api/users?type=instructor', { headers }),\n        axios.get('/api/rooms', { headers }),\n        axios.get('/api/users?type=student', { headers })\n      ]);\n\n      const schedulesList = schedulesRes.data.schedules || [];\n      setSchedules(schedulesList);\n      setScheduleGroups(groupSchedulesBySubject(schedulesList));\n      setsubjects(subjectsRes.data.subjects || []);\n      setInstructors(instructorsRes.data.users || []);\n      setRooms(roomsRes.data.rooms || []);\n      setStudents(studentsRes.data.users || []);\n\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      if (error.response?.status === 401) {\n        toast.error('Session expired. Please login again.');\n        localStorage.removeItem('token');\n        window.location.href = '/login';\n      } else {\n        toast.error('Failed to load data');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchEnrollmentData = async (scheduleId) => {\n    try {\n      setEnrollmentLoading(true);\n      const token = localStorage.getItem('token');\n      const headers = { Authorization: `Bearer ${token}` };\n\n      const response = await axios.get(`/api/enrollment/schedule/${scheduleId}`, { headers });\n      setEnrollmentData(response.data);\n    } catch (error) {\n      console.error('Error fetching enrollment data:', error);\n      toast.error('Failed to load enrollment data');\n    } finally {\n      setEnrollmentLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Validate that at least one time slot has selected days\n    const validTimeSlots = formData.time_slots.filter(slot => slot.selected_days.length > 0);\n    if (validTimeSlots.length === 0) {\n      toast.error('Please select at least one day in at least one time slot');\n      return;\n    }\n\n    // Validate that all time slots with selected days have times\n    const invalidTimeSlots = validTimeSlots.filter(slot => !slot.start_time || !slot.end_time);\n    if (invalidTimeSlots.length > 0) {\n      toast.error('Please set start and end times for all time slots with selected days');\n      return;\n    }\n\n    // In edit mode, ensure only one day is selected\n    if (editingSchedule) {\n      const invalidEditSlots = validTimeSlots.filter(slot => slot.selected_days.length !== 1);\n      if (invalidEditSlots.length > 0) {\n        toast.error('In edit mode, please select exactly one day per time slot');\n        return;\n      }\n    }\n    \n    try {\n      const token = localStorage.getItem('token');\n      const headers = { Authorization: `Bearer ${token}` };\n\n      if (editingSchedule) {\n        // Update existing schedule (use first time slot for editing)\n        const firstTimeSlot = validTimeSlots[0];\n        const updateData = {\n          subject_id: formData.subject_id,\n          room_id: formData.room_id,\n          day_of_week: firstTimeSlot.selected_days[0],\n          start_time: firstTimeSlot.start_time,\n          end_time: firstTimeSlot.end_time,\n          academic_year: formData.academic_year,\n          semester: formData.semester\n        };\n        await axios.put(`/api/schedules/${editingSchedule.SCHEDULEID}`, updateData, { headers });\n        toast.success('Schedule updated successfully');\n      } else {\n        // Create new schedules for each time slot and each day\n        const promises = [];\n        \n        validTimeSlots.forEach(timeSlot => {\n          timeSlot.selected_days.forEach(day => {\n            const scheduleData = {\n              subject_id: formData.subject_id,\n              room_id: formData.room_id,\n              day_of_week: day,\n              start_time: timeSlot.start_time,\n              end_time: timeSlot.end_time,\n              academic_year: formData.academic_year,\n              semester: formData.semester\n            };\n            promises.push(axios.post('/api/schedules', scheduleData, { headers }));\n          });\n        });\n        \n        const results = await Promise.allSettled(promises);\n        \n        // Check for any failures\n        const failures = results.filter(result => result.status === 'rejected');\n        const successes = results.filter(result => result.status === 'fulfilled');\n        \n        if (failures.length > 0) {\n          console.error('Some schedules failed to create:', failures);\n          const errorMessages = failures.map(failure => failure.reason?.response?.data?.message || failure.reason?.message || 'Unknown error');\n          const failedDays = failures.map(failure => {\n            const requestData = failure.reason?.config?.data;\n            if (requestData) {\n              const parsedData = JSON.parse(requestData);\n              return parsedData.day_of_week;\n            }\n            return 'Unknown day';\n          });\n          toast.error(`${failures.length} schedule(s) failed for days: ${failedDays.join(', ')}. Errors: ${errorMessages.slice(0, 2).join(', ')}`);\n        }\n        \n        const totalSchedules = validTimeSlots.reduce((sum, slot) => sum + slot.selected_days.length, 0);\n        if (successes.length > 0) {\n          toast.success(`${successes.length} schedule(s) created successfully out of ${totalSchedules} total`);\n        }\n      }\n\n      await fetchData(); // Refresh data\n      setShowModal(false);\n      resetForm();\n      setEditingSchedule(null);\n    } catch (error) {\n      console.error('Error saving schedule:', error);\n      if (error.response?.data?.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error('Failed to save schedule');\n      }\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({\n      subject_id: '',\n      room_id: '',\n      academic_year: '2024-2025',\n      semester: 'First Semester',\n      time_slots: [\n        {\n          id: 1,\n          selected_days: [],\n          start_time: '',\n          end_time: ''\n        }\n      ]\n    });\n  };\n\n  const handleEdit = (schedule) => {\n    setEditingSchedule(schedule);\n    setFormData({\n      subject_id: schedule.SUBJECTID || '',\n      room_id: schedule.ROOMID || '',\n      academic_year: schedule.ACADEMICYEAR || '2024-2025',\n      semester: schedule.SEMESTER || 'First Semester',\n      time_slots: [\n        {\n          id: 1,\n          selected_days: [schedule.DAYOFWEEK || 'Monday'],\n          start_time: schedule.STARTTIME ? schedule.STARTTIME.substring(0, 5) : '',\n          end_time: schedule.ENDTIME ? schedule.ENDTIME.substring(0, 5) : ''\n        }\n      ]\n    });\n    setShowModal(true);\n  };\n\n  const handleDelete = async (scheduleId) => {\n    setDeleteData({\n      type: 'schedule',\n      id: scheduleId,\n      title: 'Delete Schedule',\n      message: 'Are you sure you want to delete this schedule? This action cannot be undone.',\n      confirmText: 'Delete Schedule'\n    });\n    setShowDeleteModal(true);\n    setTimeout(() => setModalAnimation('visible'), 10);\n  };\n\n  const confirmDelete = async () => {\n    if (!deleteData) return;\n\n    try {\n      const token = localStorage.getItem('token');\n      const headers = { Authorization: `Bearer ${token}` };\n      \n      if (deleteData.type === 'schedule') {\n        await axios.delete(`/api/schedules/${deleteData.id}`, { headers });\n        toast.success('Schedule deleted successfully');\n      } else if (deleteData.type === 'timeSlot') {\n        await Promise.all(\n          deleteData.schedules.map(schedule => \n            axios.delete(`/api/schedules/${schedule.SCHEDULEID}`, { headers })\n          )\n        );\n        toast.success(`Time slot deleted (${deleteData.daysCount} day(s))`);\n      } else if (deleteData.type === 'student') {\n        await axios.delete(\n          `/api/enrollment/schedule/${deleteData.scheduleId}/student/${deleteData.studentId}`,\n          { headers }\n        );\n        toast.success('Student removed successfully');\n      }\n      \n      await fetchData(); // Refresh data\n      if (deleteData.type === 'student') {\n        await fetchEnrollmentData(selectedSchedule.SCHEDULEID);\n      }\n    } catch (error) {\n      console.error('Error deleting:', error);\n      if (deleteData.type === 'student') {\n        toast.error('Failed to remove student');\n      } else {\n        toast.error('Failed to delete schedule');\n      }\n    } finally {\n      setModalAnimation('hidden');\n      setTimeout(() => {\n        setShowDeleteModal(false);\n        setDeleteData(null);\n      }, 300);\n    }\n  };\n\n  const handleManageEnrollment = async (schedule) => {\n    setSelectedSchedule(schedule);\n    setShowEnrollModal(true);\n    setSearchTerm('');\n    setSelectedStudents([]);\n    setShowAddStudents(false);\n    await fetchEnrollmentData(schedule.SCHEDULEID);\n  };\n\n  const handleEnrollStudents = async () => {\n    if (selectedStudents.length === 0) {\n      toast.error('Please select students to enroll');\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      const headers = { Authorization: `Bearer ${token}` };\n\n      const response = await axios.post(\n        `/api/enrollment/schedule/${selectedSchedule.SCHEDULEID}/enroll`,\n        { studentIds: selectedStudents },\n        { headers }\n      );\n\n      if (response.data.errors && response.data.errors.length > 0) {\n        toast.error(`Some enrollments failed: ${response.data.errors.slice(0, 2).join(', ')}`);\n      } else {\n        toast.success(response.data.message);\n      }\n\n      setSelectedStudents([]);\n      setShowAddStudents(false);\n      await fetchEnrollmentData(selectedSchedule.SCHEDULEID);\n    } catch (error) {\n      console.error('Error enrolling students:', error);\n      toast.error('Failed to enroll students');\n    }\n  };\n\n  const handleRemoveStudent = (studentId, studentName) => {\n    setDeleteData({\n      type: 'student',\n      studentId: studentId,\n      scheduleId: selectedSchedule.SCHEDULEID,\n      studentName: studentName,\n      title: 'Remove Student',\n      message: `Are you sure you want to remove ${studentName} from this subject? This action cannot be undone.`,\n      confirmText: 'Remove Student'\n    });\n    setShowDeleteModal(true);\n    setTimeout(() => setModalAnimation('visible'), 10);\n  };\n\n  const handleStudentSelection = (studentId) => {\n    setSelectedStudents(prev => \n      prev.includes(studentId) \n        ? prev.filter(id => id !== studentId)\n        : [...prev, studentId]\n    );\n  };\n\n  const formatTime = (time) => {\n    if (!time) return '';\n    const [hours, minutes] = time.split(':');\n    const hour = parseInt(hours);\n    const ampm = hour >= 12 ? 'PM' : 'AM';\n    const displayHour = hour % 12 || 12;\n    return `${displayHour}:${minutes} ${ampm}`;\n  };\n\n  const filteredAvailableStudents = enrollmentData?.available?.filter(student =>\n    student.student_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    student.EMAIL.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    student.STUDENTID?.toLowerCase().includes(searchTerm.toLowerCase())\n  ) || [];\n\n  const filteredEnrolledStudents = enrollmentData?.enrolled?.filter(student =>\n    student.student_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    student.EMAIL.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    student.STUDENTID?.toLowerCase().includes(searchTerm.toLowerCase())\n  ) || [];\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex justify-between items-center\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Schedule Management</h1>\n          <p className=\"text-gray-600\">Manage class schedules, subjects, and enrollment</p>\n        </div>\n        <button\n          onClick={() => {\n            console.log('Add Schedule button clicked');\n            setEditingSchedule(null);\n            setShowModal(true);\n          }}\n          className=\"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700\"\n        >\n          <PlusIcon className=\"h-4 w-4 mr-2\" />\n          Add Schedule\n        </button>\n      </div>\n\n      {/* Schedule Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {scheduleGroups.map((group, groupIndex) => (\n          <div key={`group-${group.subject_id}-${groupIndex}`} className=\"bg-white rounded-lg shadow border border-gray-200 p-6\">\n            <div className=\"flex justify-between items-start mb-4\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900\">{group.subject_code}</h3>\n                <p className=\"text-sm text-gray-600\">{group.subject_name}</p>\n                <p className=\"text-xs text-gray-500 mt-1\">\n                  <strong>Instructor:</strong> {group.instructor_name || 'Not assigned'}\n                </p>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => {\n                    setFormData({\n                      subject_id: group.subject_id,\n                      room_id: group.time_slots[0]?.room_id || '',\n                      academic_year: group.academic_year || '2024-2025',\n                      semester: group.semester || 'First Semester',\n                      time_slots: [\n                        {\n                          id: 1,\n                          selected_days: [],\n                          start_time: group.time_slots[0]?.start_time ? group.time_slots[0].start_time.substring(0, 5) : '',\n                          end_time: group.time_slots[0]?.end_time ? group.time_slots[0].end_time.substring(0, 5) : ''\n                        }\n                      ]\n                    });\n                    setEditingSchedule(null);\n                    setShowModal(true);\n                  }}\n                  className=\"text-green-500 hover:text-green-700 p-1 rounded-md hover:bg-green-50\"\n                  title=\"Add more days to this time slot\"\n                >\n                  <PlusIcon className=\"h-4 w-4\" />\n                </button>\n              </div>\n            </div>\n\n            <div className=\"mb-4 relative\">\n              {group.time_slots.length === 1 ? (\n                /* Compact layout for single time slot */\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center text-sm text-gray-700\">\n                      <ClockIcon className=\"h-4 w-4 mr-2 text-blue-500\" />\n                      <span className=\"font-medium\">{formatTime(group.time_slots[0].start_time)} - {formatTime(group.time_slots[0].end_time)}</span>\n                    </div>\n                    <div className=\"flex space-x-1\">\n                      <button\n                        onClick={() => handleEdit(group.time_slots[0].schedules[0])}\n                        className=\"text-gray-400 hover:text-blue-600 p-1 rounded\"\n                        title=\"Edit this schedule\"\n                      >\n                        <PencilIcon className=\"h-3 w-3\" />\n                      </button>\n                      <button\n                        onClick={() => handleDelete(group.time_slots[0].schedules[0].SCHEDULEID)}\n                        className=\"text-gray-400 hover:text-red-600 p-1 rounded\"\n                        title=\"Delete this schedule\"\n                      >\n                        <TrashIcon className=\"h-3 w-3\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex flex-wrap gap-1\">\n                    {group.time_slots[0].days.map((day, dayIndex) => (\n                      <span \n                        key={`${day}-${dayIndex}`}\n                        className=\"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-md\"\n                      >\n                        {day}\n                      </span>\n                    ))}\n                  </div>\n                  \n                  <div className=\"text-xs text-gray-600 space-y-1\">\n                    <div><strong>Room:</strong> {group.time_slots[0].room_number} - {group.time_slots[0].room_name}</div>\n                    <div><strong>Semester:</strong> {group.semester} ({group.academic_year})</div>\n                  </div>\n                  \n                  {/* Collapsible individual day management for single time slot */}\n                  {group.time_slots[0].schedules.length > 1 && (\n                    <details className=\"mt-2\">\n                      <summary className=\"text-xs text-gray-500 cursor-pointer hover:text-gray-700\">\n                        Manage individual days ({group.time_slots[0].schedules.length})\n                      </summary>\n                      <div className=\"mt-2 space-y-1\">\n                        {group.time_slots[0].schedules.map((schedule) => (\n                          <div key={schedule.SCHEDULEID} className=\"flex justify-between items-center py-1 px-2 bg-gray-50 rounded border\">\n                            <span className=\"text-xs text-gray-600\">{schedule.DAYOFWEEK}</span>\n                            <div className=\"flex space-x-1\">\n                              <button\n                                onClick={() => handleEdit(schedule)}\n                                className=\"text-gray-400 hover:text-blue-600 p-0.5 rounded\"\n                                title={`Edit ${schedule.DAYOFWEEK}`}\n                              >\n                                <PencilIcon className=\"h-3 w-3\" />\n                              </button>\n                              <button\n                                onClick={() => handleDelete(schedule.SCHEDULEID)}\n                                className=\"text-gray-400 hover:text-red-600 p-0.5 rounded\"\n                                title={`Delete ${schedule.DAYOFWEEK}`}\n                              >\n                                <TrashIcon className=\"h-3 w-3\" />\n                              </button>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </details>\n                  )}\n                </div>\n              ) : (\n                /* Full layout for multiple time slots with scrolling */\n                <>\n                  {/* Scroll indicator at top */}\n                  {group.time_slots.length > 2 && (\n                    <div className=\"flex items-center justify-center mb-2 text-xs text-gray-500\">\n                      <div className=\"flex items-center space-x-1\">\n                        <div className=\"w-2 h-2 bg-gray-300 rounded-full animate-pulse\"></div>\n                        <span>Multiple time slots - scroll to see all</span>\n                        <div className=\"w-2 h-2 bg-gray-300 rounded-full animate-pulse\"></div>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {/* Scrollable container for time slots */}\n                  <div \n                    className={`space-y-4 ${group.time_slots.length > 2 ? 'max-h-96 overflow-y-auto pr-2' : ''}`}\n                    style={group.time_slots.length > 2 ? {\n                      scrollbarWidth: 'thin',\n                      scrollbarColor: '#d1d5db #f3f4f6'\n                    } : {}}\n                  >\n                    {group.time_slots.map((timeSlot, timeSlotIndex) => (\n                      <div key={`timeslot-${timeSlotIndex}`} className=\"border border-gray-200 rounded-md p-4 bg-gray-50 relative\">\n                        {/* Time slot number indicator for scrollable content */}\n                        {group.time_slots.length > 2 && (\n                          <div className=\"absolute -left-1 top-2 w-6 h-6 bg-blue-500 text-white text-xs rounded-full flex items-center justify-center font-medium shadow-sm\">\n                            {timeSlotIndex + 1}\n                          </div>\n                        )}\n                        \n                        <div className=\"flex justify-between items-start\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center text-sm text-gray-700 mb-2\">\n                              <ClockIcon className=\"h-4 w-4 mr-2 text-blue-500\" />\n                              <span className=\"font-medium\">{formatTime(timeSlot.start_time)} - {formatTime(timeSlot.end_time)}</span>\n                            </div>\n                            \n                            {/* Display days as badges */}\n                            <div className=\"flex flex-wrap gap-1 mb-2\">\n                              {timeSlot.days.map((day, dayIndex) => (\n                                <span \n                                  key={`${day}-${dayIndex}`}\n                                  className=\"inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-md\"\n                                >\n                                  {day}\n                                </span>\n                              ))}\n                            </div>\n                            \n                            <div className=\"text-xs text-gray-600\">\n                              <strong>Room:</strong> {timeSlot.room_number} - {timeSlot.room_name}\n                            </div>\n                            <div className=\"text-xs text-gray-600\">\n                              <strong>Semester:</strong> {group.semester} ({group.academic_year})\n                            </div>\n                          </div>\n                          \n                          <div className=\"flex space-x-1 ml-2\">\n                            {/* Edit first schedule in this time slot */}\n                            <button\n                              onClick={() => handleEdit(timeSlot.schedules[0])}\n                              className=\"text-gray-400 hover:text-blue-600 p-1 rounded\"\n                              title=\"Edit this time slot\"\n                            >\n                              <PencilIcon className=\"h-3 w-3\" />\n                            </button>\n                            \n                            {/* Delete all schedules in this time slot */}\n                            <button\n                              onClick={() => {\n                                setDeleteData({\n                                  type: 'timeSlot',\n                                  schedules: timeSlot.schedules,\n                                  daysCount: timeSlot.days.length,\n                                  title: 'Delete Time Slot',\n                                  message: `Are you sure you want to delete this time slot (${timeSlot.days.length} day(s))? This will remove all schedules for ${timeSlot.days.join(', ')}.`,\n                                  confirmText: 'Delete Time Slot'\n                                });\n                                setShowDeleteModal(true);\n                                setTimeout(() => setModalAnimation('visible'), 10);\n                              }}\n                              className=\"text-gray-400 hover:text-red-600 p-1 rounded\"\n                              title=\"Delete this time slot\"\n                            >\n                              <TrashIcon className=\"h-3 w-3\" />\n                            </button>\n                          </div>\n                        </div>\n                        \n                        {/* Individual day management (collapsible) */}\n                        <details className=\"mt-2\">\n                          <summary className=\"text-xs text-gray-500 cursor-pointer hover:text-gray-700\">\n                            Manage individual days ({timeSlot.schedules.length})\n                          </summary>\n                          <div className=\"mt-2 space-y-1\">\n                            {timeSlot.schedules.map((schedule) => (\n                              <div key={schedule.SCHEDULEID} className=\"flex justify-between items-center py-1 px-2 bg-white rounded border\">\n                                <span className=\"text-xs text-gray-600\">{schedule.DAYOFWEEK}</span>\n                                <div className=\"flex space-x-1\">\n                                  <button\n                                    onClick={() => handleEdit(schedule)}\n                                    className=\"text-gray-400 hover:text-blue-600 p-0.5 rounded\"\n                                    title={`Edit ${schedule.DAYOFWEEK}`}\n                                  >\n                                    <PencilIcon className=\"h-3 w-3\" />\n                                  </button>\n                                  <button\n                                    onClick={() => handleDelete(schedule.SCHEDULEID)}\n                                    className=\"text-gray-400 hover:text-red-600 p-0.5 rounded\"\n                                    title={`Delete ${schedule.DAYOFWEEK}`}\n                                  >\n                                    <TrashIcon className=\"h-3 w-3\" />\n                                  </button>\n                                </div>\n                              </div>\n                            ))}\n                          </div>\n                        </details>\n                      </div>\n                    ))}\n                  </div>\n                  \n                  {/* Scroll indicator at bottom */}\n                  {group.time_slots.length > 2 && (\n                    <div className=\"flex items-center justify-center mt-2 text-xs text-gray-400\">\n                      <div className=\"flex items-center space-x-1\">\n                        <span> Scroll up/down to see all {group.time_slots.length} time slots </span>\n                      </div>\n                    </div>\n                  )}\n                </>\n              )}\n            </div>\n\n            <button\n              onClick={() => handleManageEnrollment(group.time_slots[0]?.schedules[0])}\n              className=\"w-full inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50\"\n            >\n              <UserGroupIcon className=\"h-4 w-4 mr-2\" />\n              Manage Enrollment\n            </button>\n          </div>\n        ))}\n      </div>\n\n      {scheduleGroups.length === 0 && !loading && (\n        <div className=\"text-center py-12\">\n          <ClockIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No schedules</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">Get started by creating a new schedule.</p>\n          <div className=\"mt-6\">\n            <button\n              onClick={() => {\n                console.log('Empty state Add Schedule button clicked');\n                setEditingSchedule(null);\n                setShowModal(true);\n              }}\n              className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\n            >\n              <PlusIcon className=\"h-4 w-4 mr-2\" />\n              Add Schedule\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Add/Edit Schedule Modal */}\n      {showModal && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\n            <div className=\"mt-3\">\n              <h3 className=\"text-lg font-medium text-gray-900 mb-4\">\n                {editingSchedule ? 'Edit Schedule' : 'Add New Schedule'}\n              </h3>\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Subject</label>\n                  <select\n                    value={formData.subject_id}\n                    onChange={(e) => setFormData({ ...formData, subject_id: e.target.value })}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                    required\n                  >\n                    <option value=\"\">Select Subject</option>\n                    {subjects.map(subject => (\n                      <option key={subject.SUBJECTID} value={subject.SUBJECTID}>\n                        {subject.SUBJECTCODE} - {subject.SUBJECTNAME}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Room</label>\n                  <select\n                    value={formData.room_id}\n                    onChange={(e) => setFormData({ ...formData, room_id: e.target.value })}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                    required\n                  >\n                    <option value=\"\">Select Room</option>\n                    {rooms.map(room => (\n                      <option key={room.ROOMID} value={room.ROOMID}>\n                        {room.ROOMNUMBER} - {room.ROOMNAME}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n\n\n                {/* Dynamic Time Slots - Single Container */}\n                <div className=\"border border-gray-200 rounded-lg p-4 bg-gray-50\">\n                  <div className=\"flex justify-between items-center mb-4\">\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Schedule Time Slots {!editingSchedule && <span className=\"text-gray-500 text-xs\">(add multiple time slots for the same subject)</span>}\n                    </label>\n                    {!editingSchedule && (\n                      <button\n                        type=\"button\"\n                        onClick={addTimeSlot}\n                        className=\"inline-flex items-center px-3 py-1 border border-green-300 shadow-sm text-xs font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 transition-colors\"\n                      >\n                        <PlusIcon className=\"h-3 w-3 mr-1\" />\n                        Add Time Slot\n                      </button>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-6\">\n                    {formData.time_slots.map((timeSlot, index) => (\n                      <div key={timeSlot.id} className={`${index > 0 ? 'border-t border-gray-300 pt-6' : ''}`}>\n                        <div className=\"flex justify-between items-center mb-3\">\n                          <h4 className=\"text-sm font-medium text-gray-700\">\n                            Time Slot {index + 1}\n                          </h4>\n                          {!editingSchedule && formData.time_slots.length > 1 && (\n                            <button\n                              type=\"button\"\n                              onClick={() => removeTimeSlot(timeSlot.id)}\n                              className=\"text-red-400 hover:text-red-600 p-1\"\n                              title=\"Remove this time slot\"\n                            >\n                              <XMarkIcon className=\"h-4 w-4\" />\n                            </button>\n                          )}\n                        </div>\n\n                        {/* Days Selection */}\n                        <div className=\"mb-4\">\n                          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                            Select Days {editingSchedule && <span className=\"text-gray-500 text-xs\">(Edit mode: select one day only)</span>}\n                          </label>\n                          <div className=\"grid grid-cols-4 sm:grid-cols-7 gap-2\">\n                            {daysOfWeek.map(day => (\n                              <button\n                                key={day}\n                                type=\"button\"\n                                onClick={() => {\n                                  console.log('Day clicked:', day);\n                                  console.log('editingSchedule:', editingSchedule);\n                                  console.log('Form data time slots:', formData.time_slots);\n                                  \n                                  if (editingSchedule) {\n                                    console.log('EDIT MODE: Setting single day');\n                                    // In edit mode, only allow single day selection (radio button behavior)\n                                    setFormData(prev => ({\n                                      ...prev,\n                                      time_slots: prev.time_slots.map(slot => \n                                        slot.id === timeSlot.id \n                                          ? { ...slot, selected_days: [day] }\n                                          : slot\n                                      )\n                                    }));\n                                  } else {\n                                    console.log('CREATE MODE: Toggling day');\n                                    // In create mode, allow multiple day selection (toggle behavior)\n                                    toggleDaySelection(timeSlot.id, day);\n                                  }\n                                }}\n                                className={`px-3 py-2 text-sm font-medium rounded-lg border transition-all duration-200 ${\n                                  timeSlot.selected_days.includes(day)\n                                    ? 'bg-blue-600 text-white border-blue-600 shadow-md transform scale-105'\n                                    : 'bg-white text-gray-700 border-gray-300 hover:border-blue-400 hover:bg-blue-50 hover:text-blue-600'\n                                }`}\n                              >\n                                {day.substring(0, 3)}\n                              </button>\n                            ))}\n                          </div>\n                          {timeSlot.selected_days.length > 0 && (\n                            <div className=\"mt-2 text-sm text-gray-600\">\n                              Selected: {timeSlot.selected_days.join(', ')}\n                              {editingSchedule && timeSlot.selected_days.length > 1 && (\n                                <span className=\"text-orange-600 ml-2\">(Edit mode: only the first day will be saved)</span>\n                              )}\n                            </div>\n                          )}\n                        </div>\n\n                        {/* Time Selection */}\n                        <div className=\"grid grid-cols-2 gap-4\">\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700\">Start Time</label>\n                            <input\n                              type=\"time\"\n                              value={timeSlot.start_time}\n                              onChange={(e) => updateTimeSlot(timeSlot.id, 'start_time', e.target.value)}\n                              className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                              required\n                            />\n                          </div>\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700\">End Time</label>\n                            <input\n                              type=\"time\"\n                              value={timeSlot.end_time}\n                              onChange={(e) => updateTimeSlot(timeSlot.id, 'end_time', e.target.value)}\n                              className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                              required\n                            />\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Academic Year</label>\n                  <input\n                    type=\"text\"\n                    value={formData.academic_year}\n                    onChange={(e) => setFormData({ ...formData, academic_year: e.target.value })}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                    placeholder=\"2024-2025\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700\">Semester</label>\n                  <select\n                    value={formData.semester}\n                    onChange={(e) => setFormData({ ...formData, semester: e.target.value })}\n                    className=\"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2\"\n                    required\n                  >\n                    {semesters.map(semester => (\n                      <option key={semester} value={semester}>{semester}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div className=\"flex justify-end space-x-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setShowModal(false);\n                      setEditingSchedule(null);\n                      resetForm();\n                    }}\n                    className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700\"\n                  >\n                    {editingSchedule ? 'Update' : 'Create'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Enrollment Management Modal */}\n      {showEnrollModal && selectedSchedule && (\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\n          <div className=\"relative top-10 mx-auto p-6 border max-w-6xl shadow-lg rounded-md bg-white my-8\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <div>\n                <h3 className=\"text-xl font-semibold text-gray-900\">\n                  Manage Enrollment - {selectedSchedule.subject_code}\n                </h3>\n                <p className=\"text-sm text-gray-600\">\n                  {selectedSchedule.subject_name}  {selectedSchedule.instructor_name}\n                </p>\n                {enrollmentData && (\n                  <p className=\"text-sm text-blue-600 mt-1\">\n                    {enrollmentData.statistics.totalEnrolled} enrolled  {enrollmentData.statistics.totalAvailable} available\n                  </p>\n                )}\n              </div>\n              <button\n                onClick={() => setShowEnrollModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            {enrollmentLoading ? (\n              <div className=\"flex items-center justify-center h-64\">\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n              </div>\n            ) : enrollmentData ? (\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Enrolled Students */}\n                <div className=\"bg-gray-50 rounded-lg p-4\">\n                  <div className=\"flex justify-between items-center mb-4\">\n                    <h4 className=\"text-lg font-medium text-gray-900\">\n                      Enrolled Students ({enrollmentData.enrolled.length})\n                    </h4>\n                  </div>\n\n                  <div className=\"mb-4\">\n                    <div className=\"relative\">\n                      <MagnifyingGlassIcon className=\"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n                      <input\n                        type=\"text\"\n                        placeholder=\"Search enrolled students...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        className=\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"max-h-96 overflow-y-auto space-y-2\">\n                    {filteredEnrolledStudents.length === 0 ? (\n                      <p className=\"text-gray-500 text-center py-8\">No enrolled students found</p>\n                    ) : (\n                      filteredEnrolledStudents.map((student) => (\n                        <div key={student.USERID} className=\"bg-white rounded-lg p-3 border border-gray-200\">\n                          <div className=\"flex justify-between items-center\">\n                            <div className=\"flex items-center space-x-3\">\n                              <div className=\"flex-shrink-0 h-8 w-8 bg-green-100 rounded-full flex items-center justify-center\">\n                                <AcademicCapIcon className=\"h-4 w-4 text-green-600\" />\n                              </div>\n                              <div>\n                                <div className=\"text-sm font-medium text-gray-900\">{student.student_name}</div>\n                                <div className=\"text-xs text-gray-500\">\n                                  {student.STUDENTID}  Year {student.YEARLEVEL}  {student.DEPARTMENT}\n                                </div>\n                                <div className=\"text-xs text-gray-400\">{student.EMAIL}</div>\n                              </div>\n                            </div>\n                            <button\n                              onClick={() => handleRemoveStudent(student.USERID, student.student_name)}\n                              className=\"text-red-600 hover:text-red-800 p-1\"\n                              title=\"Remove student\"\n                            >\n                              <UserMinusIcon className=\"h-4 w-4\" />\n                            </button>\n                          </div>\n                        </div>\n                      ))\n                    )}\n                  </div>\n                </div>\n\n                {/* Available Students */}\n                <div className=\"bg-gray-50 rounded-lg p-4\">\n                  <div className=\"flex justify-between items-center mb-4\">\n                    <h4 className=\"text-lg font-medium text-gray-900\">\n                      Available Students ({enrollmentData.available.length})\n                    </h4>\n                    {selectedStudents.length > 0 && (\n                      <div className=\"flex space-x-2\">\n                        <span className=\"text-sm text-gray-600\">\n                          {selectedStudents.length} selected\n                        </span>\n                        <button\n                          onClick={handleEnrollStudents}\n                          className=\"inline-flex items-center px-3 py-1 text-xs font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700\"\n                        >\n                          <UserPlusIcon className=\"h-3 w-3 mr-1\" />\n                          Enroll Selected\n                        </button>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"mb-4\">\n                    <div className=\"relative\">\n                      <MagnifyingGlassIcon className=\"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n                      <input\n                        type=\"text\"\n                        placeholder=\"Search available students...\"\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        className=\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"max-h-96 overflow-y-auto space-y-2\">\n                    {filteredAvailableStudents.length === 0 ? (\n                      <p className=\"text-gray-500 text-center py-8\">No available students found</p>\n                    ) : (\n                      filteredAvailableStudents.map((student) => (\n                        <div key={student.USERID} className=\"bg-white rounded-lg p-3 border border-gray-200\">\n                          <div className=\"flex justify-between items-center\">\n                            <div className=\"flex items-center space-x-3\">\n                              <div className=\"flex-shrink-0 h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center\">\n                                <AcademicCapIcon className=\"h-4 w-4 text-gray-600\" />\n                              </div>\n                              <div>\n                                <div className=\"text-sm font-medium text-gray-900\">{student.student_name}</div>\n                                <div className=\"text-xs text-gray-500\">\n                                  {student.STUDENTID}  Year {student.YEARLEVEL}  {student.DEPARTMENT}\n                                </div>\n                                <div className=\"text-xs text-gray-400\">{student.EMAIL}</div>\n                              </div>\n                            </div>\n                            <button\n                              onClick={() => handleStudentSelection(student.USERID)}\n                              className={`p-1 rounded ${\n                                selectedStudents.includes(student.USERID)\n                                  ? 'text-blue-600 bg-blue-100'\n                                  : 'text-gray-400 hover:text-blue-600'\n                              }`}\n                              title={selectedStudents.includes(student.USERID) ? 'Deselect' : 'Select to enroll'}\n                            >\n                              {selectedStudents.includes(student.USERID) ? (\n                                <CheckIcon className=\"h-4 w-4\" />\n                              ) : (\n                                <UserPlusIcon className=\"h-4 w-4\" />\n                              )}\n                            </button>\n                          </div>\n                        </div>\n                      ))\n                    )}\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <p className=\"text-gray-500\">Failed to load enrollment data</p>\n                <button\n                  onClick={() => fetchEnrollmentData(selectedSchedule.SCHEDULEID)}\n                  className=\"mt-2 text-blue-600 hover:text-blue-800\"\n                >\n                  Retry\n                </button>\n              </div>\n            )}\n\n            <div className=\"mt-6 flex justify-end\">\n              <button\n                onClick={() => setShowEnrollModal(false)}\n                className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Delete Confirmation Modal */}\n      {showDeleteModal && deleteData && (\n        <div className=\"fixed inset-0 overflow-y-auto z-50\">\n          {/* Backdrop with blur and fade animation */}\n          <div className={`fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 ease-in-out ${\n            modalAnimation === 'visible' ? 'opacity-100' : 'opacity-0'\n          }`}>\n            <div className=\"flex min-h-full items-center justify-center p-4 text-center sm:p-0\">\n              {/* Modal container with scale and fade animation */}\n              <div className={`relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all duration-300 ease-out sm:my-8 sm:w-full sm:max-w-lg ${\n                modalAnimation === 'visible' \n                  ? 'scale-100 opacity-100 translate-y-0' \n                  : 'scale-95 opacity-0 translate-y-4'\n              }`}>\n                {/* Gradient header */}\n                <div className=\"bg-gradient-to-r from-red-50 to-red-100 px-6 py-8\">\n                  <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 shadow-lg mb-4 animate-pulse\">\n                    <ExclamationTriangleIcon className=\"h-8 w-8 text-red-600\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                    {deleteData.title}\n                  </h3>\n                  <p className=\"text-sm text-gray-600 leading-relaxed\">\n                    {deleteData.message}\n                  </p>\n                </div>\n                \n                {/* Action buttons */}\n                <div className=\"bg-gray-50 px-6 py-4 flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-3 space-y-3 space-y-reverse sm:space-y-0\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setModalAnimation('hidden');\n                      setTimeout(() => {\n                        setShowDeleteModal(false);\n                        setDeleteData(null);\n                      }, 300);\n                    }}\n                    className=\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-xl text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all duration-200 ease-in-out transform hover:scale-105\"\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={confirmDelete}\n                    className=\"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 border border-transparent shadow-sm text-sm font-medium rounded-xl text-white bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 ease-in-out transform hover:scale-105 hover:shadow-lg\"\n                  >\n                    <TrashIcon className=\"h-4 w-4 mr-2\" />\n                    {deleteData.confirmText}\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Schedules; \n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}